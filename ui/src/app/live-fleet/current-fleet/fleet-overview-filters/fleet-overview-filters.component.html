<div  class="dashboardMenu" style="padding: 0px !important;">
    <mat-expansion-panel *ngIf ='!isVehicleDetails' class="full-width" fxLayoutGap="10px" style="padding-top: 20px;">
        <mat-expansion-panel-header class="full-width">
          <mat-panel-title>              
          <span style="font-size:15px;margin-top:0px;letter-spacing: 0.3px;padding-right: 15px;">{{translationData.lblViewDetailsBy || 'Filter by:'}}</span>
      </mat-panel-title>
        </mat-expansion-panel-header>
        <div class="filtersTab" >
          <mat-tab-group class="header-less-tabs" [ngClass]="[ tabVisibilityStatus ? '' : 'hideTabHeader']" [(selectedIndex)]="selectedIndex" (selectedTabChange)="onTabChanged($event);">
           <mat-tab  label="{{ translationData.lblVehicle || 'Vehicle' }}" >
           </mat-tab>
           <mat-tab label="{{ translationData.lblDriver || 'Driver' }}" > 
           </mat-tab>               
         </mat-tab-group>
       </div>           
   <div *ngIf="selectedIndex == 0" >
  <form [formGroup]="filterVehicleForm">
    <div fxLayout="row" fxLayoutAlign="space-between">
          <mat-form-field appearance="outline" class="dropdown-filters">
              <input matInput (keyup)="applyFilter($event.target.value)" placeholder="{{ translationData.lblSearch || 'Search' }}">
              <span matPrefix><mat-icon>search</mat-icon></span>
          </mat-form-field>
    </div>
    <div fxLayout="column" fxLayoutAlign="space-between" >
        <mat-label>{{ translationData.lblSelectGroup || 'Select Group' }} </mat-label>
        <mat-form-field appearance="outline" class="full-width dropdown-filters">
            <mat-select placeholder="All" (selectionChange)="onChangeGroup($event.value)" formControlName="group">
                <mat-option value="all">{{translationData.lblAll || 'All'}}</mat-option>
                <mat-option *ngFor="let item of groupList" [value]="item.vehicleId">
                    {{item.vehicleGroupName}}
                </mat-option>
            </mat-select>
        </mat-form-field>
    </div>
    <div fxLayout="column" fxLayoutAlign="space-between">
        <mat-label>{{ translationData.lblAlertLevel || 'Alert Level' }} </mat-label>
        <mat-form-field appearance="outline" class="full-width dropdown-filters">
            <mat-select placeholder="All" multiple [(ngModel)]="selection3" (selectionChange)="onChangeLevel($event.value)" formControlName="level">
                <mat-option value="all">{{translationData.lblAll || 'All'}}</mat-option>
                <mat-option *ngFor="let item of levelList" [value]="item.value">
                    {{item.name}}
                </mat-option>
            </mat-select>
        </mat-form-field>
    </div>
    <div fxLayout="column" fxLayoutAlign="space-between" >
        <mat-label>{{ translationData.lblAlertCategory || 'Alert Category' }} </mat-label>
        <mat-form-field appearance="outline" class="full-width dropdown-filters">
            <mat-select placeholder="All" multiple [(ngModel)]="selection1" (selectionChange)="onChangeCategory($event.value)" formControlName="category">
                <mat-option value="all">{{translationData.lblAll || 'All'}}</mat-option>
                <mat-option *ngFor="let item of categoryList" [value]="item.value">
                    {{item.name}}
                </mat-option>
            </mat-select>
        </mat-form-field>
    </div>
    <div fxLayout="column" fxLayoutAlign="space-between" >
        <mat-label>{{ translationData.lblHealthStatus|| 'Health Status' }} </mat-label>
        <mat-form-field appearance="outline" class="full-width dropdown-filters">
            <mat-select placeholder="All" multiple [(ngModel)]="selection2"(selectionChange)="onChangHealthStatus($event.value)" formControlName="status">
                <mat-option value="all">{{translationData.lblAll || 'All'}}</mat-option>
                <mat-option *ngFor="let item of healthList" [value]="item.value">
                    {{item.name}}
                </mat-option>
            </mat-select>
        </mat-form-field>
    </div>
    <div fxLayout="column" fxLayoutAlign="space-between" >
        <mat-label>{{ translationData.lblOtherFilter || 'Other Filter' }} </mat-label>
        <mat-form-field appearance="outline" class="full-width dropdown-filters">
            <mat-select placeholder="All" (selectionChange)="onChangeOtherFilter($event.value)" formControlName="otherFilter">
                <mat-option value="all">{{translationData.lblAll || 'All'}}</mat-option>
                <mat-option *ngFor="let item of otherList" [value]="item.value">
                    {{item.name}}
                </mat-option>
            </mat-select>
        </mat-form-field>
    </div>
  </form>
</div>
<div *ngIf="selectedIndex == 1">
  <div class="fleet-filter-driver">
      <form [formGroup]="driverVehicleForm">
      <div fxLayout="row" fxLayoutAlign="space-between" style="padding-top: 20px;">
          <mat-form-field appearance="outline">
              <input matInput (keyup)="applyFilter($event.target.value)" placeholder="{{ translationData.lblSearch || 'Search' }}">
              <span matPrefix><mat-icon>search</mat-icon></span>
          </mat-form-field>        
     </div>
     <div  fxLayout="column" fxLayoutAlign="left">
      <mat-label style='display: flex; place-content: space-between;'>
          {{ translationData.lbl || 'Select Driver' }}
      </mat-label>
      <mat-form-field appearance="outline" class="full-width">
          <mat-select (selectionChange)="onChangeGroup($event.value)" formControlName="group" placeholder="{{ translationData.lblSelectUserRole || 'Select Vehicle Group' }}" >
              <mat-option value=''>{{ translationData.lblAll || 'All' }}</mat-option>
              <mat-option *ngFor="let item of groupList" [value]="item.vehicleId">
                  {{item.vehicleGroupName}}
              </mat-option>
          </mat-select>
      </mat-form-field>
  </div> 
  </form> 
</div>
</div>
</mat-expansion-panel>
<div *ngIf="selectedIndex == 0">
    <app-fleet-overview-filter-vehicle 
    (tabVisibility)="tabVisibilityHandler($event)" 
    [translationData]='translationData' 
    [detailsData] ="detailsData"
    [fromVehicleHealth] = "fromVehicleHealth"
    [groupList] = "groupList"
    [categoryList] = "categoryList"
    [levelList] = "levelList"
    [healthList] = "healthList"
    [otherList] = "otherList"
    [noRecordFlag] ="noRecordFlag"
    [vehicleListData] ="vehicleListData"
    (vehicleFilterComponentEmit)='checkCreationForVehicle($event)'
    (vehicleDetailsInfoEmit)='checkToHideFilter($event)'
    [vehInfoPrefData]='vehInfoPrefData'>
</app-fleet-overview-filter-vehicle>
</div>

<div *ngIf="selectedIndex == 1"> 
    <app-fleet-overview-filter-driver *ngIf="selectedIndex == 1" 
    (tabVisibility)="tabVisibilityHandler($event)" 
    [translationData]='translationData' 
    [detailsData] ="detailsData" 
    [filterData]="filterData"
    [noRecordFlag] ="noRecordFlag"
    [vehicleListData] ="vehicleListData"
    (driverFilterComponentEmit)="checkCreationForDriver($event)">
</app-fleet-overview-filter-driver>
</div>
</div>

