<div class='bgtrans'>
  <div *ngIf='titleVisible' fxLayout="row" fxLayoutAlign="center center"
    style='padding:10px; color:#fff; background: #5dc24e;'>
    <div fxLayout="column" fxLayoutGap="3px" fxLayoutAlign="center center" style='width:95%;'>
      {{ vehicleUpdatedMsg }}
    </div>
    <div fxLayout="column" fxLayoutGap="3px" fxLayoutAlign="center center">
      <mat-icon (click)='onClose()' style='cursor: pointer;'>close</mat-icon>
    </div>
  </div>
  <mat-card *ngIf='!updateViewStatus' class='mat-elevation-z'>
    <div fxLayout="row" fxLayoutAlign="space-between" class='margin-bottom-sm'>
      <div fxLayout="column" fxLayoutGap="3px" fxLayoutAlign="left">
        <span style='font: 500 16px/32px Roboto, "Helvetica Neue", sans-serif;'>{{
          translationData.lblAllVehicleDetails || 'All Vehicle Details' }}</span>
      </div>
    </div>
    <div fxLayout="row" fxLayoutGap="50px" fxLayoutAlign="space-between" class='margin-bottom-sm'>
      <div class='areaWidth' fxLayout="column" fxLayoutGap="3px" fxLayoutAlign="end">
        <mat-form-field appearance="outline">
          <input matInput (keyup)="applyFilter($event.target.value)"
            placeholder="{{ translationData.lblSearch || 'Search' }}">
          <span matPrefix>
            <mat-icon>search</mat-icon>
          </span>
        </mat-form-field>
      </div>
    </div>
    <div *ngIf='initData.length == 0'>{{ translationData.lblNoRecordFound || 'No Record Found' }}</div>
    <div *ngIf='initData.length > 0'>
      <mat-table [dataSource]="dataSource" matSort>
        <ng-container matColumnDef="name">
          <mat-header-cell *matHeaderCellDef mat-sort-header>{{ translationData.lblVehicle || 'Vehicle' }}</mat-header-cell>
          <mat-cell *matCellDef="let row">{{ row.name }}</mat-cell>
        </ng-container>
        <ng-container matColumnDef="vin">
          <mat-header-cell *matHeaderCellDef mat-sort-header>{{ translationData.lblVIN || 'VIN' }}</mat-header-cell>
          <mat-cell *matCellDef="let row">{{ row.vin }}</mat-cell>
        </ng-container>
        <ng-container matColumnDef="licensePlateNumber">
          <mat-header-cell *matHeaderCellDef mat-sort-header>{{ translationData.lblRegistrationNumber || 'Registration Number' }}</mat-header-cell>
          <mat-cell *matCellDef="let row">{{ row.licensePlateNumber }}</mat-cell>
        </ng-container>
        <ng-container matColumnDef="modelId">
          <mat-header-cell *matHeaderCellDef mat-sort-header>{{ translationData.lblModel || 'Model' }}</mat-header-cell>
          <mat-cell *matCellDef="let row">{{ row.modelId ? row.modelId : '-' }}</mat-cell>
        </ng-container>
        <ng-container matColumnDef="relationShip">
          <mat-header-cell *matHeaderCellDef mat-sort-header>{{ translationData.lblRelationship || 'Relationship' }}</mat-header-cell>
          <mat-cell *matCellDef="let row">{{ row.relationShip }}</mat-cell>
        </ng-container>
        <ng-container matColumnDef="status">
          <mat-header-cell *matHeaderCellDef mat-sort-header>{{ translationData.lblStatus || 'Status' }}</mat-header-cell>
          <mat-cell *matCellDef="let row">
          <span *ngIf="row.status == 'O'">
            <img matTooltip="{{ translationData.lblOff || 'Off' }}" src='assets/images/dynamic_group.svg' style="width: 30px; height: 30px; margin-left: 5px;" />
          </span>
          <span *ngIf="row.status == 'C'">
            <img matTooltip="{{ translationData.lblConnected || 'Connected' }}" src='assets/images/dynamic_group.svg' style="width: 30px; height: 30px; margin-left: 5px;" />
          </span>
          <span *ngIf="row.status == 'N'">
            <img matTooltip="{{ translationData.lblConnectedOTA || 'Connected OTA' }}" src='assets/images/dynamic_group.svg' style="width: 30px; height: 30px; margin-left: 5px;" />
          </span>
          <span *ngIf="row.status == 'A'">
            <img matTooltip="{{ translationData.lblOTA || 'OTA' }}" src='assets/images/dynamic_group.svg' style="width: 30px; height: 30px; margin-left: 5px;" />
          </span>
          <span *ngIf="row.status == 'T'">
            <img matTooltip="{{ translationData.lblTerminate || 'Terminate' }}" src='assets/images/dynamic_group.svg' style="width: 30px; height: 30px; margin-left: 5px;" />
          </span>
        </mat-cell>
        </ng-container>
        <ng-container matColumnDef="action">
          <mat-header-cell *matHeaderCellDef>{{ translationData.lblAction || 'Action'}}</mat-header-cell>
          <mat-cell *matCellDef="let row">
            <button class='actionBtn' (click)="editViewVehicle(row, 'view')" mat-flat-button matTooltip="View">
              <mat-icon>visibility</mat-icon>
            </button>
            <button class='actionBtn' mat-flat-button (click)="editViewVehicle(row, 'edit')" matTooltip="Edit">
              <mat-icon>create</mat-icon>
            </button>
          </mat-cell>
        </ng-container>
        <mat-header-row *matHeaderRowDef="displayedColumns"></mat-header-row>
        <mat-row *matRowDef="let row; columns: displayedColumns;">
        </mat-row>
    </mat-table>
    <mat-paginator [pageSizeOptions]="[5, 10, 25, 100]"></mat-paginator>
    </div>
    <app-spinner *ngIf="showLoadingIndicator"></app-spinner>
  </mat-card>
</div>