<div class='bgtrans'>
<div fxLayout="row" fxLayoutAlign="space-between" class='margin-bottom-sm'>
    <div fxLayout="column" fxLayoutGap="3px" fxLayoutAlign="left">
        <span>{{ breadcumMsg }}</span>
    </div>
    <div *ngIf="actionType == 'create'" fxLayout="column" fxLayoutGap="3px" fxLayoutAlign="end" class='margin-right-xxlg'>
        <span class='custom-font' (click)="toBack()">
            <span>
                <&nbsp;</span>
                    <span class='backBtnCss'>{{ translationData.lblBack || 'Back' }}</span>
        </span>
    </div>
</div>
<form [formGroup]="ecoScoreProfileForm">
    <mat-card class='mat-elevation-z'>
        <div fxLayout="row" fxLayoutAlign="space-between center" class='margin-bottom-sm'>
            <div fxLayout="column" fxLayoutGap="3px" fxLayoutAlign="start">
                <span style='font: 500 16px/32px Roboto, "Helvetica Neue", sans-serif;'>{{ actionType == 'create' ? (translationData.lblCreateProfile || 'Create Profile') : (translationData.lblManageProfile || 'Manage Profile')  }}</span>
            </div>
            <div  *ngIf="!adminAccessType.adminReadOnlyAccess" >
                <button *ngIf="actionType != 'create'" mat-flat-button color="primary" (click)="createNewProfile()">
                  <mat-icon>add_circle_outline</mat-icon> {{ translationData.lblNewProfile || 'New Profile' }}
                  </button>
                </div>
        </div>

        <div fxLayout="row" fxLayoutAlign="space-between" class="full-width margin-bottom-xlg" fxLayoutGap="10px">
            <div *ngIf="actionType == 'manage'" class="areaWidth min-width-10-per" fxLayout="column" fxLayoutAlign="left">
                <mat-label style='display: flex;'>
                    <span>{{ translationData.lblProfileSelection || 'Profile Selection' }}</span>
                </mat-label>
                <mat-form-field appearance="outline" class="full-width" formControlName="profileNameDropDownValue">
                  <mat-select placeholder="{{ translationData.lblTestProfile || 'Test Profile' }}" (selectionChange)="profileSelectionDropDown($event.value)">
                    <mat-option *ngFor="let options of profileList" [value]="options.profileId">
                      {{options.profileName}}
                    </mat-option>
                  </mat-select>
                </mat-form-field>
              </div>
            <div class="areaWidth min-width-20-per" fxLayout="column" fxLayoutAlign="left">
                <mat-label style='display: flex;'>
                    <span>{{ translationData.lblProfileName || 'Profile Name' }}</span><span class='mandatoryColor'>*</span>
                    <span>{{ translationData.lbl120CharMax || '50 characters max' }}</span>
                </mat-label>
                    <mat-form-field appearance="outline" class="full-width">
                        <input maxlength="50" placeholder="{{ translationData.lblTestProfileName || 'Test Profile Name' }}" matInput
                            formControlName="profileName">
                    </mat-form-field>
                    <mat-error *ngIf="ecoScoreProfileForm.get('profileName').hasError('required')">
                        {{ translationData.lblPleasenterprofilename || 'Please enter Profile Name'}}
                    </mat-error>
                    <mat-error *ngIf="ecoScoreProfileForm.get('profileName').hasError('whitespace')">
                        {{ translationData.lblPackagenamecannotcontainonlywhitespace || 'Profile Name
                        cannot contain only whitespace' }}
                    </mat-error>
                    <mat-error *ngIf="ecoScoreProfileForm.get('profileName').hasError('specialCharsNotAllowed')">
                        {{ translationData.lblSpecialcharactersnotallowed || 'Special characters not allowed' }}
                    </mat-error>
                </div>
            <div class="areaWidth min-width-50-per" fxLayout="column" fxLayoutAlign="left">
                <mat-label style='display: flex; place-content: space-between;'>
                    <span>{{ translationData.lblProfileDescription || 'Profile Description' }}</span>
                    <span>{{ translationData.lbl120CharMax || '120 characters max' }}</span>
                </mat-label>
                    <mat-form-field appearance="outline" class="full-width">
                        <input maxlength="120" placeholder="{{ translationData.lblTestProfileDescription || 'Test Profile Description' }}" matInput
                            formControlName="profileDescription">
                    </mat-form-field>
                    <mat-error *ngIf=" ecoScoreProfileForm.get('profileDescription').hasError('whitespace')">
                        {{ translationData.lblDescriptioncannotcontainonlywhitespace || 'Feature Description cannot contain only whitespace' }}
                    </mat-error>
                    <mat-error *ngIf="ecoScoreProfileForm.get('profileDescription').hasError('specialCharsNotAllowed')">
                        {{ translationData.lblSpecialcharactersnotallowed || 'Special characters not allowed' }}
                    </mat-error>
            </div>
            <div *ngIf="actionType != 'manage'" class="areaWidth min-width-15-per" fxLayout="column" fxLayoutAlign="left">
                <mat-label style='display: flex;'> 
                    <mat-checkbox (change)='onChangeOption($event)'></mat-checkbox>  
                    <span>{{ translationData.lblCreateBasedOnExistingProfile || 'Create based on existing profile' }}</span>
                </mat-label>
                <mat-form-field [disabled]="!isCreatedExistingProfile" appearance="outline" class="full-width">
                  <mat-select  [disabled]="!isCreatedExistingProfile" placeholder="{{ translationData.lblTestProfileSelection || 'Test Profile Selection' }}" (selectionChange)="profileSelectionDropDown($event.value)" >
                    <mat-option *ngFor="let options of profileList" [value]="options.profileId">
                      {{options.profileName}}
                    </mat-option>
                  </mat-select>
                </mat-form-field>
              </div>
        </div>
        <div fxLayout="row" fxLayoutAlign="space-between" class="full-width margin-bottom-xlg" fxLayoutGap="10px">
        <div  fxLayout="column" fxLayoutAlign="start"> 
            <mat-checkbox *ngIf="actionType != 'manage'" [checked] = "isDAFStandard" (change)='onChange($event)'> DAF Standard </mat-checkbox>   
            <span *ngIf="actionType == 'manage'">Last Update: {{ lastUpdated }}</span>
            <span *ngIf="actionType == 'manage'">Updated By: {{ updatedBy }}</span>
        </div>
        <div fxLayout="column" fxLayoutAlign="end">
            <div fxLayout="row" class='areaWidth'>
                <button class='margin-right-10' mat-raised-button color="warn" *ngIf="actionType == 'manage'"
                (click)='onDelete()'>{{ (translationData.lblDelete || 'Delete') }}</button>
                <button class='resetCancelBtnColor margin-right-10' mat-raised-button color="primary" 
                    (click)='onReset()'>{{ translationData.lblReset || 'Reset' }}</button>
                <button class='no-margin' [disabled]="!ecoScoreProfileForm.valid " mat-raised-button color="primary"
                    (click)='onCreate()'>{{ actionType == 'create' ? (translationData.lblCreate || 'Create') :
                    (translationData.lblSave || 'Save') }}</button>
                <!-- <button class='no-margin' [disabled]="!ecoScoreProfileForm.valid " mat-raised-button color="primary" *ngIf="actionType == 'create'"
                    (click)='onCreate()'>{{     (translationData.lblSave || 'Save') }}</button> -->
            </div>
        </div>
    </div>
    </mat-card>
</form>
</div>  
<!-- KPIs -->
<div class='bgtrans'>
<form [formGroup]="ecoScoreProfileKPIForm">
<mat-expansion-panel [(expanded)]="isEcoScore" class="full-width" fxLayoutGap="10px" (opened)="isEcoScore" (closed)="!isEcoScore">
    
        <mat-expansion-panel-header class="full-width">
            <mat-panel-title>
              <span style='font: 500 16px/32px Roboto, "Helvetica Neue", sans-serif;'>Eco-Score</span>
            </mat-panel-title>
          </mat-expansion-panel-header>
          <div fxLayout="row" fxLayoutAlign="space-between " class='margin-bottom-sm'>
            <div fxLayout="column" fxLayoutAlign="left" class="areaWidth half-width"> 
            <div class="custom-slider">
            <ngx-slider *ngIf = "isKPI" [(value)]="value" [(highValue)]="maxvalue" [options]="options" (valueChange)="sliderEvent(value)" (highValueChange)="sliderEndEvent(maxvalue)"></ngx-slider>  
        </div>  
        </div>
          <div fxLayout="row" fxLayoutAlign="space-between" class='margin-bottom-sm' fxLayoutGap="10px">
            <div  fxLayout="column" fxLayoutAlign="left" class ="areaWidth min-width-5-per"> 
                <mat-label style='display: flex;'>
                    <span>Min</span>
                </mat-label>
                    <mat-form-field appearance="outline" class="half-width">
                        <input maxlength="50" matInput
                            formControlName="limitValue" (keyup)="changeMin($event.target.value)">
                    </mat-form-field>
            </div>
            <div  fxLayout="column" fxLayoutAlign="right"  class ="areaWidth min-width-5-per"> 
                <mat-label style='display: flex;'>
                    <span>Target</span>
                </mat-label>
                    <mat-form-field appearance="outline" class="half-width">
                        <input maxlength="50" matInput
                            formControlName="targetValue" (keyup)="changeTarget($event.target.value)">
                    </mat-form-field>
            </div>
            </div>
        </div>
            <div fxLayout="row" fxLayoutAlign="space-between center" class='margin-bottom-sm'fxLayoutGap="10px">
                <div  fxLayout="column" fxLayoutAlign="left" class ="areaWidth half-width">
                </div>
                <div  fxLayout="column" fxLayoutAlign="left" class ="areaWidth min-width-5-per"> 
                    <mat-label style='display: flex;'>
                        <span>Lower Value</span>
                    </mat-label>
                        <mat-form-field appearance="outline" class="half-width">
                            <input maxlength="50" matInput
                                formControlName="lowerValue"  (keyup)="changeLower($event.target.value)">
                        </mat-form-field>
                </div>
                <div  fxLayout="column" fxLayoutAlign="right" class ="areaWidth min-width-5-per"> 
                    <mat-label style='display: flex;'>
                        <span>Upper Value</span>
                    </mat-label>
                        <mat-form-field appearance="outline" class="half-width">
                            <input maxlength="50" matInput
                                formControlName="upperValue"  (keyup)="changeUpper($event.target.value)">
                        </mat-form-field>
                </div>
            </div>
            
</mat-expansion-panel>
</form>
</div>