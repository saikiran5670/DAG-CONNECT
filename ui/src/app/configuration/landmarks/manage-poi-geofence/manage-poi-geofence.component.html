<div>
<!-- <app-common-map *ngIf="mapFlag"></app-common-map> -->
<div *ngIf='!createEditViewGeofenceFlag'>
<mat-card class='mat-elevation-z' *ngIf='!createEditViewPoiFlag'>
  <div fxLayout="row" fxLayoutAlign="space-between" class='margin-bottom-sm'>
    <div fxLayout="column" fxLayoutGap="3px" fxLayoutAlign="left">
      <span style='font: 500 16px/32px Roboto, "Helvetica Neue", sans-serif;'>POI (19)</span>
    </div>
    <!-- <div fxLayout="column" fxLayoutGap="1px" fxLayoutAlign="end">
      <button *ngIf='initData.length > 0' mat-button [matMenuTriggerFor]="menu"><mat-icon>file_upload</mat-icon>Export<mat-icon>more_vert</mat-icon></button>
      <mat-menu #menu="matMenu">
        <button mat-menu-item (click)="exportAsExcelFile()">Excel</button>
      </mat-menu>
    </div> -->
    <div fxLayout="column" fxLayoutGap="3px" fxLayoutAlign="end">
      <div fxLayout="row" class='areaWidth'>
        <button mat-flat-button color="primary" [matMenuTriggerFor]="belowMenu">
          <mat-icon>add_circle_outline</mat-icon> New Landmark
        </button>
        <mat-menu #belowMenu="matMenu" yPosition="below">
          <button mat-menu-item (click)="createEditView()">New POI</button>
          <button mat-menu-item (click)="onGeofenceSelection()">New Geofence</button>
        </mat-menu>
      </div>
    </div>
  </div>
  <div fxLayout="row" fxLayoutAlign="space-between" class='margin-bottom-sm'>
    <div class='areaWidth' fxLayout="column" fxLayoutGap="3px" fxLayoutAlign="left">
      <mat-form-field appearance="outline">
        <input matInput (keyup)="applyFilter($event.target.value)" placeholder="Search ">
        <span matPrefix>
          <mat-icon>search</mat-icon>
        </span>
      </mat-form-field>
    </div>
    <div class="areaWidth" fxLayout="column" fxLayoutGap="2px" fxLayoutAlign="left">
      <mat-form-field appearance="outline" class="full-width">
        <mat-select placeholder="Select Category">
          <mat-option>Category 1</mat-option>
          <mat-option>
            Category 2
          </mat-option>
        </mat-select>
      </mat-form-field>
    </div>
    <div class="areaWidth" fxLayout="column" fxLayoutGap="2px" fxLayoutAlign="left">
      <mat-form-field appearance="outline" class="full-width">
        <mat-select placeholder="Select Sub-Category">
          <mat-option>Sub-Category 1</mat-option>
          <mat-option>
            Sub-Category 2
          </mat-option>
        </mat-select>
      </mat-form-field>
    </div>
    <div class="areaWidth" fxLayout="column" fxLayoutGap="3px" fxLayoutAlign="end">
      <button mat-flat-button color="warn">
        <mat-icon>deleteicon</mat-icon> Delete
      </button>
    </div>
  </div>
  <div *ngIf='poiInitData.length == 0'>No Record Found</div>
  <div *ngIf='poiInitData.length > 0'>
    <mat-table [dataSource]="poidataSource" class="table-items" matSort>
      <ng-container matColumnDef="All">
        <mat-header-cell *matHeaderCellDef>
          <mat-checkbox (change)='$event ? masterToggleForOrgRelationship() : null'
            [checked]='selectedpois.hasValue() && isAllSelectedForOrgRelationship()'
            [indeterminate]='selectedpois.hasValue() && !isAllSelectedForOrgRelationship()'
            [aria-label]='checkboxLabelForOrgRelationship()'>
          </mat-checkbox>
          <span style="margin: 5px 0px 0px 5px;">All</span>
        </mat-header-cell>
        <mat-cell *matCellDef="let row">
          <!-- <span *ngIf="row.newTag" class='newTagIcon marginLeft-24'></span>
          <span *ngIf="row.newTag" class='newTxtCss'>{{ translationData.lblNew || 'New' }}</span>
          <span [ngClass]="{ 'marginLeft-14': row.newTag }"></span> -->
          <mat-checkbox (click)='$event.stopPropagation()' (change)='$event ? selectedpois.toggle(row) : null'
            [checked]='selectedpois.isSelected(row)' [aria-label]='checkboxLabelForOrgRelationship(row)' [disabled]="row.endDate != 0">
          </mat-checkbox>
        </mat-cell>
      </ng-container>
      <ng-container matColumnDef="Icon">
        <mat-header-cell *matHeaderCellDef mat-sort-header>Icon</mat-header-cell>
        <mat-cell *matCellDef="let row">
          <mat-icon>place</mat-icon>
        </mat-cell>
      </ng-container>
      <ng-container matColumnDef="name">
        <mat-header-cell *matHeaderCellDef mat-sort-header>Name</mat-header-cell>
        <mat-cell *matCellDef="let row">{{ row.name }}</mat-cell>
      </ng-container>
      <ng-container matColumnDef="categoryName">
        <mat-header-cell *matHeaderCellDef mat-sort-header>Category</mat-header-cell>
        <mat-cell *matCellDef="let row">{{ row.categoryName }}</mat-cell>
      </ng-container>
      <ng-container matColumnDef="subCategoryName">
        <mat-header-cell *matHeaderCellDef mat-sort-header>Sub-Category</mat-header-cell>
        <mat-cell *matCellDef="let row">{{ row.subCategoryName }}</mat-cell>
      </ng-container>
      <ng-container matColumnDef="address">
        <mat-header-cell *matHeaderCellDef mat-sort-header>Address</mat-header-cell>
        <mat-cell *matCellDef="let row">{{ row.address }}</mat-cell>
      </ng-container>
      <ng-container matColumnDef="Actions">
        <mat-header-cell *matHeaderCellDef> Actions </mat-header-cell>
        <mat-cell *matCellDef="let row">
          <button class='actionBtn' mat-flat-button (click)="editViewPoi(row, 'view')" matTooltip='View'>
            <mat-icon>visibility</mat-icon>
          </button>
          <button *ngIf="!adminAccessType.adminReadOnlyAccess" class='actionBtn' mat-flat-button (click)="editViewPoi(row, 'edit')" matTooltip="'Edit'">
            <mat-icon>create</mat-icon>
          </button>
          <button *ngIf="adminAccessType.adminFullAccess" class='actionBtn' mat-flat-button (click)="deletePoi(row)" matTooltip="Delete">
            <mat-icon class="deleteIcon">delete_outline</mat-icon>
          </button>
        </mat-cell>
      </ng-container>
      <mat-header-row *matHeaderRowDef="displayedColumnsPoi"></mat-header-row>
      <mat-row *matRowDef="let row; columns: displayedColumnsPoi;">
      </mat-row>
    </mat-table>
    <mat-paginator [pageSizeOptions]="[5, 10, 25, 100]" (page)="pageSizeUpdated($event)"></mat-paginator>
  </div>
  <app-spinner *ngIf="showLoadingIndicator"></app-spinner>
</mat-card>
</div>
 <!-- for Geofence table -->

 <div *ngIf='!createEditViewGeofenceFlag'>  
 <mat-card class='mat-elevation-z' *ngIf='!createEditViewPoiFlag'>
<div fxLayout="row" fxLayoutAlign="space-between" class='margin-bottom-sm'>
  <div fxLayout="column" fxLayoutGap="3px" fxLayoutAlign="left">
    <span style='font: 500 16px/32px Roboto, "Helvetica Neue", sans-serif;'>Geofence (18)</span>
  </div>
</div>
<div fxLayout="row" fxLayoutAlign="space-between" class='margin-bottom-sm'>
  <div class='areaWidth' fxLayout="column" fxLayoutGap="3px" fxLayoutAlign="left">
    <mat-form-field appearance="outline">
      <input matInput (keyup)="applyFilter($event.target.value)" placeholder="Search ">
      <span matPrefix>
        <mat-icon>search</mat-icon>
      </span>
    </mat-form-field>
  </div>
  <div class="areaWidth" fxLayout="column" fxLayoutGap="2px" fxLayoutAlign="left">
    <mat-form-field appearance="outline" class="full-width">
      <mat-select placeholder="Select Category">
        <mat-option>Category 1</mat-option>
        <mat-option>
          Category 2
        </mat-option>
      </mat-select>
    </mat-form-field>
  </div>
  <div class="areaWidth" fxLayout="column" fxLayoutGap="2px" fxLayoutAlign="left">
    <mat-form-field appearance="outline" class="full-width">
      <mat-select placeholder="Select Sub-Category">
        <mat-option>Sub-Category 1</mat-option>
        <mat-option>
          Sub-Category 2
        </mat-option>
      </mat-select>
    </mat-form-field>
  </div>
  <!-- <div fxLayout="column" fxLayoutGap="1px" fxLayoutAlign="end">
      <button *ngIf='initData.length > 0' mat-button [matMenuTriggerFor]="menu"><mat-icon>file_upload</mat-icon>Export<mat-icon>more_vert</mat-icon></button>
      <mat-menu #menu="matMenu">
        <button mat-menu-item (click)="exportGeofenceAsExcelFile()">Excel</button>
      </mat-menu>
    </div> -->
  <div class="areaWidth" fxLayout="column" fxLayoutGap="3px" fxLayoutAlign="end">
    <button mat-flat-button color="warn">
      <mat-icon>deleteicon</mat-icon> Delete
    </button>
  </div>
</div>
<div *ngIf='geoInitData.length == 0'>No Record Found</div>
<div *ngIf='geoInitData.length > 0'>
  <mat-table matTableExporter [dataSource]="geofencedataSource" class="table-items" matSort>
    <ng-container matColumnDef="All">
      <mat-header-cell *matHeaderCellDef>
        <mat-checkbox (change)='$event ? masterToggleForOrgRelationship() : null'
          [checked]='selectedpois.hasValue() && isAllSelectedForOrgRelationship()'
          [indeterminate]='selectedpois.hasValue() && !isAllSelectedForOrgRelationship()'
          [aria-label]='checkboxLabelForOrgRelationship()'>
        </mat-checkbox>
        <span style="margin: 5px 0px 0px 5px;">All</span>
      </mat-header-cell>
      <mat-cell *matCellDef="let row">
        <span *ngIf="row.newTag" class='newTagIcon marginLeft-24'></span>
        <span *ngIf="row.newTag" class='newTxtCss'>{{ translationData.lblNew || 'New' }}</span>
        <span [ngClass]="{ 'marginLeft-14': row.newTag }"></span>
        <mat-checkbox (click)='$event.stopPropagation()' (change)='$event ? selectedpois.toggle(row) : null'
          [checked]='selectedpois.isSelected(row)' [aria-label]='checkboxLabelForOrgRelationship(row)' [disabled]="row.endDate != 0">
        </mat-checkbox>
      </mat-cell>
    </ng-container>
    <ng-container matColumnDef="geofenceName">
      <mat-header-cell *matHeaderCellDef mat-sort-header>Name</mat-header-cell>
      <mat-cell *matCellDef="let row">{{ row.geofenceName }}</mat-cell>
    </ng-container>
    <ng-container matColumnDef="categoryName">
      <mat-header-cell *matHeaderCellDef mat-sort-header>Category</mat-header-cell>
      <mat-cell *matCellDef="let row">{{ row.categoryName }}</mat-cell>
    </ng-container>
    <ng-container matColumnDef="subCategoryName">
      <mat-header-cell *matHeaderCellDef mat-sort-header>Sub-Category</mat-header-cell>
      <mat-cell *matCellDef="let row">{{ row.subCategoryName }}</mat-cell>
    </ng-container>
    <ng-container matColumnDef="Actions">
      <mat-header-cell *matHeaderCellDef> Actions </mat-header-cell>
      <mat-cell *matCellDef="let row">
        <button class='actionBtn' mat-flat-button matTooltip='View'>
          <mat-icon>visibility</mat-icon>
        </button>
        <button *ngIf="!adminAccessType.adminReadOnlyAccess" class='actionBtn' mat-flat-button matTooltip="'Edit'">
          <mat-icon>create</mat-icon>
        </button>
        <button *ngIf="adminAccessType.adminFullAccess" class='actionBtn' mat-flat-button (click)="deleteGeofence(row)" matTooltip="Delete">
          <mat-icon class="deleteIcon">delete_outline</mat-icon>
        </button>
      </mat-cell>
    </ng-container>
    <mat-header-row *matHeaderRowDef="displayedColumnsGeo"></mat-header-row>
    <mat-row *matRowDef="let row; columns: displayedColumnsGeo;">
    </mat-row>
  </mat-table>
  <mat-paginator [pageSizeOptions]="[5, 10, 25, 100]" (page)="pageSizeUpdated($event)"></mat-paginator>
</div>
<app-spinner *ngIf="showLoadingIndicator"></app-spinner>
</mat-card>
<app-create-edit-view-poi *ngIf= "createEditViewPoiFlag" (createViewEditPoiEmit)='checkCreationForPoi($event)'[translationData]='translationData' [actionType]='actionType' [selectedElementData]='selectedElementData' ></app-create-edit-view-poi>
<app-create-edit-view-geofence *ngIf= "createEditViewGeofenceFlag" [translationData]='translationData' ></app-create-edit-view-geofence>
</div>