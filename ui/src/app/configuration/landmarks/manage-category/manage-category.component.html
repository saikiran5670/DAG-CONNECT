<div class='margin-top-lg'>
  <div *ngIf='categoryTitleVisible' fxLayout="row" fxLayoutAlign="center center"
        style='padding:10px; color:#fff; background: #5dc24e;' class='margin-bottom-sm'>
        <div fxLayout="column" fxLayoutGap="3px" fxLayoutAlign="center center" style='width:95%;'>
        {{ displayMessage }}
        </div>
        <div fxLayout="column" fxLayoutGap="3px" fxLayoutAlign="center center">
        <mat-icon (click)='onClose()' style='cursor: pointer;'>close</mat-icon>
        </div>
    </div>
    <mat-card class='mat-elevation-z' *ngIf='!createViewEditStatus'>
        <div class="groupDetails margin-bottom-sm" fxLayout="row" fxLayoutAlign="space-between">
            <div fxLayout="column" fxLayoutGap="3px" fxLayoutAlign="left">
              <span style='font: 500 16px/32px Roboto, "Helvetica Neue", sans-serif;'>{{ translationData.lblCategories ||
                'Categories' }} -
                ({{ dataSource.filteredData.length }})</span>
            </div>
            <div fxLayout="column" fxLayoutGap="3px" fxLayoutAlign="end">
              <div fxLayout="row" class='areaWidth'>
                    <div fxLayout="column" fxLayoutGap="3px" fxLayoutAlign="end">
                      <button mat-flat-button color="primary" (click)="onNewCategory()">
                      <mat-icon>add_circle_outline</mat-icon> {{ translationData.lblNewCategory || 'New Category' }}
                      </button>
                    </div>
              </div>
            </div>
          </div>
          <div fxLayout="row" fxLayoutAlign="flex-start" fxLayoutGap="20px" class='margin-bottom-sm'>
            <div class='areaWidth' fxLayout="column" fxLayoutGap="3px" fxLayoutAlign="left">
              <mat-form-field appearance="outline">
                <input matInput (keyup)="applyFilter($event.target.value)"
                  placeholder="{{ translationData.lblSearch || 'Search' }}">
                <span matPrefix>
                  <mat-icon>search</mat-icon>
                </span>
              </mat-form-field>
            </div>
            <div class='areaWidth' fxLayout="column" fxLayoutGap="3px" fxLayoutAlign="left">
              <mat-form-field appearance="outline">
                <mat-select [disabled]='initData.length == 0' (selectionChange)="onCategoryChange()" placeholder="{{ translationData.lblSelectCategory || 'Select Category' }}">
                <mat-option *ngFor="let rer of categoryList" [value]="rer.name">
                    {{ rer.name }}
                </mat-option>
                </mat-select>
            </mat-form-field>
            </div>
            <div class='areaWidth' fxLayout="column" fxLayoutGap="3px" fxLayoutAlign="left">
            <mat-form-field appearance="outline">
              <mat-select [disabled]='initData.length == 0' (selectionChange)="onSubCategoryChange()" placeholder="{{ translationData.lblSelectSubCategory || 'Select Sub-Category' }}">
              <mat-option *ngFor="let rer of subCategoryList" [value]="rer.name">
                  {{ rer.name }}
              </mat-option>
              </mat-select>
          </mat-form-field>
            </div>
          </div>
          <div *ngIf='initData.length == 0'>{{ translationData.lblNoRecordFound || 'No Record Found' }}</div>
          <div *ngIf='initData.length > 0'>
            <mat-table matTableExporter [dataSource]="dataSource" matSort>
              <ng-container matColumnDef="icon">
                <mat-header-cell *matHeaderCellDef mat-sort-header>{{ translationData.lblIcon || 'Icon'}}
                </mat-header-cell>
                <mat-cell *matCellDef="let row"> 
                  <span *ngIf="!row.newTag" class='newTagIcon marginLeft-24'></span>
                  <span *ngIf="!row.newTag" class='newTxtCss'>{{ translationData.lblNew || 'New' }}</span>
                  <span [ngClass]="{ 'marginLeft-14': !row.newTag }"><mat-icon>place</mat-icon></span>
                </mat-cell>
              </ng-container>
              <ng-container matColumnDef="category">
                <mat-header-cell *matHeaderCellDef mat-sort-header>{{ translationData.lblCategory || 'Category'}}
                </mat-header-cell>
                <mat-cell *matCellDef="let row">{{ row.category }}</mat-cell>
              </ng-container>
              <ng-container matColumnDef="subCategory">
                <mat-header-cell *matHeaderCellDef mat-sort-header>{{ translationData.lblSubCategory || 'Sub-Category'}}
                </mat-header-cell>
                <mat-cell *matCellDef="let row">{{ row.subCategory }}</mat-cell>
              </ng-container>
              <ng-container matColumnDef="poi">
                <mat-header-cell *matHeaderCellDef mat-sort-header>{{ translationData.lblNunberofPOI || 'Number of POI'}}
                </mat-header-cell>
                <mat-cell *matCellDef="let row" matTooltip={{row.poi}}><span [ngClass]="row.poi !=0 ? 'row-hover' : '' "
                    (click)="row.poi != 0 ? onPOIClick(row) : ''">{{ (row.poi < 10) ? '0' : '' }}{{ row.poi }}</span></mat-cell>
              </ng-container>
              <ng-container matColumnDef="geofence">
                <mat-header-cell *matHeaderCellDef mat-sort-header>{{ translationData.lblNunberofGeofence || 'Number of Geofence'}}
                </mat-header-cell>
                <mat-cell *matCellDef="let row" matTooltip={{row.geofence}}><span [ngClass]="row.geofence !=0 ? 'row-hover' : '' "
                    (click)="row.geofence != 0 ? onGeofenceClick(row) : ''">{{ (row.geofence < 10) ? '0' : '' }}{{ row.geofence }}</span></mat-cell>
              </ng-container>
              <ng-container matColumnDef="action">
                <mat-header-cell *matHeaderCellDef>{{ translationData.lblAction || 'Action'}}</mat-header-cell>
                <mat-cell *matCellDef="let row">
                  <button class='actionBtn' (click)="editViewCategory(row, 'view')" mat-flat-button matTooltip="View">
                    <mat-icon>visibility</mat-icon>
                  </button>
                  <button class='actionBtn' mat-flat-button (click)="editViewCategory(row, 'edit')" matTooltip="Edit">
                    <mat-icon>create</mat-icon>
                  </button>
                  <button class='actionBtn' mat-flat-button (click)="deleteCategory(row)" matTooltip="Delete">
                    <mat-icon class="deleteIcon">delete_outline</mat-icon>
                  </button>
                </mat-cell>
              </ng-container>
              <mat-header-row *matHeaderRowDef="displayedColumns"></mat-header-row>
              <mat-row *matRowDef="let row; columns: displayedColumns;">
              </mat-row>
            </mat-table>
            <mat-paginator [pageSizeOptions]="[5, 10, 25, 100]"></mat-paginator>
          </div>
          <app-spinner *ngIf="showLoadingIndicator"></app-spinner>
    </mat-card>
    <app-create-edit-view-category *ngIf='createViewEditStatus' [translationData]='translationData' [actionType]='actionType' [selectedRowData]='selectedRowData' (backToPage)='onBackToPage($event)'></app-create-edit-view-category>
</div>