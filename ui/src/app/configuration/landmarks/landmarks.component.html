<div class="bgtrans">
  <mat-card *ngIf='!createEditViewPoiFlag' class='margin-top-lg border-none bg-none no-padding full-width margin-top-40 mat-elevation-z'
    fxLayout="column" fxLayoutAlign="start start">
    <mat-card-content class="full-width" *ngIf='!createEditViewPoiFlag'>
      <div fxLayout="row" fxLayoutAlign="space-around" fxLayoutGap="25px">
        <!-- <p style="color: darkgray; font-size: 2em">This screen is part of services feature</p> -->
        <div fxLayout="column" fxLayoutGap="3px">
          <div class="togglegroup">
            <mat-button-toggle-group #colorToggle="matButtonToggleGroup" value="primary" aria-label="Change color">
              <mat-button-toggle class="toggle1" value="primary"> Manage POI and Geofence </mat-button-toggle>
              <mat-button-toggle class="toggle" value="accent"> Manage Group </mat-button-toggle>
              <mat-button-toggle class="toggle" value="accent"> Manage Category </mat-button-toggle>
              <mat-button-toggle class="toggle" value="accent"> Manage Corridor </mat-button-toggle>
            </mat-button-toggle-group>
          </div>
        </div>
        <div fxLayout="column" fxLayoutGap="3px" fxLayoutAlign="end" class="button1">
          <div fxLayout="row" class='areaWidth'>
            <button mat-flat-button color="primary" [matMenuTriggerFor]="belowMenu">
              <mat-icon>add_circle_outline</mat-icon> New Landmark
            </button>
            <mat-menu #belowMenu="matMenu" yPosition="below">
              <button mat-menu-item (click)="createEditView()">New POI</button>
              <button mat-menu-item >New Geofence</button>
            </mat-menu>
          </div>
        </div>
      </div>
    </mat-card-content>
  </mat-card>
  <!-- <app-common-map *ngIf="mapFlag"></app-common-map> -->
  <mat-card class='mat-elevation-z' *ngIf='!createEditViewPoiFlag'>
    <div fxLayout="row" fxLayoutAlign="space-between" class='margin-bottom-sm'>
      <div fxLayout="column" fxLayoutGap="3px" fxLayoutAlign="left">
        <span style='font: 500 16px/32px Roboto, "Helvetica Neue", sans-serif;'>POI (19)</span>
      </div>
    </div>
    <div fxLayout="row" fxLayoutAlign="space-between" class='margin-bottom-sm'>
      <div class='areaWidth' fxLayout="column" fxLayoutGap="3px" fxLayoutAlign="left">
        <mat-form-field appearance="outline">
          <input matInput (keyup)="applyFilter($event.target.value)" placeholder="Search ">
          <span matPrefix>
            <mat-icon>search</mat-icon>
          </span>
        </mat-form-field>
      </div>
      <div class="areaWidth" fxLayout="column" fxLayoutGap="2px" fxLayoutAlign="left">
        <mat-form-field appearance="outline" class="full-width">
          <mat-select placeholder="Select Category">
            <mat-option>Category 1</mat-option>
            <mat-option>
              Category 2
            </mat-option>
          </mat-select>
        </mat-form-field>
      </div>
      <div class="areaWidth" fxLayout="column" fxLayoutGap="3px" fxLayoutAlign="end">
        <button mat-flat-button color="warn">
          <mat-icon>deleteIcon</mat-icon> Delete
        </button>
      </div>
    </div>
    <div *ngIf='initData.length == 0'>No Record Found</div>
    <div *ngIf='initData.length > 0'>
      <mat-table [dataSource]="dataSource" class="table-items" matSort>
        <ng-container matColumnDef="All">
          <mat-header-cell *matHeaderCellDef>
            <mat-checkbox (change)='$event ? masterToggleForOrgRelationship() : null'
              [checked]='selectedOrgRelations.hasValue() && isAllSelectedForOrgRelationship()'
              [indeterminate]='selectedOrgRelations.hasValue() && !isAllSelectedForOrgRelationship()'
              [aria-label]='checkboxLabelForOrgRelationship()'>
            </mat-checkbox>
            <span style="margin: 5px 0px 0px 5px;">All</span>
          </mat-header-cell>
          <mat-cell *matCellDef="let row">
            <!-- <span *ngIf="row.newTag" class='newTagIcon marginLeft-24'></span>
            <span *ngIf="row.newTag" class='newTxtCss'>{{ translationData.lblNew || 'New' }}</span>
            <span [ngClass]="{ 'marginLeft-14': row.newTag }"></span> -->
            <mat-checkbox (click)='$event.stopPropagation()' (change)='$event ? selectedOrgRelations.toggle(row) : null'
              [checked]='selectedOrgRelations.isSelected(row)' [aria-label]='checkboxLabelForOrgRelationship(row)' [disabled]="row.endDate != 0">
            </mat-checkbox>
          </mat-cell>
        </ng-container>
        <ng-container matColumnDef="Icon">
          <mat-header-cell *matHeaderCellDef mat-sort-header>Icon</mat-header-cell>
          <mat-cell *matCellDef="let row">
            <mat-icon>place</mat-icon>
          </mat-cell>
        </ng-container>
        <ng-container matColumnDef="Name">
          <mat-header-cell *matHeaderCellDef mat-sort-header>Name</mat-header-cell>
          <mat-cell *matCellDef="let row">{{ row.name }}</mat-cell>
        </ng-container>
        <ng-container matColumnDef="Category">
          <mat-header-cell *matHeaderCellDef mat-sort-header>Category</mat-header-cell>
          <mat-cell *matCellDef="let row">{{ row.category }}</mat-cell>
        </ng-container>
        <ng-container matColumnDef="Sub-Category">
          <mat-header-cell *matHeaderCellDef mat-sort-header>Sub-Category</mat-header-cell>
          <mat-cell *matCellDef="let row">{{ row.subcategory }}</mat-cell>
        </ng-container>
        <ng-container matColumnDef="Address">
          <mat-header-cell *matHeaderCellDef mat-sort-header>Address</mat-header-cell>
          <mat-cell *matCellDef="let row">{{ row.address }}</mat-cell>
        </ng-container>
        <ng-container matColumnDef="Actions">
          <mat-header-cell *matHeaderCellDef> Actions </mat-header-cell>
          <mat-cell *matCellDef="let row">
            <button class='actionBtn' mat-flat-button matTooltip='View'>
              <mat-icon>visibility</mat-icon>
            </button>
            <button *ngIf="!adminAccessType.adminReadOnlyAccess" class='actionBtn' mat-flat-button matTooltip="'Edit'">
              <mat-icon>create</mat-icon>
            </button>
            <button *ngIf="adminAccessType.adminFullAccess" class='actionBtn' mat-flat-button matTooltip="Delete">
              <mat-icon class="deleteIcon">delete_outline</mat-icon>
            </button>
          </mat-cell>
        </ng-container>
        <mat-header-row *matHeaderRowDef="displayedColumns"></mat-header-row>
        <mat-row *matRowDef="let row; columns: displayedColumns;">
        </mat-row>
      </mat-table>
      <mat-paginator [pageSizeOptions]="[5, 10, 25, 100]" (page)="pageSizeUpdated($event)"></mat-paginator>
    </div>
    <app-spinner *ngIf="showLoadingIndicator"></app-spinner>
  </mat-card>

   <!-- for Geofence table -->

<mat-card class='mat-elevation-z' *ngIf='!createEditViewPoiFlag'>
  <div fxLayout="row" fxLayoutAlign="space-between" class='margin-bottom-sm'>
    <div fxLayout="column" fxLayoutGap="3px" fxLayoutAlign="left">
      <span style='font: 500 16px/32px Roboto, "Helvetica Neue", sans-serif;'>Geofence (18)</span>
    </div>
  </div>
  <div fxLayout="row" fxLayoutAlign="space-between" class='margin-bottom-sm'>
    <div class='areaWidth' fxLayout="column" fxLayoutGap="3px" fxLayoutAlign="left">
      <mat-form-field appearance="outline">
        <input matInput (keyup)="applyFilter($event.target.value)" placeholder="Search ">
        <span matPrefix>
          <mat-icon>search</mat-icon>
        </span>
      </mat-form-field>
    </div>
    <div class="areaWidth" fxLayout="column" fxLayoutGap="2px" fxLayoutAlign="left">
      <mat-form-field appearance="outline" class="full-width">
        <mat-select placeholder="Select Category">
          <mat-option>Category 1</mat-option>
          <mat-option>
            Category 2
          </mat-option>
        </mat-select>
      </mat-form-field>
    </div>
    <div class="areaWidth" fxLayout="column" fxLayoutGap="3px" fxLayoutAlign="end">
      <button mat-flat-button color="warn">
        <mat-icon>deleteIcon</mat-icon> Delete
      </button>
    </div>
  </div>
  <div *ngIf='initData.length == 0'>No Record Found</div>
  <div *ngIf='initData.length > 0'>
    <mat-table [dataSource]="dataSource" class="table-items" matSort>
      <ng-container matColumnDef="All">
        <mat-header-cell *matHeaderCellDef>
          <mat-checkbox (change)='$event ? masterToggleForOrgRelationship() : null'
            [checked]='selectedOrgRelations.hasValue() && isAllSelectedForOrgRelationship()'
            [indeterminate]='selectedOrgRelations.hasValue() && !isAllSelectedForOrgRelationship()'
            [aria-label]='checkboxLabelForOrgRelationship()'>
          </mat-checkbox>
          <span style="margin: 5px 0px 0px 5px;">All</span>
        </mat-header-cell>
        <mat-cell *matCellDef="let row">
          <!-- <span *ngIf="row.newTag" class='newTagIcon marginLeft-24'></span>
          <span *ngIf="row.newTag" class='newTxtCss'>{{ translationData.lblNew || 'New' }}</span>
          <span [ngClass]="{ 'marginLeft-14': row.newTag }"></span> -->
          <mat-checkbox (click)='$event.stopPropagation()' (change)='$event ? selectedOrgRelations.toggle(row) : null'
            [checked]='selectedOrgRelations.isSelected(row)' [aria-label]='checkboxLabelForOrgRelationship(row)' [disabled]="row.endDate != 0">
          </mat-checkbox>
        </mat-cell>
      </ng-container>
      <ng-container matColumnDef="Name">
        <mat-header-cell *matHeaderCellDef mat-sort-header>Name</mat-header-cell>
        <mat-cell *matCellDef="let row">{{ row.name }}</mat-cell>
      </ng-container>
      <ng-container matColumnDef="Category">
        <mat-header-cell *matHeaderCellDef mat-sort-header>Category</mat-header-cell>
        <mat-cell *matCellDef="let row">{{ row.category }}</mat-cell>
      </ng-container>
      <ng-container matColumnDef="Sub-Category">
        <mat-header-cell *matHeaderCellDef mat-sort-header>Sub-Category</mat-header-cell>
        <mat-cell *matCellDef="let row">{{ row.subcategory }}</mat-cell>
      </ng-container>
      <ng-container matColumnDef="Actions">
        <mat-header-cell *matHeaderCellDef> Actions </mat-header-cell>
        <mat-cell *matCellDef="let row">
          <button class='actionBtn' mat-flat-button matTooltip='View'>
            <mat-icon>visibility</mat-icon>
          </button>
          <button *ngIf="!adminAccessType.adminReadOnlyAccess" class='actionBtn' mat-flat-button matTooltip="'Edit'">
            <mat-icon>create</mat-icon>
          </button>
          <button *ngIf="adminAccessType.adminFullAccess" class='actionBtn' mat-flat-button matTooltip="Delete">
            <mat-icon class="deleteIcon">delete_outline</mat-icon>
          </button>
        </mat-cell>
      </ng-container>
      <mat-header-row *matHeaderRowDef="displayedColumns1"></mat-header-row>
      <mat-row *matRowDef="let row; columns: displayedColumns1;">
      </mat-row>
    </mat-table>
    <mat-paginator [pageSizeOptions]="[5, 10, 25, 100]" (page)="pageSizeUpdated($event)"></mat-paginator>
  </div>
  <app-spinner *ngIf="showLoadingIndicator"></app-spinner>
</mat-card>

<app-create-edit-view-poi *ngIf= "createEditViewPoiFlag" (createViewEditPoiEmit)='checkCreationForPoi($event)' [actionType]='actionType' ></app-create-edit-view-poi>
</div>