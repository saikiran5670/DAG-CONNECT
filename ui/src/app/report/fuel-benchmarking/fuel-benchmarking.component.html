<div class="bgtrans">
    <form [formGroup]="fuelBenchmarkingForm">
        <mat-card class='mat-elevation-z no-padding margin-bottom-xlg'>
          <mat-expansion-panel [(expanded)]="searchExpandPanel" class="full-width" fxLayoutGap="10px">
            <mat-expansion-panel-header class="full-width">
              <mat-panel-title>
                <span>
                  <span style='font: 500 16px/32px Roboto, "Helvetica Neue", sans-serif;'>{{ translationData.lblSearchReportParameters || 'Search Report Parameters' }}</span>
                </span>
              </mat-panel-title>

            </mat-expansion-panel-header>

              <div class='areaWidth margin-bottom-xlg' fxLayout="column" fxLayoutGap="3px" fxLayoutAlign="center">
                <span class='radioLabel'>{{ translationData.lblBenchmarkBetween || 'Benchmark Between' }}:</span>
                <mat-radio-group (change)='onBenchmarkChange($event)'>
                  <mat-radio-button style='margin-right: 20px;' value="timePeriods"
                    [checked]="selectedBenchmarking ===  'timePeriods' ? true : false">{{ translationData.lblTimePeriods || 'Time Periods' }}
                  </mat-radio-button>
                  <mat-radio-button style='margin-right: 20px;' value="vehicleGroup"
                    [checked]="selectedBenchmarking ===  'vehicleGroup' ? true : false">{{ translationData.lblVehicleGroups || 'Vehicle Groups ' }}
                  </mat-radio-button>
                </mat-radio-group>
                <div>{{ translationData.lblSelectionText || 'Select *Time Periods* to compare several groups on the same period or *Vehicle Groups* to compare one group on different periods.' }}</div>
              </div>


            <div>
              <div fxLayout="row" fxLayoutAlign="space-between" class="full-width margin-bottom-xlg" fxLayoutGap="10px">
                <div class="areaWidth min-width-60-per" fxLayout="column" fxLayoutAlign="left">
                  <mat-label>{{ translationData.lblTimeRange || 'Time Range' }} <span class='mandatoryColor'>*</span></mat-label>
                  <div style='margin-top: 5px;'>
                    <button [disabled]="selectionTab == 'today' || makeDisableTimePeriod" (click)="selectionTimeRange('today')" [ngClass]="{'selectedBtn': selectionTab == 'today'}" class='margin-right-10 no-margin margin-bottom-sm' mat-raised-button color="primary">{{translationData.lblToday || 'Today' }}</button>
                    <button [disabled]="selectionTab == 'yesterday' || makeDisableTimePeriod" (click)="selectionTimeRange('yesterday')" [ngClass]="{'selectedBtn': selectionTab == 'yesterday'}" class='margin-right-10 no-margin margin-bottom-sm' mat-raised-button color="primary">{{translationData.lblYesterday || 'Yesterday' }}</button>
                    <button [disabled]="selectionTab == 'lastweek' || makeDisableTimePeriod" (click)="selectionTimeRange('lastweek')" [ngClass]="{'selectedBtn': selectionTab == 'lastweek'}" class='margin-right-10 no-margin margin-bottom-sm' mat-raised-button color="primary">{{translationData.lblLastWeek || 'Last Week' }}</button>
                    <button [disabled]="selectionTab == 'lastmonth' || makeDisableTimePeriod" (click)="selectionTimeRange('lastmonth')" [ngClass]="{'selectedBtn': selectionTab == 'lastmonth'}" class='margin-right-10 no-margin margin-bottom-sm' mat-raised-button color="primary">{{translationData.lblLastMonth|| 'Last Month' }}</button>
                    <button [disabled]="selectionTab == 'last3month' || makeDisableTimePeriod" (click)="selectionTimeRange('last3month')" [ngClass]="{'selectedBtn': selectionTab == 'last3month'}" class='no-margin margin-bottom-sm' mat-raised-button color="primary">{{translationData.lblLast3Months || 'Last 3 Months' }}</button>
                  </div>
                </div>
                <div class="areaWidth min-width-30-per" fxLayout="column" fxLayoutAlign="left">
                  <mat-label>{{ translationData.lblVehicleGroup || 'Vehicle Group' }} <span class='mandatoryColor'>*</span></mat-label>
                  <mat-form-field appearance="outline">
                    <mat-select [disabled]="vehicleGrpDD.length == 0 || makeDisableVehicleGroup" (selectionChange)="onVehicleGroupChange($event)" placeholder="{{ translationData.lblSelectVehicleGroup || 'Select Vehicle Group' }}"  formControlName="vehicleGroup">
                      <mat-option *ngFor="let rer of vehicleGrpDD" [value]="rer.vehicleGroupId">
                          {{ rer.vehicleGroupName }}
                      </mat-option>
                    </mat-select>
                  </mat-form-field> 
                  <div *ngIf="selectedBenchmarking == 'timePeriods'">{{translationData.lblBottomBenchmarkVehicleGroupText || 'Select the Target Vehicle Group' }}</div>
                  <div *ngIf="selectedBenchmarking == 'vehicleGroup'">{{translationData.lblBottomBenchmarkVehicleGroupText || 'Add a group to compare in the benchmark (maximum 4)' }}</div>
                  <mat-error *ngIf="fuelBenchmarkingForm.get('vehicleGroup').hasError('required') && vehicleGrpDD.length > 0">
                    {{translationData.lblPleaseSelectvehicleGroup || 'Please Select Vehicle Group' }}
                  </mat-error>
                </div>
              </div>
              <div fxLayout="row" fxLayoutAlign="space-between" class="full-width margin-bottom-xlg" fxLayoutGap="10px">
                <div class="areaWidth min-width-60-per" fxLayout="column" fxLayoutAlign="left">
                  <div fxLayout="row" fxLayoutAlign="space-between" class="full-width" fxLayoutGap="10px">
                    <div class="areaWidth min-width-40-per" fxLayout="column" fxLayoutAlign="left">
                      <mat-label>{{ translationData.lblFrom || 'From' }} <span class='mandatoryColor'>*</span></mat-label>
                      <div fxLayout="row" fxLayoutAlign="start" class="full-width" fxLayoutGap="10px">
                        <div class="areaWidth max-width-50-per" fxLayout="column" fxLayoutAlign="left">
                          <mat-form-field appearance="outline">
                            <input matInput [(ngModel)]="startDateValue" (dateChange)="changeStartDateEvent($event)" [min]='last3MonthDate' [max]='endDateValue' [disabled]="makeDisableTimePeriod" [matDatepicker]="startPicker" formControlName="startDate">
                            <mat-datepicker-toggle matSuffix [for]="startPicker"></mat-datepicker-toggle>
                            <mat-datepicker #startPicker></mat-datepicker>
                          </mat-form-field>
                        </div>
                        <div class="areaWidth" fxLayout="column" fxLayoutAlign="left">
                          <div [ngClass]="[ makeDisableTimePeriod ? 'makeDisableTimePeriod':'']">
                          <div fxLayout="row" fxLayoutAlign="space-between" class="full-width" class="timepicker" style='margin-top: 4px;'>
                            <span class='timeAdjustSpan'>{{ startTimeDisplay }}</span> 
                            <input [disabled]="makeDisableTimePeriod" [max]='selectedEndTime' [(ngModel)]="selectedStartTime" class='inputBox' [format]="prefTimeFormat" [ngxTimepicker]="toggleStartTimepicker" [disableClick]="true" formControlName="startTime" readonly>
                            <ngx-material-timepicker-toggle [for]="toggleStartTimepicker"></ngx-material-timepicker-toggle>
                            <ngx-material-timepicker (timeChanged)="startTimeChanged($event)" #toggleStartTimepicker></ngx-material-timepicker>
                          </div>
                        </div>
                        </div>
                      </div>
                    </div>
                    <div class="areaWidth min-width-40-per" fxLayout="column" fxLayoutAlign="left">
                      <mat-label>{{ translationData.lblTo || 'To' }} <span class='mandatoryColor'>*</span></mat-label>
                      <div fxLayout="row" fxLayoutAlign="start" class="full-width" fxLayoutGap="10px">
                        <div class="areaWidth max-width-50-per" fxLayout="column" fxLayoutAlign="left">
                          <mat-form-field appearance="outline">
                            <input matInput [(ngModel)]="endDateValue" (dateChange)="changeEndDateEvent($event)" [disabled]="makeDisableTimePeriod" [min]='startDateValue' [max]='todayDate' [matDatepicker]="endPicker" formControlName="endDate">
                            <mat-datepicker-toggle matSuffix [for]="endPicker"></mat-datepicker-toggle>
                            <mat-datepicker #endPicker></mat-datepicker>
                          </mat-form-field>
                        </div>
                        <div class="areaWidth" fxLayout="column" fxLayoutAlign="left">
                          <div [ngClass]="[ makeDisableTimePeriod ? 'makeDisableTimePeriod':'']">
                          <div fxLayout="row" fxLayoutAlign="space-between" class="full-width" class="timepicker" style='margin-top: 4px;'>
                            <span class='timeAdjustSpan'>{{ endTimeDisplay }}</span>
                            <input [disabled]="makeDisableTimePeriod" [min]='selectedStartTime' [(ngModel)]="selectedEndTime"  class='inputBox' [format]="prefTimeFormat" [ngxTimepicker]="toggleEndTimepicker" [disableClick]="true" formControlName="endTime" readonly>
                            <ngx-material-timepicker-toggle [for]="toggleEndTimepicker"></ngx-material-timepicker-toggle>
                            <ngx-material-timepicker (timeChanged)="endTimeChanged($event)" #toggleEndTimepicker></ngx-material-timepicker>
                          </div>
                          </div>
                        </div>
                      </div>
                    </div>
                  </div>
                </div>
                <div style="visibility: hidden;" class="areaWidth min-width-30-per" fxLayout="column" fxLayoutAlign="left">
                  <mat-label>{{ translationData.lblVehicle || 'Vehicle' }} <span class='mandatoryColor'>*</span></mat-label>
                  <mat-form-field appearance="outline">
                    <mat-select [disabled]="vehicleDD.length == 0" (selectionChange)="onVehicleChange($event)" placeholder="{{ translationData.lblSelectVehicle || 'Select Vehicle' }}" formControlName="vehicle">
                      <mat-option *ngFor="let rer of vehicleDD" [value]="rer.vehicleId">
                        {{ rer.vehicleName }}
                      </mat-option>
                    </mat-select>
                  </mat-form-field>
                  <!-- <mat-error *ngIf="fuelBenchmarkingForm.get('vehicle').hasError('required') && vehicleDD.length > 0">
                    {{translationData.lblPleaseSelectVehicle || 'Please Select Vehicle' }}
                  </mat-error> -->
                </div>
              </div>
              <div *ngIf="selectedBenchmarking == 'timePeriods'" class="margin-bottom-xlg">{{ translationData.lblBottomBenchmarkText || 'Add a period to compare in the benchmark (maximum 4 )' }}</div>
              <div fxLayout="row" fxLayoutAlign="end" class='areaWidth'> 
                <button class='resetCancelBtnColor margin-right-10 no-margin' mat-raised-button color="primary"
                (click)='onReset()'>{{translationData.lblReset || 'Reset' }}</button>
                  <button *ngIf="selectedBenchmarking == 'timePeriods'" [disabled]="!fuelBenchmarkingForm.valid || makeAddDisable" class='no-margin' mat-raised-button color="primary" (click)='onSearch("timePeriods")'>               
                    <mat-icon>add_circle_outline</mat-icon>{{ translationData.lblAddPeriod || ' Add Period' }}
                  </button>
                  <button *ngIf="selectedBenchmarking == 'vehicleGroup'" [disabled]="!fuelBenchmarkingForm.valid || makeAddDisable" class='no-margin' mat-raised-button color="primary" (click)='onSearch("vehicleGroups")'>               
                    <mat-icon>add_circle_outline</mat-icon>{{ translationData.lblAddPeriod || ' Add Group' }}
                  </button>
              </div>
            </div>
          </mat-expansion-panel>
        </mat-card>
      </form>

      <app-fuel-benchmarking-table *ngIf="selectionValueBenchmarkBY"
        [selectionValueBenchmarkBY]= "selectionValueBenchmarkBY"
        [test]="test"
        [benchmarkSelectionChange]="benchmarkSelectionChange"
        [startDateRange]="startDateRange" 
        [vehicleGroupSelected] = "vehicleGroupSelected"
        [endDateRange]="endDateRange" #fuelBenchmarking></app-fuel-benchmarking-table>


        <div *ngIf="!selectionValueBenchmarkBY">
          <mat-card class='mat-elevation-z no-padding margin-bottom-xlg'>
            <mat-expansion-panel [(expanded)]="searchExpandPanel" class="full-width" fxLayoutGap="10px">
              <mat-expansion-panel-header class="full-width">
            <mat-panel-title>
              <span>
                <span style='font: 500 16px/32px Roboto, "Helvetica Neue", sans-serif;'>{{'Fuel Benchmarking Details' }}</span>
              </span>
            </mat-panel-title>
            </mat-expansion-panel-header>

            <div>
              <span>{{'Please select and search required fields from top to view the details' }}</span>
            </div>
            </mat-expansion-panel>          
          </mat-card>
        </div>
</div>

