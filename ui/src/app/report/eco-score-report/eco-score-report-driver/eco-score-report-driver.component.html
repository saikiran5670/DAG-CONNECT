<mat-card class='mat-elevation-z no-padding margin-bottom-xlg'>
  <mat-expansion-panel [(expanded)]="overallPerformancePanel" class="full-width" fxLayoutGap="10px">
    <mat-expansion-panel-header class="full-width">
      <mat-panel-title>
        <div fxLayout="row" fxLayoutAlign='center center'>
          <span style='font: 500 16px/32px Roboto, "Helvetica Neue", sans-serif;'>{{ translationData.lblDriverName || 'Driver Name' }}: {{ selectedDriverName }} -{{ translationData.lblOverallPerformance || 'Overall Performance'}}</span>
          <span matTooltip="{{ translationData.lblOverallPerformanceInfo || 'The Eco-Score represents the Overall Performance of the driver. The Eco-Score is the rounded down average of the Anticipation and Braking Scores. The Fuel Consumption is not part of the Eco-Score calculation.'}}">
            <mat-icon class='margin-right-10'>info</mat-icon></span>
        </div>
      </mat-panel-title>
    </mat-expansion-panel-header>
      <div style='padding: 20px; margin-bottom: 10px; background: #e7e7e7;'>
            <div fxLayout="row" fxLayoutAlign="left" class="full-width" fxLayoutGap="10px">
              <div class="areaWidth min-width-15-per" fxLayout="column" fxLayoutAlign="left">
                <span>
                  <span>{{ translationData.lblFrom || 'From' }} </span>
                </span>
              </div>
              <div class="areaWidth min-width-15-per" fxLayout="column" fxLayoutAlign="left">
                <span>
                  <span>{{ translationData.lblTo|| 'To' }} </span>
                </span>
              </div>
              <div class="areaWidth min-width-10-per" fxLayout="column" fxLayoutAlign="left">
                <span>
                  <span>{{ translationData.lblVehicle || 'Vehicle' }} </span>
                </span>
              </div>
              <div class="areaWidth min-width-10-per" fxLayout="column" fxLayoutAlign="left">
                <span>
                  <span>{{ translationData.lblVehicleGroup|| 'Vehicle Group' }} </span>
                </span>
              </div>
              <div class="areaWidth min-width-15-per" fxLayout="column" fxLayoutAlign="left">
                <span>
                  <span>{{ translationData.lblVehicleGroup|| 'Driver ID' }} </span>
                </span>
              </div>
              <div class="areaWidth min-width-20-per" fxLayout="column" fxLayoutAlign="left">
                <span>
                  <span>{{ translationData.lblVehicleGroup|| 'Driver Option' }} </span>
                </span>
              </div>
            </div>
            <div fxLayout="row" fxLayoutAlign="left" class="full-width" fxLayoutGap="10px">
              <div class="areaWidth min-width-15-per" fxLayout="column" fxLayoutAlign="left">
                <span style='font: 500 14px/32px Roboto, "Helvetica Neue", sans-serif;'>{{ fromDisplayDate }}</span>
              </div>
              <div class="areaWidth min-width-15-per" fxLayout="column" fxLayoutAlign="left">
                <span style='font: 500 14px/32px Roboto, "Helvetica Neue", sans-serif;'>{{ toDisplayDate }}</span>
              </div>
              <div class="areaWidth min-width-10-per" fxLayout="column" fxLayoutAlign="left">
                <span style='font: 500 14px/32px Roboto, "Helvetica Neue", sans-serif;'>{{ selectedVehicle }}</span>
              </div>
              <div class="areaWidth min-width-10-per" fxLayout="column" fxLayoutAlign="left">
                <span style='font: 500 14px/32px Roboto, "Helvetica Neue", sans-serif;'>{{ selectedVehicleGroup }}</span>
              </div>
              <div class="areaWidth min-width-15-per" fxLayout="column" fxLayoutAlign="left">
                <span style='font: 500 14px/32px Roboto, "Helvetica Neue", sans-serif;'>{{ selectedDriverId }}</span>
              </div>
              <div class="areaWidth min-width-20-per" fxLayout="column" fxLayoutAlign="left">
                <span style='font: 500 14px/32px Roboto, "Helvetica Neue", sans-serif;'>{{ selectedDriverOption }}</span>
              </div>
            </div>
            </div>
            <div fxLayout="row" fxLayoutAlign="space-between" fxLayoutGap="10px">
              <div style="display: block">
                <div class="text-center"><span><b>{{ translationData.lblEcoScore || 'Eco-Score' }}</b></span></div>
                <canvas #chart1 baseChart
                  [data]="doughnutChartDataEcoScore"
                  [labels]="doughnutChartLabelsEcoScore"
                  [chartType]="doughnutChartType"
                  [options]="doughnutChartOptions"
                  [plugins]="pluginsCommon"
                  [colors]="doughnutColors">
                </canvas>
              </div>
              <div style="display: block" class="relative">
                <div class="text-center"><span><b>{{ translationData.lblFuelConsumption || 'FuelConsumption' }}</b></span></div>
                <canvas baseChart
                  [data]="doughnutChartDataFuelConsumption"
                  [labels]="doughnutChartLabelsFuelConsumption"
                  [chartType]="doughnutChartType"
                  [options]="doughnutChartOptions"
                  [plugins]="pluginsCommon"
                  [colors]="doughnutColors">
                </canvas>
              </div>
              <div style="display: block" class="relative">
                <div class="text-center"><span><b>{{ translationData.lblAnticipationScore || 'Anticipation Score' }}</b></span></div>
                <canvas baseChart
                  [data]="doughnutChartDataAnticipationScore"
                  [labels]="doughnutChartLabelsAnticipationScore"
                  [chartType]="doughnutChartType"
                  [options]="doughnutChartOptionsA"
                  [plugins]="pluginsCommon"
                  [colors]="doughnutColorsAnticipationScore">
                </canvas>
              </div>
               <div style="display: block" class="relative">
                <div class="text-center"><span><b>{{ translationData.lblBrakingScore || 'Braking Score' }}</b></span></div>
                <canvas baseChart
                  [data]="doughnutChartDataBrakingScore"
                  [labels]="doughnutChartLabelsBrakingScore"
                  [chartType]="doughnutChartType"
                  [options]="doughnutChartOptions"
                  [plugins]="pluginsCommon"
                  [colors]="doughnutColors">
                </canvas>
              </div>
            </div>
          </mat-expansion-panel>
          </mat-card>
          <mat-card class='mat-elevation-z no-padding margin-bottom-xlg'>
            <mat-expansion-panel [(expanded)]="trendlinesPanel" class="full-width" fxLayoutGap="10px">
              <mat-expansion-panel-header class="full-width">
                <mat-panel-title>
                  <div fxLayout="row" fxLayoutAlign='center center'>
                    <span style='font: 500 16px/32px Roboto, "Helvetica Neue", sans-serif;'>{{ translationData.lblTrendlines || 'Trendlines' }}</span>
                    <span matTooltip="{{ trendLinesInfo }}">
                      <mat-icon class='margin-right-10'>info</mat-icon>
                    </span>
                  </div>
                </mat-panel-title>
              </mat-expansion-panel-header>
              <div id="wrapper">
                <div id="chart-line">
                  <apx-chart
                    [series]="chartOptions1.series"
                    [chart]="chartOptions1.chart"
                    [xaxis]="chartOptions1.xaxis"
                    [yaxis]="chartOptions1.yaxis"
                    [dataLabels]="chartOptions1.dataLabels"
                    [fill]="chartOptions1.fill"
                    [markers]="chartOptions1.markers"
                    [stroke]="chartOptions1.stroke"
                  ></apx-chart>
                </div>
                <div id="chart-line2">
                  <apx-chart
                    [series]="chartOptions2.series"
                    [chart]="chartOptions2.chart"
                    [xaxis]="chartOptions2.xaxis"
                    [fill]="chartOptions2.fill"
                    [yaxis]="chartOptions2.yaxis"
                  ></apx-chart>
                </div>
              </div>
              
            </mat-expansion-panel>
          </mat-card>
          <mat-card class='mat-elevation-z no-padding margin-bottom-xlg'>
            <mat-expansion-panel [(expanded)]="generalTablePanel" class="full-width" fxLayoutGap="10px">
              <mat-expansion-panel-header class="full-width">
                <mat-panel-title>
                  <div fxLayout="row" fxLayoutAlign='center center'>
                    <span style='font: 500 16px/32px Roboto, "Helvetica Neue", sans-serif;'>{{ translationData.lblGeneral || 'General' }} </span>
                    <span matTooltip="{{ translationData.lblGeneralInfo || 'The General pane represents the general elements. This provides context on how the driver was assigned, so that its performance details can be better understood. The Overall column represents the results of all vehicles per general element based on the selections made in the search filters. The vehicle name column represents the results of that specific vehicle per general element. By hovering over the vehicle name, it is possible to see the Vehicle Identification Number (VIN) and the Registration Number.' }}">
                      <mat-icon class='margin-right-10'>info</mat-icon></span>
                  </div>
                </mat-panel-title>
              </mat-expansion-panel-header>
              <div class="container-fluid" id="grid_general_table1">
                <angular-slickgrid gridId="grid_general_table"
                [columnDefinitions]="columnDefinitionsGen"
                [gridOptions]="gridOptionsGen"
                [datasetHierarchical]="datasetGen"
                (onAngularGridCreated)="angularGridReadyGen($event)"> 
                </angular-slickgrid>
              </div>
              <br/>
            </mat-expansion-panel>
          </mat-card>
          <mat-card class='mat-elevation-z no-padding margin-bottom-xlg'>
            <mat-expansion-panel [(expanded)]="generalChartPanel" class="full-width" fxLayoutGap="10px">
              <mat-expansion-panel-header class="full-width">
                <mat-panel-title>
                  <span>
                    <span style='font: 500 16px/32px Roboto, "Helvetica Neue", sans-serif;'>{{ translationData.lblCharts || 'Charts' }}</span>
                  </span>
                </mat-panel-title>
              </mat-expansion-panel-header>
              <div fxLayout="row" fxLayoutAlign='left' fxLayoutGap="10px">
                <div class="areaWidth min-width-15-per" fxLayout="column" (click)="toggleGeneralCharts('bar')" fxLayoutAlign="left">
                  {{ translationData.lblBarChart || 'Bar Chart' }}
                </div>
                <div class="areaWidth min-width-15-per" fxLayout="column" (click)="toggleGeneralCharts('pie')" fxLayoutAlign="left">
                  {{ translationData.lblPiechart || 'Pie Chart' }}
                </div>
                <div class="areaWidth min-width-15-per" fxLayout="column" fxLayoutAlign="right">
                  {{ translationData.lblVehicle || 'Vehicle' }}<br/>
                  <mat-form-field appearance="outline" class="full-width">
                    <mat-select placeholder="Language">
                      <mat-option *ngFor="let vehicle of vehicleList" [value]="vehicle.id">
                        {{ vehicle.name }}
                      </mat-option>
                    </mat-select>
                  </mat-form-field>
                </div>
              </div>
              <div class="container-fluid" *ngIf="showGeneralBar">
                    <canvas baseChart
                            [datasets]="barChartData"
                            [labels]="barChartLabels"
                            [options]="barChartOptions"
                            [legend]="barChartLegend"
                            [chartType]="barChartType">
                    </canvas>
              </div>
              <div class="container-fluid" *ngIf="showGeneralPie">
                <canvas baseChart 
                [data]="pieChartData" 
                [labels]="pieChartLabels" 
                [chartType]="pieChartType"
                [options]="pieChartOptions"
                [plugins]="pieChartPlugins"
                [legend]="pieChartLegend">
                </canvas>
              </div>
            </mat-expansion-panel>
          </mat-card>
          <mat-card class='mat-elevation-z no-padding margin-bottom-xlg'>
            <mat-expansion-panel [(expanded)]="driverPerformancePanel" class="full-width" fxLayoutGap="10px">
              <mat-expansion-panel-header class="full-width">
                <mat-panel-title>
                  <div fxLayout="row" fxLayoutAlign='center center'>
                    <span style='font: 500 16px/32px Roboto, "Helvetica Neue", sans-serif;'>{{ translationData.lblDriverPerformance || 'Driver Performance' }}</span>
                    <span matTooltip="{{ translationData.lblGeneralInfo || 'User can see an information icon and below information must be shown in tooltip-
                    The Driver Performance pane represents the elements the driver can influence by its driving style. The Overall column represents the results of all vehicles per Driver Performance element. This is based on the selections made in the search filters. The vehicle name column represents the results of that specific vehicle per Driver Performance element. By hovering over the vehicle name, it is possible to see the Vehicle Identification Number (VIN) and the Registration Number.' }}">
                      <mat-icon class='margin-right-10'>info</mat-icon></span>
                  </div>
                </mat-panel-title>
              </mat-expansion-panel-header>
              <div class="container-fluid" id="grid_performance_table1">
                <angular-slickgrid gridId="grid_performance_table"
                [columnDefinitions]="columnDefinitions"
                [gridOptions]="gridOptions"
                [datasetHierarchical]="datasetHierarchical"
                (onAngularGridCreated)="angularGridReady($event)"> 
                </angular-slickgrid>
              </div>
            </mat-expansion-panel>
          </mat-card>
          <mat-card class='mat-elevation-z no-padding margin-bottom-xlg'>
            <mat-expansion-panel [(expanded)]="driverPerformanceChartPanel" class="full-width" fxLayoutGap="10px">
              <mat-expansion-panel-header class="full-width">
                <mat-panel-title>
                  <span>
                    <span style='font: 500 16px/32px Roboto, "Helvetica Neue", sans-serif;'>{{ translationData.lblCharts || 'Charts' }}</span>
                  </span>
                </mat-panel-title>
              </mat-expansion-panel-header>
              <!-- <div id="chart">
                <apx-chart
                  [series]="chartOptionsApex.series"
                  [chart]="chartOptionsApex.chart"
                  [xaxis]="chartOptionsApex.xaxis"
                  [markers]="chartOptionsApex.markers"
                  [stroke]="chartOptionsApex.stroke"
                  [yaxis]="chartOptionsApex.yaxis"
                  [dataLabels]="chartOptionsApex.dataLabels"
                  [title]="chartOptionsApex.title"
                  [fill]="chartOptionsApex.fill"
                  [tooltip]="chartOptionsApex.tooltip"
                  [legend]="chartOptionsApex.legend"
                ></apx-chart>
              </div> -->
              <div fxLayout="row" fxLayoutAlign='left' fxLayoutGap="10px">
                <div class="areaWidth min-width-15-per" fxLayout="column" (click)="togglePerformanceCharts('bar')" fxLayoutAlign="left">
                  {{ translationData.lblBarChart || 'Bar Chart' }}
                </div>
                <div class="areaWidth min-width-15-per" fxLayout="column" (click)="togglePerformanceCharts('pie')" fxLayoutAlign="left">
                  {{ translationData.lblPiechart || 'Pie Chart' }}
                </div>
              </div>
              <div class="container-fluid" *ngIf="showPerformanceBar">
                PerformanceBar
              </div>
              <div class="container-fluid" *ngIf="showPerformancePie">
                PerformancePie
              </div>
            </mat-expansion-panel>
          </mat-card>
          <app-spinner *ngIf="showLoadingIndicator"></app-spinner>