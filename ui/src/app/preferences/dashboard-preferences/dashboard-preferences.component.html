<!-- <div class="account-info-settings-container" style="background: white;">
    <mat-card class='margin-bottom-xlg mat-elevation-z'>
        <mat-card-content>
            <div *ngIf='updateMsgVisible' fxLayout="row" fxLayoutAlign="center center"
                style='padding:10px; color:#fff; background: #5dc24e;'>
                <div fxLayout="column" fxLayoutGap="3px" fxLayoutAlign="center center" style='width:95%;'>
                    {{ 'displayMessage' }}
                </div>
                <div fxLayout="column" fxLayoutGap="3px" fxLayoutAlign="center center">
                    <mat-icon (click)='onClose()' style='cursor: pointer;'>close</mat-icon>
                </div>
            </div>
        </mat-card-content>
    </mat-card>
</div> -->


<form [formGroup]="dashboardPreferenceForm"> 
<mat-expansion-panel class="full-width margin-bottom-15" fxLayoutGap="10px"
      [(expanded)]="showDashboardReport" (opened)="showDashboardReport == true"
      (closed)="showDashboardReport == false">
      <mat-expansion-panel-header class="full-width">
        <mat-panel-title>
          <span>
            <span style='font: 500 16px/32px Roboto, "Helvetica Neue", sans-serif;'>
                {{ 'Dashboard' }}</span>
            <span style='margin-left: 10px; vertical-align: middle;'>
              <mat-icon *ngIf='!editDashboardFlag' (click)="editDashboardPreferences()"
                style="cursor: pointer; font-size: 20px;">
                edit</mat-icon>
            </span>
          </span>
        </mat-panel-title>
      </mat-expansion-panel-header>
  
      <div *ngIf='updateMsgVisible' fxLayout="row" fxLayoutAlign="center center"
      style='padding:10px; color:#fff; background: #5dc24e;' class='margin-bottom-sm'>
      <div fxLayout="column" fxLayoutGap="3px" fxLayoutAlign="center center" style='width:95%;'>
        {{ displayMessage }}
      </div>
      <div fxLayout="column" fxLayoutGap="3px" fxLayoutAlign="center center">
        <mat-icon (click)='onClose()' style='cursor: pointer;'>close</mat-icon>
      </div>
    </div>
     <!-- *********Fleet KPI ********** -->
    <div fxLayout="row" class='areaWidth full-width padding-10' fxLayoutAlign="left center"
    style='background: #BEE3F8 !important; border-radius: 5px 5px 0px 0px;'>

     
    <div class='min-width-33-3-per'>
    <mat-checkbox class='custom-checkbox' (change)='$event ? masterToggle("FleetKPI") : null'
    [checked]='selectionForFleetKPIColumns.hasValue() && isAllSelected("FleetKPI")'
    [indeterminate]='selectionForFleetKPIColumns.hasValue() && !isAllSelected("FleetKPI")'
    [disabled]='!editDashboardFlag'>            
        <div class='mainTabAlignment'>
            <div>
                <div class='headerFont'>{{'Fleet KPI'}}</div> 
                <span> (Component view settings)</span>
            </div>
        </div>
    </mat-checkbox>
    </div> 
       
    <div class='min-width-33-3-per headerFont mainTabAlignment'>
        {{'Target Per Day Per Vehicle'}}
    </div>
                    
    <div class='min-width-33-3-per headerFont mainTabAlignment'>
        {{'Thereshold Type'}}
    </div>      
  </div>

  <ng-container *ngFor="let field of fleetKPIColumnData; let index = index">
  <div fxLayout="row" class='areaWidth full-width padding-10' fxLayoutAlign="left center"
style='border-radius: 5px 5px 0px 0px;'>
    <div fxLayout="column" class="areaWidth full-width min-width-33-3-per" fxLayoutGap="0px" fxLayoutAlign="left">  
        <mat-checkbox class='custom-checkbox'
        (change)='$event ? selectionForFleetKPIColumns.toggle(field) : null;'
        [checked]="selectionForFleetKPIColumns.isSelected(field)">
                <span>{{ field.translatedName }}</span>
            </mat-checkbox>
        </div>

        <div *ngIf="field.translatedName !=='DrivingTime' && field.translatedName !=='IdlingTime'" 
        fxLayout="column" class="areaWidth full-width min-width-33-3-per" fxLayoutGap="0px" fxLayoutAlign="left">
          <mat-form-field appearance="outline" style='width: 80%'>
              <input  matInput type="text" [formControlName]="field.key+'thresholdValue'"
                  placeholder="{{ 'Set Target' }}" >
              <span *ngIf="field.translatedName =='CO2Emission'" matSuffix>Ton</span>
              <span *ngIf="field.translatedName =='TotalDistance' || 
              field.translatedName =='FuelConsumption'" matSuffix>
              {{prefUnit == 'Metric' ?  (this.translationData.lblkms || 'Km') : (this.translationData.lblmile || 'Miles')}} </span>
              <span *ngIf="field.translatedName =='FuelUsedIdling' || 
              field.translatedName =='FuelConsumed'" matSuffix>
              {{prefUnit == 'Metric' ?  (this.translationData.lblkms || 'L') : (this.translationData.lblmile || 'G')}}
            </span>
          </mat-form-field>
      </div>

      <div *ngIf="field.translatedName =='DrivingTime' || field.translatedName =='IdlingTime'" 
      style="display:inline-block" fxLayout="column" class="areaWidth full-width min-width-33-3-per" fxLayoutGap="0px" fxLayoutAlign="left">
      <div style="display:inline-block">
      <mat-form-field appearance="outline" style='width: 30%;'>
            <input matInput type="text"
                placeholder="{{ '' }}" [formControlName]="field.key+'thresholdValue'" >
            <span matSuffix>Hr</span>
        </mat-form-field>
        <mat-form-field appearance="outline" style='width: 30%; margin-left: 4px;'>
            <input matInput type="text"
                placeholder="{{ '' }}" [formControlName]="field.key+'thresholdValuemin'">
            <span matSuffix>Min</span>
        </mat-form-field>
        </div>
    </div>

      <div fxLayout="column" fxLayoutGap="3px" fxLayoutAlign="left" class="areaWidth min-width-33-3-per">
          <mat-form-field appearance="outline" style='width: 80%'>
              <mat-select [formControlName]="field.key+'thresholdType'" [disabled]='upperLowerDD.length == 0' placeholder="{{'Threshold Type' }}">
                  <mat-option *ngFor="let rer of upperLowerDD" [value]="rer.type">
                  {{ rer.name }}
                  </mat-option>
              </mat-select>
          </mat-form-field>
      </div>
  </div>
</ng-container>

     
    <!-- ********* today live vehicles ********** -->
     
    <div fxLayout="row" class='areaWidth full-width padding-10' fxLayoutAlign="left center"
    style='background: #BEE3F8 !important; border-radius: 5px 5px 0px 0px;'>
   
    <div class='min-width-33-3-per'>

    <mat-checkbox class='custom-checkbox' (change)='$event ? masterToggle("TodayLiveVehicle") : null'
    [checked]='selectionForTodayLiveVehicleColumns.hasValue() && isAllSelected("TodayLiveVehicle")'
    [indeterminate]='selectionForTodayLiveVehicleColumns.hasValue() && !isAllSelected("TodayLiveVehicle")'
    [disabled]='!editDashboardFlag'>            
        <div class='mainTabAlignment'>
            <div>
                <div class='headerFont'>{{'Today Live Vehicle'}}</div> 
                <span> (Component view settings)</span>
            </div>
        </div>
    </mat-checkbox>
    </div> 
       
    <div class='min-width-33-3-per headerFont mainTabAlignment'>
        {{'Target Per Day Per Vehicle'}}
    </div>
                    
    <div class='min-width-33-3-per headerFont mainTabAlignment'>
        {{'Thereshold Type'}}
    </div>      
</div>

    <ng-container *ngFor="let field of todayLiveVehicleColumnData; let index = index">
    <div fxLayout="row" class='areaWidth full-width padding-10' fxLayoutAlign="left">
        <div fxLayout="column" class="areaWidth full-width min-width-33-3-per" fxLayoutGap="0px" fxLayoutAlign="left">
            <mat-checkbox class='custom-checkbox'
            (change)='$event ?selectionForTodayLiveVehicleColumns.toggle(field) : null;'
             [checked]="selectionForTodayLiveVehicleColumns.isSelected(field)">
                <span>{{ field.translatedName }}</span>
            </mat-checkbox>
        </div>

        <div *ngIf="field.translatedName == 'TimeBasedUtilizationRate'" style="display:inline-block" fxLayout="column" class="areaWidth full-width min-width-33-3-per" fxLayoutGap="0px" fxLayoutAlign="left">
            <div style="display:inline-block">
            <mat-form-field appearance="outline" style='width: 30%;'>
                <input matInput type="text" [formControlName]="field.key+'thresholdValue'"
                    placeholder="{{ '' }}">
                <span matSuffix>Hr</span>
            </mat-form-field>
            <mat-form-field appearance="outline" style='width: 30%; margin-left: 4px;'>
                <input matInput type="text" [formControlName]="field.key+'thresholdValuemin'"
                    placeholder="{{ '' }}">
                <span matSuffix>Min</span>
            </mat-form-field>
            </div>
        </div>

        <div *ngIf="field.translatedName == 'DistanceBasedUtilizationRate' || field.translatedName =='ActiveVehicles'" fxLayout="column" class="areaWidth full-width min-width-33-3-per" fxLayoutGap="0px" fxLayoutAlign="left">
            <mat-form-field appearance="outline" style='width: 80%'>
                <input matInput  type="text" [formControlName]="field.key+'thresholdValue'"
                    placeholder="{{ 'Set Target' }}">
                <span *ngIf="field.translatedName == 'DistanceBasedUtilizationRate'" matSuffix>
                    {{prefUnit == 'Metric' ?  (this.translationData.lblkms || 'Km') : (this.translationData.lblmile || 'Miles')}}
                </span>
            </mat-form-field>
        </div>

        <div *ngIf="field.translatedName == 'TimeBasedUtilizationRate' || field.translatedName == 'DistanceBasedUtilizationRate' || field.translatedName == 'ActiveVehicles'" fxLayout="column" fxLayoutGap="3px" fxLayoutAlign="left" class="areaWidth min-width-33-3-per">
            <mat-form-field appearance="outline" style='width: 80%'>
                <mat-select [formControlName]="field.key+'thresholdType'" [disabled]='upperLowerDD.length == 0' placeholder="{{'Threshold Type' }}">
                    <mat-option *ngFor="let rer of upperLowerDD" [value]="rer.type">
                    {{ rer.name }}
                    </mat-option>
                </mat-select>
            </mat-form-field>
        </div>

    </div>
    </ng-container>

    
 <!-- ********* Vehicle Utilization ********** -->

 <div fxLayout="row" class='areaWidth full-width padding-10' fxLayoutAlign="left center"
 style='background: #BEE3F8 !important; border-radius: 5px 5px 0px 0px;'>

 <div class='min-width-33-3-per'>
   
 <mat-checkbox class='custom-checkbox' 
 (change)='$event ? masterToggle("VehicleUtilization") : null'
 [checked]='selectionForVehicleUtilizationColumns.hasValue() && isAllSelected("VehicleUtilization")'
 [indeterminate]='selectionForVehicleUtilizationColumns.hasValue() && !isAllSelected("VehicleUtilization")'
 [disabled]='!editDashboardFlag'>            
     <div class='mainTabAlignment'>
         <div>
             <div class='headerFont'>{{'Vehicle Utilization'}}</div> 
             <span> (Component view settings)</span>
         </div>
     </div>
 </mat-checkbox>
 </div> 
    
 <div class='min-width-33-3-per headerFont mainTabAlignment'>
     {{'Target Per Day Per Vehicle'}}
 </div>
                 
 <div class='min-width-33-3-per headerFont mainTabAlignment'>
     {{'Chart Type'}}
 </div>      
</div>

<ng-container *ngFor="let field of vehicleUtilizationColumnData; let index = index">
<div fxLayout="row" class='areaWidth full-width padding-10' fxLayoutAlign="left">
  <div fxLayout="column" class="areaWidth full-width min-width-33-3-per" fxLayoutGap="0px" fxLayoutAlign="left">   
      <mat-checkbox class='custom-checkbox'
      (change)='$event ? selectionForVehicleUtilizationColumns.toggle(field) : null;'
      [checked]="selectionForVehicleUtilizationColumns.isSelected(field)">
          <span>{{ field.translatedName }}</span>
      </mat-checkbox>
  </div>

  <div *ngIf="field.translatedName!== 'TimeBasedUtilizationRate' && field.translatedName!== 'DistanceBasedUtilizationRate'" 
  fxLayout="column" class="areaWidth full-width min-width-33-3-per" fxLayoutGap="0px" fxLayoutAlign="left">
  </div>

  <div *ngIf="field.translatedName== 'TimeBasedUtilizationRate'"  fxLayout="column" class="areaWidth full-width min-width-33-3-per" fxLayoutGap="0px" fxLayoutAlign="left">
   <div style="display:inline-block">
    <mat-form-field appearance="outline" style='width: 30%;'>
        <input  matInput type="text" [formControlName]="field.key+'thresholdValue'"
            placeholder="{{ '' }}">
        <span matSuffix>Hr</span>
    </mat-form-field>
    <mat-form-field appearance="outline" style='width: 30%; margin-left: 4px;'>
        <input matInput type="text" [formControlName]="field.key+'thresholdValuemin'" 
            placeholder="{{ '' }}">
        <span matSuffix>Min</span>
    </mat-form-field>
    </div>
</div>

<div  *ngIf="field.translatedName== 'DistanceBasedUtilizationRate'"  fxLayout="column" class="areaWidth full-width min-width-33-3-per" fxLayoutGap="0px" fxLayoutAlign="left">
    <mat-form-field appearance="outline" style='width: 80%'>
        <input  matInput type="text" [formControlName]="field.key+'thresholdValue'"
            placeholder="{{ 'Set Target' }}" >
        <span matSuffix> {{prefUnit == 'Metric' ? (this.translationData.lblkms || 'Km') : (this.translationData.lblmile || 'Miles')}}</span>
    </mat-form-field>
</div>

  <div fxLayout="column" fxLayoutGap="3px" fxLayoutAlign="left" class="areaWidth min-width-33-3-per">
      <mat-form-field appearance="outline" style='width: 80%'>
          <mat-select *ngIf="field.translatedName== 'DistanceBasedUtilizationRate' || field.translatedName== 'TimeBasedUtilizationRate'" [disabled]='donutPieDD.length == 0' placeholder="{{'Chart Type' }}">
              <mat-option *ngFor="let rer of donutPieDD" [value]="rer.type">
              {{ rer.name }}
              </mat-option>
          </mat-select>

          <mat-select *ngIf="field.translatedName== 'DistancePerDay' || field.translatedName== 'ActiveVehiclesPerDay'" [disabled]='lineBarDD.length == 0' placeholder="{{'Chart Type' }}">
            <mat-option *ngFor="let rer of lineBarDD" [value]="rer.type">
            {{ rer.name }}
            </mat-option>
        </mat-select>
      </mat-form-field>
  </div>
</div>
</ng-container>


 <!-- ********* Alert Last 24 Hours ********** -->

 
<div fxLayout="row" class='areaWidth full-width padding-10' fxLayoutAlign="left center"
style='background: #BEE3F8 !important; border-radius: 5px 5px 0px 0px;'>
<div class='min-width-33-3-per'>
   
<mat-checkbox class='custom-checkbox'
(change)='$event ? masterToggle("AlertLast24Hours") : null'
[checked]='selectionForAlertLast24HoursColumns.hasValue() && isAllSelected("AlertLast24Hours")'
[indeterminate]='selectionForAlertLast24HoursColumns.hasValue() && !isAllSelected("AlertLast24Hours")'
[disabled]='!editDashboardFlag'
>            
    <div class='mainTabAlignment'>
        <div>
            <div class='headerFont'>{{'Alert Last 24 Hours'}}</div> 
            <span> (Component view settings)</span>
        </div>
    </div>
</mat-checkbox>
</div>   
</div>  


<ng-container *ngIf='alertLast24HoursColumnData.length > 0'>
<div fxLayout="row" class='areaWidth full-width padding-10' fxLayoutAlign="left center"
style='border-radius: 5px 5px 0px 0px;'>
<ng-container *ngFor="let field of alertLast24HoursColumnData; let index = index">
   
    <div fxLayout="column" class="areaWidth full-width min-width-33-3-per" fxLayoutGap="0px" fxLayoutAlign="left">           
            <mat-checkbox class='custom-checkbox' (change)='$event ? selectionForAlertLast24HoursColumns.toggle(field) : null;'
            [checked]="selectionForAlertLast24HoursColumns.isSelected(field)">
                <span>{{ field.translatedName }}</span>
            </mat-checkbox>
        </div>
</ng-container>
      
</div>
</ng-container>

        <div
          *ngIf='editDashboardFlag'
          fxLayout="row" class='areaWidth margin-top-20' fxLayoutAlign="end">
          <button class='resetCancelBtnColor margin-right-10' (click)='onCancel()' mat-raised-button color="primary">{{
            translationData.lblCancel || 'Cancel' }}</button>
          <button class='resetCancelBtnColor margin-right-10'
           (click)='onReset()'mat-raised-button color="primary">{{
            translationData.lblReset || 'Reset' }}</button>
          <button class='no-margin' (click)='onConfirm()' mat-raised-button color="primary" >{{ (translationData.lblConfirm ||
            'Confirm') }}</button>
        </div>

</mat-expansion-panel>
</form> 

