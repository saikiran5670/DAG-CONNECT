
/**
 * The code below uses open source software. Please visit the URL below for an overview of the licenses:
 * http://js.api.here.com/v3/3.1.30.8/HERE_NOTICE
 */

 H.util.eval("R.prototype.u=ca(3,function(a){var b=this.getCache(),c=this;if(a!==y){C(a,Lk,R.prototype.u,0);var d=a}else d=pl;d!==b&&b.ra(function(e,f,g){return c.ec(e)?(d.add(e,f,g),!0):!1});this.R=d});bi.prototype.b=ca(2,function(a){this.i=a;a=this.getState();a!==Zh.INIT&&a!==Zh.LOADING&&ji(this)});function Np(a,b){Xa.apply(null,arguments);return a}function Op(){this.a={}}\nfunction Pp(a,b){for(var c in b)if(b.hasOwnProperty(c)){var d,e=b[c],f=a.a[c]||(a.a[c]=[]),g=e.length;for(d=0;d<g;d++)f.push(new Qp(e[d]))}}function Rp(a,b,c,d){var e=(a=a.a[b])?a.length:0,f=[];for(b=0;b<e;b++)a[b].Cd(c,d)&&f.push(a[b]);return f}\nfunction Qp(a){var b,c=a.boxes;this.label=a.label;this.min=a.minLevel;this.max=a.maxLevel;this.b=[];if(c&&(b=c.length)){var d=c[0];var e=new K(d[0],d[1],d[2],d[3]);this.b.push(e);this.a=new K(d[0],d[1],d[2],d[3]);for(a=1;a<b;a++)d=c[a],e=new K(d[0],d[1],d[2],d[3]),this.b.push(e),this.a.lc(e,!1,this.a)}}Qp.prototype.Cd=function(a,b){if(a>=this.min&&a<=this.max)if((a=this.b.length)&&this.a){if(this.a.Cd(b))for(;a--;)if(this.b[a].Cd(b))return!0}else return!0;return!1};function W(a,b,c,d,e,f){if(a&&b)this.Fl(a),this.Kg(b),this.Od(c),this.El(e),this.ul(f),this.Ui(d);else throw Error('Parameters \"scheme\" and \"host\" must be specified');}t(\"H.service.Url\",W);\nfunction Sp(a,b){var c=x.document,d,e=c&&c.createElement(\"a\"),f=\"\";if(c){if(b){var g=(d=c.getElementsByTagName(\"base\")[0])&&d.href;var h=c.head;var k=d||h.appendChild(c.createElement(\"base\"));k.href=b}e.href=a;f=e.href;b&&(d?d.href=g:h.removeChild(k))}else/[\\w]+:\\/\\//.test(a)&&(f=a);g=/(?:(\\w+):\\/\\/)?(?:([^:]+):([^@/]*)@)?([^/:]+)?(?:[:]{1}([0-9]+))?(\\/[^?#]*)?(\\?[^#]+)?(#.*)?/.exec(f);a=g[1];k=g[4];b=g[5];h=g[6];c=g[7];d=g[8];!g[2]&&k&&/@/.test(k)&&(k=k.split(\"@\")[1]);g=k;h=h&&0<h.length?h.substr(1):\n\"\";k={};if(c)for(e=/([?&]?([^=&+]+))(=([^&]+))?/g;f=e.exec(c);)k[decodeURIComponent(f[2])]=f[4]?decodeURIComponent(f[4]):void 0;return new W(a,g,h,k,isNaN(+b)?void 0:+b,d&&0<d.length?d.substr(1):\"\")}W.parse=Sp;var Tp=0;W.prototype.clone=function(){Tp++;var a={},b;for(b in this.a)a[b]=this.a[b];return new W(this.m,this.f,this.c,a,this.g,this.b)};W.prototype.clone=W.prototype.clone;\nW.prototype.Fl=function(a){if(!a||\"string\"!==typeof a)throw Error('The \"scheme\" parameter must be a non-empty string.');this.m=a;return this};W.prototype.setScheme=W.prototype.Fl;W.prototype.Kn=function(){return this.m};W.prototype.getScheme=W.prototype.Kn;W.prototype.Kg=function(a){if(!a||\"string\"!==typeof a||\"-\"===a.charAt(0)||\".\"===a.charAt(0)||\".\"===a.charAt(a.length-1))throw Error('The \"host\" parameter is not a valid host name.');this.f=a;return this};W.prototype.setHost=W.prototype.Kg;\nW.prototype.dn=function(){return this.f};W.prototype.getHost=W.prototype.dn;W.prototype.Od=function(a){this.c=a||void 0;return this};W.prototype.setPath=W.prototype.Od;W.prototype.xn=function(){return this.c};W.prototype.getPath=W.prototype.xn;W.prototype.Ui=function(a){if(a)if(\"object\"==typeof a)this.a=a;else throw Error('Parameter \"params\" must be an object.');else this.a={};return this};W.prototype.setQuery=W.prototype.Ui;W.prototype.pk=function(){return!Up(this)};W.prototype.hasQuery=W.prototype.pk;\nW.prototype.getQuery=function(){return this.a};W.prototype.getQuery=W.prototype.getQuery;W.prototype.El=function(a){if(a&&isNaN(parseInt(a,10)))throw Error('Parameter \"port\" must be a number or undefined');this.g=+a||void 0;return this};W.prototype.setPort=W.prototype.El;W.prototype.Bn=function(){return this.g};W.prototype.getPort=W.prototype.Bn;W.prototype.ul=function(a){this.b=a||void 0;return this};W.prototype.setAnchor=W.prototype.ul;W.prototype.xd=function(){return this.b};\nW.prototype.getAnchor=W.prototype.xd;W.prototype.I=function(a){if(\"object\"!==typeof a)throw Error('Parameter \"other\" must be an object.');var b=this.a,c;for(c in a)a.hasOwnProperty(c)&&\"function\"!==typeof a[c]&&(b[c]=a[c]);return this};W.prototype.mergeQuery=W.prototype.I;W.prototype.Na=function(a){if(!a||\"string\"!==typeof a)throw Error('Parameter \"subDomain\" must be a non-empty string');\".\"===a.substr(a.length-1)&&(a=a.substr(0,a.length-1));return this.Kg(a+\".\"+this.f)};\nW.prototype.addSubDomain=W.prototype.Na;W.prototype.F=function(a){if(!a||\"string\"!==typeof a)throw Error('Parameter \"subPath\" must be a non-empty string');return this.Od((this.c?this.c+\"/\":\"\")+a)};W.prototype.addSubPath=W.prototype.F;W.prototype.toString=function(){return[this.m+\"://\",this.f,this.g?\":\"+this.g:\"\",this.c||!Up(this)||this.b?\"/\":\"\",this.c?encodeURI(this.c):\"\",Vp(this),this.b?\"#\"+encodeURIComponent(this.b):\"\"].join(\"\")};W.prototype.toString=W.prototype.toString;\nfunction Vp(a){function b(g,h){return encodeURIComponent(g)+(void 0===h?\"\":\"=\"+encodeURIComponent(h).replace(/[!'()*]/g,function(k){return\"%\"+k.charCodeAt(0).toString(16)}))}var c=[],d,e=a.a;for(d in e)if(e.hasOwnProperty(d)&&\"function\"!==typeof e[d]){var f=a.a[d];C(f,Wp)?f.Ul.forEach(function(g){c.push(b(d,g))}):c.push(b(d,f))}return 0<c.length?\"?\"+c.join(\"&\"):\"\"}function Xp(a){var b=Ff(\"H-service\",\"1.30.8\",\"00959ca\");a.a.xnlp=\"CL_JSMv3.\"+b.version;return a}\nfunction Up(a){var b,c=0;for(b in a.a)if(a.a.hasOwnProperty(b)&&\"function\"!==typeof a.a[b]&&(c++,0<c))break;return!c}function Wp(a){var b;if(!zc(a))throw new D(Wp,0,a);for(b=0;b<a.length;b++){var c=a[b];if(!Ac(c)&&!Dc(c))throw new D(Wp,0,\"The array can only contain strings and numbers\");}this.Ul=a}W.MultiValueQueryParameter=Wp;Wp.prototype.Vn=function(){return this.Ul};Wp.prototype.getValues=Wp.prototype.Vn;var Yp=globalThis;sc(\"monospace serif\");function Zp(){}Zp.prototype.pop=function(a){this[a]||(this[a]=[]);return this[a].pop()||Yp.document.createElement(\"canvas\")};Zp.prototype.push=function(a,b){this[b]||(this[b]=[]);this[b].push(a)};var $p=new Zp;t(\"H.service.util.eval\",function(a){return eval(a)});function bq(){var a=decodeURIComponent(x.H.getScriptPath());a=a?\"/\"===a[a.length-1]?a.substring(0,a.length-1):a:\"https://js.api.here.com/v3/3.1.30.8\";return Sp(a).F(\"styles\")};function cq(a,b,c,d,e,f,g){var h=this;g=g||{};f=f?f:{};var k=a.D().clone().F(b+\"/\"+a.Ac()+\"/\"+c).I(f),l=a.Ih();this.B=a;this.T=k;Ak.call(this,{tileSize:d,max:512===d?19:20,min:512===d?2:0,getURL:function(m,p,q){var r=h.T.clone();l&&r.Na(l[(q+p+m)%l.length]);r.F(q+\"/\"+m+\"/\"+p+\"/\"+d+\"/\"+e);return r.toString()},crossOrigin:g.crossOrigin,headers:g.headers,uri:k.toString().replace(/_/g,\"\")+d,engineType:g.engineType});this.Fa=b;this.m=c;this.a=f;this.Ea=c.split(\".\")[0];this.pg=A(this.pg,this);this.getCopyrights=\nthis.va;a.addEventListener(\"versionupdate\",this.pg)}u(cq,Ak);cq.prototype.MAX_STORE_TIME=2592E6;n=cq.prototype;n.s=function(){Ak.prototype.s.call(this);this.B.removeEventListener(\"versionupdate\",this.pg)};n.va=function(a,b){return Rp(this.B.va(),this.Ea,b,a)};n.pg=function(){var a=this.B;this.T=a.D().clone().F(this.Fa+\"/\"+a.Ac()+\"/\"+this.m).I(this.a);this.reload(!1)};n.hh=function(){return md()};n.ie=function(){return md()?ld():cq.l.ie.call(this)};function dq(a,b){b=void 0===b?{}:b;if(!a.vk)throw new Yc(a);dq.l.constructor.call(this);var c=eq(this,b);if(!c.baseUrl&&!c.platformBaseUrl)throw new D(a,0,'either \"baseUrl\" or \"platformBaseUrl\" must be specified');this.c=(c.baseUrl?c.baseUrl:c.platformBaseUrl).clone();a=c.baseUrl?b:c;a.host&&this.c.Kg(a.host);a.subDomain&&this.c.Na(a.subDomain);a.path&&this.c.Od(a.path);Xp(this.c);this.gf=c.headers||{}}u(dq,F);t(\"H.service.Service\",dq);function eq(a,b){a=a.a();return b?Np({},a,b):a}\ndq.prototype.a=function(){return{}};dq.prototype.D=function(){return this.c};dq.prototype.getUrl=dq.prototype.D;dq.prototype.J=function(a,b,c,d){d=new sf(void 0===d?\"application/json\":d,a.toString(),ge,{headers:this.gf});d.then(b,fq(this,a,c));return d};function fq(a,b,c){return function(d){return\"function\"!==typeof d.json?Promise.reject(c(gq(b,d))):d.json().then(function(e){return c(a.b(e))},function(){return c(gq(b,d))})}}dq.prototype.b=function(a){return Error(a.message)};\nfunction gq(a,b){return Error((b.statusText?\"[\"+b.statusText+\"] \":\"\")+a+\" request failed\")};function Y(a){a=Np({},this.b,a);var b=a.apikey||a.apiKey,c=a.baseUrl;if(c=b?c?0:\"baseUrl\":\"apikey\")throw new D(Y,0,'\"'+c+'\" must be specified');this.xl(a.baseUrl);this.a=b;this.c.I({apikey:b});this.f=a.headers||{};this.g=Va(a.servicesConfig||{})}t(\"H.service.Platform\",Y);Y.prototype.b={apikey:null,baseUrl:new W(\"https\",\"hereapi.com\")};Y.prototype.xl=function(a){this.c=Xp(a.clone());this.a=a=this.a;this.c.I({apikey:a})};Y.prototype.setBaseUrl=Y.prototype.xl;Y.prototype.fc=function(){return this.c};\nY.prototype.getBaseUrl=Y.prototype.fc;Y.prototype.Ya=function(a,b){try{return a.vk=!0,new a(Np({platformBaseUrl:this.fc(),headers:this.f},this.g[a.CONFIG_KEY]||{},b||{}))}finally{delete a.vk}};Y.prototype.createService=Y.prototype.Ya;function hq(a){hq.l.constructor.call(this,hq,a);a=eq(this,a);this.bc=a.shards;(this.Sa=a.ignoreTypes?null:a.type)&&this.D().Na(this.Sa);this.cc=a.version;this.Yc=new Op;this.Bi={};this.Tf=0;\"newest\"===this.cc&&this.sh()}u(hq,dq);t(\"H.service.MapTileService\",hq);hq.prototype.a=function(){return{subDomain:\"maps.ls\",path:\"maptile/2.1\",type:\"base\",version:\"newest\",shards:[\"1\",\"2\",\"3\",\"4\"]}};hq.CONFIG_KEY=\"maptile\";\nfunction iq(a,b){for(var c={},d=a[b+\"s\"][b],e=d.length;e--;)c[d[e].id]=d[e];a[b+\"s\"]=c}hq.prototype.Ih=function(){return this.bc};hq.prototype.jk=function(){return this.Sa};hq.prototype.getType=hq.prototype.jk;hq.prototype.Ac=function(){return this.cc};hq.prototype.getVersion=hq.prototype.Ac;hq.prototype.Yi=function(a){this.cc=a};hq.prototype.va=function(){this.Tf||(this.cc&&\"newest\"!==this.cc||\"traffic\"===this.Sa)&&this.Te();return this.Yc};hq.prototype.getCopyrights=hq.prototype.va;n=hq.prototype;\nn.fj=function(a){a=a.response;var b;iq(a,\"map\");iq(a,\"scheme\");iq(a,\"tiletype\");iq(a,\"format\");iq(a,\"resolution\");iq(a,\"language\");if(\"newest\"===this.cc&&\"traffic\"!==this.Sa)for(b in a.maps)a.maps[b].hash&&a.maps[b].newest&&(this.Yi(a.maps[b].hash),this.dispatchEvent(\"versionupdate\"));this.Oh=a;this.dispatchEvent(\"infoupdate\")};n.ej=function(a){Pp(this.Yc,a);this.dispatchEvent(\"copyrightupdate\")};\nn.sh=function(){var a=this;var b=this.D().clone().F(\"info\").I({output:\"json\"});this.bc&&b.Na(this.bc[0]);this.J(b,function(c){a.fj(c)},function(c){throw c;})};n.Te=function(){var a=this;var b=this.D().clone().F(\"copyright\").F(a.Ac()).I({output:\"json\"});this.bc&&b.Na(this.bc[0]);this.Tf=1;this.J(b,function(c){a.Tf=2;a.ej(c)},function(c){a.Tf=-1;throw c;})};n.Ah=function(){return this.Oh};hq.prototype.getInfo=hq.prototype.Ah;\nhq.prototype.Oe=function(a,b,c,d,e,f){var g=this.D().clone().F(a+\"/\"+this.Ac()+\"/\"+b+\"/\"+c+\"/\"+d).I(e?e:{}).toString();var h=0,k,l=g.length;if(0!==l)for(k=0;k<l;k++){var m=g.charCodeAt(k);h=(h<<5)-h+m;h|=0}g=h;h=this.Bi[g];h||(h=new cq(this,a,b,c,d,e,Np({headers:this.gf},f||{})),this.Bi[g]=h);return h};hq.prototype.createTileProvider=hq.prototype.Oe;hq.prototype.uc=function(a,b,c,d,e,f,g,h){a=this.Oe(a,b,c,d,e,h);return new tl(a,{opacity:f,dark:!!g})};hq.prototype.createTileLayer=hq.prototype.uc;\nY.prototype.Dh=function(a){return this.Ya(hq,a)};Y.prototype.getMapTileService=Y.prototype.Dh;function jq(a,b,c){var d=this;c=c||{};var e=+c.min,f=+c.max;c.tileSize=c.tileSize||512;c.min=e?Zd(e,1,17):1;c.min+=Jk(c.tileSize,1);c.max=f?Zd(f,1,17):17;jq.l.constructor.call(this,c);C(a,kq,jq,0);C(b,Yh,jq,1);this.j=a;b.b&&b.b(\"OMV\");this.ac(b,!0);this.o=function(){lq(d);d.reload(!1)};a.addEventListener(\"versionupdate\",this.o);lq(this);jq.prototype.T=function(){var g=/^v2\\/vectortiles\\/(.+)\\/mc$/.exec(a.D().c);return g?g[1]:B+\"\"}()}u(jq,R);t(\"H.service.omv.Provider\",jq);jq.prototype.Gd=ef;\njq.prototype.providesOMV=jq.prototype.Gd;function lq(a){var b=a.Bd(\"_#-;,:\",\"_#-;,:\",\"_#-;,:\");a.A=new RegExp(\"^\"+b.replace(/[.*+?^${}()|[\\]\\\\\\/]/g,\"\\\\$&\").replace(/_#-;,:/g,\"\\\\d+\")+\"$\")}jq.prototype.ec=function(a){return this.A.test(a)};jq.prototype.cacheFilter=jq.prototype.ec;jq.prototype.Bd=function(a,b,c){return mq(this.j,a,b,c).toString()};jq.prototype.getTileKey=jq.prototype.Bd;jq.prototype.Ob=function(){return this.fa};jq.prototype.getCache=jq.prototype.Ob;jq.prototype.MAX_STORE_TIME=2592E6;\njq.prototype.hh=function(){return md()};jq.prototype.ie=function(){return md()?ld():jq.l.ie.call(this)};jq.prototype.J=function(a,b,c,d,e){return this.j.lb(a,b,c,d,e)};jq.prototype.requestInternal=jq.prototype.J;jq.prototype.pc=function(a){a.b&&a.b(\"OMV\");this.ac(a)};jq.prototype.setStyle=jq.prototype.pc;jq.prototype.wa=function(){return jq.l.ub.apply(this)};jq.prototype.getStyle=jq.prototype.wa;\njq.prototype.ub=function(){var a=jq.l.ub.apply(this),b;this.L&&(a.getState()===Zh.READY?(b=a.yd())&&b.global&&(this.m&&(b.global.ux_language=this.m),this.c&&(b.global.ux_language_fallback=this.c),a=new bi(b,a.fc())):a.load());return a};function nq(a,b,c){var d=a.ub().getState()===Zh.READY,e=Ac(b),f=Ac(c);e&&(a.m=b);f&&(a.c=c);if(e||f)a.a=[],e=/^([a-zA-Z]{2})(-|$)/,(b=e.exec(b))&&a.a.push(b[1]),(b=e.exec(c))&&a.a.push(b[1]),a.L=!0,d&&a.fb()}jq.prototype.B=[\"en\"];\njq.prototype.jn=function(){return this.a||this.B};jq.prototype.getLanguages=jq.prototype.jn;jq.prototype.s=function(){jq.l.s.call(this);this.j.removeEventListener(\"versionupdate\",this.o)};jq.prototype.fa=new Lk(256);jq.prototype.va=function(a,b){return Rp(this.j.va(),this.T,b,a)};jq.prototype.getCopyrights=jq.prototype.va;function kq(a){kq.l.constructor.call(this,kq,a);a=eq(this,a).mapVersion;this.df=uc(a)?a:oq[this.D().toString()];uc(this.df)||pq(this)}u(kq,dq);t(\"H.service.omv.Service\",kq);kq.prototype.a=function(){return{subDomain:\"vector\",path:\"v2/vectortiles/base/mc\"}};kq.CONFIG_KEY=\"omv\";var oq={};Gc(oq);kq.prototype.qn=function(){return this.df};kq.prototype.getMapVersion=kq.prototype.qn;\nfunction pq(a){a.J(a.D().clone().F(\"../../info\"),function(b){b=b.mapVersion;var c=a.D().toString();a.df=b;b!==oq[c]&&(oq[c]=b,a.dispatchEvent(\"versionupdate\"))},function(){})}kq.prototype.td=function(a,b){return new tl(new jq(this,a,b),{max:22})};kq.prototype.createLayer=kq.prototype.td;kq.prototype.lb=function(a,b,c,d,e){return this.J(mq(this,a,b,c),function(f){return f.arrayBuffer().then(d,e)},e,\"arraybuffer\")};\nfunction mq(a,b,c,d){b=a.D().clone().F(d+\"/\"+b+\"/\"+c+\"/omv\");uc(a.df)&&b.I({mv:a.df});return b}kq.prototype.je=function(a){return bq().F(a)};kq.prototype.Fh=function(a,b){if(!Da(a))throw new D(this.Fh,0,'\"onResult\" must be a function');if(!Da(b))throw new D(this.Fh,1,'\"onError\" must be a function');return this.J(this.D().clone().Od(\"v2/vectortiles/pviews\"),a,b)};kq.prototype.getPoliticalViews=kq.prototype.Fh;Y.prototype.ek=function(a){return this.Ya(kq,a)};Y.prototype.getOMVService=Y.prototype.ek;\nkq.prototype.Te=function(){this.Yc=new Op;this.J(this.D().clone().F(\"../../copyrights\"),A(this.ej,this),id)};kq.prototype.ej=function(a){Pp(this.Yc,a);this.dispatchEvent(\"copyrightupdate\")};kq.prototype.va=function(){this.Yc||this.Te();return this.Yc};kq.prototype.getCopyrights=kq.prototype.va;Y.prototype.Uf=function(a,b,c,d,e,f){var g=this.Dh(),h=this.Dh({type:\"aerial\"}),k=this.ik(),l=this.ek(),m=ek.WEBGL,p={},q={crossOrigin:\"anonymous\"};if(Ea(a)){var r=a;\"crossOrigin\"in r&&(q.crossOrigin=r.crossOrigin);a=r.tileSize;b=r.ppi;c=r.lg;d=r.lg2;e=r.style;f=r.pois;r.engineType&&(m=r.engineType,q.engineType=m)}var v=a||512;if(0>[72,250,320,500].indexOf(+b)){if(b!==B)throw new D(this.Uf,1,b);}else p.ppi=+b;c&&(p.lg=c);d&&(p.lg2=d);e&&(p.style=e);f&&(p.pois=f);a=function(w,z,J,G,U){return w.uc(z,\nJ,v,G,p,1,U,q)};if(m===ek.HARP&&!H.map.render.harp)throw new D(this.Uf,0,\"HARP engine is not supported, module not found\");b=m===ek.WEBGL?new bi(l.je(\"omv/miami/normal.day.yaml\").toString()):new H.map.render.harp.Style(l.je(\"harp/oslo/normal.day.json\").toString());c=m===ek.WEBGL?new bi(l.je(\"omv/miami/truck.day.yaml\").toString()):new H.map.render.harp.Style(l.je(\"harp/oslo/normal.day.json\").toString());d={engineType:m};b=l.td(b,d);nq(b.ga(),p.lg,p.lg2);c=l.td(c,d);nq(c.ga(),p.lg,p.lg2);l=k.Fj(p.lg?\n{lg:p.lg,i18n:!0,engineType:m}:{engineType:m});return{vector:{normal:{map:b,truck:c,traffic:k.Ej(void 0,m),trafficincidents:l}},raster:{normal:{xbase:a(g,\"xbasetile\",\"normal.day\",\"png8\",!1),xbasenight:a(g,\"xbasetile\",\"normal.night\",\"png8\",!0),base:a(g,\"basetile\",\"normal.day\",\"png8\",!1),basenight:a(g,\"basetile\",\"normal.night\",\"png8\",!0),map:a(g,\"maptile\",\"normal.day\",\"png8\",!1),mapnight:a(g,\"maptile\",\"normal.night\",\"png8\",!0),trafficincidents:l,transit:a(g,\"maptile\",\"normal.day.transit\",\"png8\",!1),\nlabels:a(g,\"labeltile\",\"normal.day\",\"png\",!1)},satellite:{xbase:a(h,\"xbasetile\",\"hybrid.day\",\"jpg\",!0),base:a(h,\"basetile\",\"hybrid.day\",\"jpg\",!0),map:a(h,\"maptile\",\"hybrid.day\",\"jpg\",!0),labels:a(h,\"labeltile\",\"hybrid.day\",\"png\",!0)},terrain:{xbase:a(h,\"xbasetile\",\"terrain.day\",\"jpg\",!1),base:a(h,\"basetile\",\"terrain.day\",\"jpg\",!1),map:a(h,\"maptile\",\"terrain.day\",\"jpg\",!1),labels:a(h,\"labeltile\",\"terrain.day\",\"png\",!1)}}}};Y.prototype.createDefaultLayers=Y.prototype.Uf;function qq(){this.a={}}qq.prototype.Bb=function(a,b){var c=a+b,d;if(d=this.a[c])return d;a=rq.MARKER.replace(\"{{icon}}\",sq[a]||sq.OTHER);a=a.replace(\"{{color}}\",tq[b]||tq.BLOCKING);b={size:{w:26,h:33},anchor:{x:13,y:30},hitArea:new Ui(Vi.POLYGON,uq.MARKER)};return this.a[c]=d=new Rj(a,b)};\nvar rq={MARKER:'<svg width=\"26\" height=\"33\" enable-background=\"new 0 0 26 33\" viewBox=\"0 0 26 33\" xmlns=\"http://www.w3.org/2000/svg\"><path d=\"m26 33h-26v-33h26z\" fill=\"#8c8c8c\" opacity=\"0\"/><path d=\"m17 29.566c0 1.116-1.791 2.022-4 2.022s-4-.906-4-2.022c0-1.118 1.791-2.026 4-2.026s4 .908 4 2.026\" fill=\"#878787\" opacity=\".6\"/><path d=\"m1.795 17.971c-1.562-1.555-1.574-3.828-.028-5.655l8.343-10.021c.769-.895 1.795-1.384 2.894-1.384 1.117 0 2.197.521 2.889 1.394l8.338 10.014c1.588 1.854 1.578 4.022-.029 5.65l-11.202 11.202z\" fill=\"{{color}}\"/>{{icon}}</svg>'},sq=\n{CONGESTION:'<path style=\"fill:#FFFFFF;\" d=\"M12.966,1.177c0.965,0,1.894,0.442,2.496,1.204l8.378,10.258c1.362,1.592,1.482,3.477,0,4.979L12.994,28.464L2.143,17.618c-1.381-1.375-1.38-3.348,0-4.979l8.314-10.258C11.174,1.547,12.085,1.177,12.966,1.177 M12.967,0.177L12.967,0.177c-1.247,0-2.408,0.551-3.269,1.552l-8.332,10.28c-1.711,2.022-1.688,4.567,0.07,6.317l10.85,10.845l0.707,0.707l0.707-0.707l10.847-10.846c1.784-1.807,1.803-4.292,0.053-6.337L16.237,1.748C15.462,0.769,14.236,0.177,12.967,0.177L12.967,0.177z M16.645,10.405l-2.025-2.22c-0.48-0.51-1.15-0.8-1.84-0.8H9.53c-0.69,0-1.36,0.29-1.84,0.8l-1.94,2.22c-0.39,0.63-0.59,1.35-0.59,2.09v1.64c0,0.69,0.56,1.25,1.25,1.25h1.44l0.255-0.539c0.204-0.431,0.456-0.837,0.753-1.21l0.962-1.211l0.83-0.9c0.32-0.35,0.72-0.63,1.15-0.82H8.23c-0.28,0-0.55-0.07-0.79-0.22l-0.28-0.17l1.27-1.45c0.28-0.31,0.68-0.48,1.1-0.48h3.25c0.42,0,0.82,0.17,1.1,0.48l1.354,1.54H16.645z M18.31,12.205c-0.35-0.37-0.81-0.63-1.3-0.74c-0.18-0.04-0.36-0.06-0.54-0.06h-3.24c-0.7,0-1.37,0.29-1.84,0.8l-1.13,1.22l-0.82,1c-0.38,0.63-0.59,1.35-0.59,2.09v1.64c0,0.69,0.56,1.25,1.25,1.25h1.75v-1h5.99v1h1.75c0.69,0,1.25-0.56,1.25-1.25v-1.64c0-0.74-0.2-1.46-0.59-2.09L18.31,12.205z M12.1,17.105h-1c-0.138,0-0.25-0.112-0.25-0.25v-1c0-0.138,0.112-0.25,0.25-0.25h1c0.138,0,0.25,0.112,0.25,0.25v1C12.35,16.993,12.238,17.105,12.1,17.105z M18.59,17.105h-1c-0.138,0-0.25-0.112-0.25-0.25v-1c0-0.138,0.112-0.25,0.25-0.25h1c0.138,0,0.25,0.112,0.25,0.25v1C18.84,16.993,18.728,17.105,18.59,17.105z M18.56,14.505c-0.24,0.15-0.51,0.22-0.79,0.22h-5.85c-0.28,0-0.55-0.07-0.78-0.22l-0.29-0.17l1.27-1.45c0.15-0.16,0.33-0.28,0.53-0.37c0.18-0.07,0.38-0.11,0.58-0.11h3.24c0.24,0,0.48,0.06,0.68,0.16c0.16,0.08,0.3,0.19,0.42,0.32l1.27,1.45L18.56,14.505z M8.42,13.03h-1c-0.138,0-0.25-0.112-0.25-0.25v-1c0-0.138,0.112-0.25,0.25-0.25h1c0.138,0,0.25,0.112,0.25,0.25v1C8.67,12.918,8.559,13.03,8.42,13.03z\"/>',\nROADWORKS:'<path d=\"m13.004 1.411c.964 0 1.894.441 2.496 1.204l8.346 10.023c1.363 1.592 1.482 3.477 0 4.979l-10.846 10.847-10.852-10.846c-1.381-1.375-1.379-3.348 0-4.979l8.346-10.023c.717-.835 1.628-1.205 2.51-1.205m0-1c-1.248 0-2.408.551-3.268 1.552l-8.356 10.035c-1.718 2.033-1.695 4.578.064 6.328l10.85 10.845.706.707.707-.707 10.846-10.846c1.784-1.808 1.803-4.293.053-6.337l-8.337-10.012c-.769-.973-1.996-1.565-3.265-1.565zm-.575 15.264c.018-.332-.13-.651-.394-.851l-2.945-2.235-.21.36c-.22.39-.41.78-.58 1.19l-.677 2.129-1.364 3.051h1.314l2.109-4.672 1.317 1.212.138 3.46h1.092zm6.16-1.327c-.401-.54-1.209-.539-1.609.001l-1.17 1.58-2.29-1.74-.139-4.054c-.011-.276-.134-.535-.342-.716l-.7-.61c-.185-.161-.422-.25-.667-.25h-1.885c-.335 0-.648.168-.833.447l-1.144 1.723 7.58 5.76-1.86 2.51c-.098.132-.004.32.161.32h6.648l1.142-1.077zm-8.79-2.989-.876-.665.841-1.018.965.043zm1.63 1.24.969-1.781.118 2.61zm2.76-5.79c-.64 0-1.16.52-1.16 1.16 0 .65.52 1.17 1.16 1.17s1.16-.52 1.16-1.17c0-.64-.52-1.16-1.16-1.16z\" fill=\"#fff\"/>',\nACCIDENT:'<path style=\"fill:#FFFFFF;\" d=\"M12.998,1.091c0.964,0,1.894,0.442,2.496,1.204l8.346,10.344c1.363,1.592,1.482,3.477,0,4.979L12.994,28.465L2.143,17.618c-1.381-1.375-1.379-3.348,0-4.979l8.346-10.344C11.205,1.462,12.115,1.091,12.998,1.091 M12.998,0.091L12.998,0.091c-1.248,0-2.408,0.551-3.269,1.552L1.364,12.011c-1.708,2.021-1.685,4.566,0.073,6.316l10.85,10.845l0.707,0.707l0.707-0.707l10.846-10.846c1.784-1.808,1.803-4.293,0.053-6.337l-8.327-10.32C15.494,0.684,14.268,0.091,12.998,0.091L12.998,0.091z M7.83,18.982l-3.309-1.855l0.945,1.855H7.83z M16.111,19h3.942l1.596-2L16.111,19z M10.512,20.064l1.021-1.021l1.632,0.076c0.329,0.018,0.651-0.022,0.963-0.123c0.626-0.206,1.122-0.76,1.288-1.44l0.264-1.089l2.066-0.93c0.373-0.17,0.673-0.42,0.861-0.731c0.275-0.449,0.405-0.97,0.369-1.498L18.9,11.676l1.021-1.021l-0.724-0.724l-0.427,0.427l-0.121-0.364c-0.201-0.603-0.54-1.151-0.989-1.6l-1.159-1.159c-0.5-0.5-1.31-0.5-1.809,0l-1.267,1.267l0.724,0.724l-5.066,5.066l-0.724-0.724l-1.267,1.267c-0.5,0.5-0.5,1.31,0,1.809l1.159,1.159c0.449,0.449,0.997,0.788,1.6,0.989l0.364,0.121l-0.427,0.427L10.512,20.064z M14.901,10.349l0.732-0.732c0.098-0.098,0.256-0.098,0.354,0l0.732,0.732c0.098,0.098,0.098,0.256,0,0.354l-0.732,0.732c-0.098,0.098-0.256,0.098-0.354,0l-0.732-0.732C14.803,10.604,14.803,10.446,14.901,10.349z M9.472,15.777l0.732-0.732c0.098-0.098,0.256-0.098,0.354,0l0.732,0.732c0.098,0.098,0.098,0.256,0,0.354l-0.732,0.732c-0.098,0.098-0.256,0.098-0.354,0L9.472,16.13C9.375,16.033,9.375,15.874,9.472,15.777z M11.391,17.615c0.069-0.271,0.206-0.518,0.405-0.717l4.961-4.961c0.195-0.195,0.445-0.337,0.717-0.405l0.344-0.083l0.137,1.925c0.022,0.318-0.058,0.63-0.221,0.901c-0.101,0.166-0.279,0.271-0.409,0.329L14.8,15.74l-0.38,1.574c-0.083,0.344-0.318,0.615-0.612,0.713c-0.188,0.058-0.38,0.083-0.579,0.072l-1.925-0.138L11.391,17.615z\"/>',\nOTHER:'<path style=\"fill:#FFFFFF;\" d=\"M13.004,1.411c0.964,0,1.894,0.441,2.496,1.204l8.346,10.023c1.363,1.592,1.482,3.477,0,4.979L13,28.465L2.148,17.618c-1.381-1.375-1.379-3.348,0-4.979l8.346-10.023C11.211,1.781,12.122,1.411,13.004,1.411 M13.004,0.411L13.004,0.411c-1.248,0-2.408,0.551-3.268,1.552L1.38,11.998c-1.718,2.033-1.694,4.579,0.064,6.328l10.85,10.845L13,29.878l0.707-0.707l10.846-10.846c1.784-1.808,1.803-4.293,0.053-6.337L16.269,1.976C15.5,1.003,14.273,0.411,13.004,0.411L13.004,0.411z M14.716,20.139c0,0.947-0.758,1.724-1.724,1.724c-0.947,0-1.704-0.777-1.704-1.724c0-0.928,0.757-1.704,1.704-1.704C13.958,18.435,14.716,19.211,14.716,20.139z M14.204,16.33H11.78l-0.537-8.533h3.5L14.204,16.33z\"/>'},\ntq={BLOCKING:\"#323232\",VERYHIGH:\"#d5232f\",HIGH:\"#ffa100\"},uq={MARKER:[24.1,17.8,14.2,28.42,16.8,29.4,12.8,31.4,8.79,29.4,11.23,28.42,1.7,17.8,1.7,12.1,10,1.9,12.9,.498,15.8,1.9,24.1,12.1,24.1,17.8]};function vq(a,b,c){c=c?c:{};c.criticality||(c.criticality=\"major,critical\");C(a,wq,vq,0);In.call(this,{max:20,min:8,requestData:A(this.T,this),engineType:c.engineType});this.m=new qq;this.A=a;this.a=c;this.reload=A(this.reload,this);this.o=setInterval(this.reload,b||18E4)}u(vq,In);t(\"H.service.traffic.incidents.Provider\",vq);vq.prototype.c={minor:\"HIGH\",\"low impact\":\"HIGH\",major:\"VERYHIGH\",critical:\"BLOCKING\"};\nvq.prototype.T=function(a,b,c,d,e){var f=this,g=this.c,h=this.m;return this.A.requestIncidentsByTile(a,b,c,function(k){var l=[];k=k.TRAFFIC_ITEMS;var m;if(k)for(k=k.TRAFFIC_ITEM,m=k.length;m--;){var p=k[m];var q=p.TRAFFIC_ITEM_TYPE_DESC;switch(q){case \"ACCIDENT\":case \"CONGESTION\":var r=q;break;case \"CONSTRUCTION\":r=\"ROADWORKS\";break;default:r=\"OTHER\"}r=h.Bb(r,g[p.CRITICALITY.DESCRIPTION]);q=p.LOCATION.GEOLOC.ORIGIN;q=new Gn({lat:q.LATITUDE,lng:q.LONGITUDE},{provider:f,icon:r});q.setData(p);l.push(q)}d(l)},\ne,this.a)};vq.prototype.C=function(){In.prototype.C.call(this);clearInterval(this.o)};var xq=\"A21 A22 F01 F02 F08 F04 F05 F07 F03 F06 A2F F13 A25 A2C F12 D1B F1B A27 E12 A3A A24 A3D A3F F1F F25 F2C E32 A33 F29 D26 D36 F26 D0F F0F F2B E0C D3A A45 D23 D11 F2E F19 F14 F39 A4A A4B A5C D38 F2A F1A D0A F1C A48 D25 D1D F32 A46 A3E D24 E1C E32 A5F D2E D22 D0A\".split(\" \");function yq(a,b){var c={};this.a=a;Xa(c,b||c);ik.call(this,c);this.Bg={};a=this.Pb(Yg.SPATIAL);a.update(a.a+1,Vg.ADD)}u(yq,ik);t(\"H.service.remote.ObjectProvider\",yq);yq.prototype.C=function(){ik.prototype.C.call(this)};yq.prototype.Jc=function(){return gf};yq.prototype.requestMarkers=yq.prototype.Jc;yq.prototype.Ic=function(){return gf};yq.prototype.requestDomMarkers=yq.prototype.Ic;yq.prototype.Jd=function(){return gf};yq.prototype.requestOverlays=yq.prototype.Jd;yq.prototype.Wb=ef;\nyq.prototype.providesMarkers=yq.prototype.Wb;yq.prototype.Vb=ef;yq.prototype.providesDomMarkers=yq.prototype.Vb;yq.prototype.Hc=ef;yq.prototype.providesSpatials=yq.prototype.Hc;yq.prototype.Cg=function(){return gf};yq.prototype.requestSpatials=yq.prototype.Cg;function zq(a){return a.Bc(!0)}yq.prototype.Dg=function(a,b){a=Aq(this,a,Bq);b&&(a=a.filter(zq));return a};yq.prototype.requestSpatialsByTile=yq.prototype.Dg;\nfunction Aq(a,b,c){var d=b.j&&b.j[c],e;!d&&(e=b.m)&&(delete b.m,(b.j=a=a.a.parse(a,b,e))&&(d=a[c]));return d||gf}yq.prototype.da=function(a){var b=a.ib();if(this.Bg[b])throw new Yc(this.da,\"Remote object \"+b+\" already added\");return this.Bg[b]=a};yq.prototype.Ja=function(a){delete this.Bg[a.ib()]};var Bq=\"spatials\";function Cq(a,b,c,d){Cq.l.constructor.call(this,{min:Dq,max:Eq,engineType:d});C(a,wq,Cq,0);this.m=a;this.a=c||Fq;this.a.responseattributes=\"sh,fc\";this.c=setInterval(A(this.reload,this),b||18E4);this.f===ek.WEBGL?this.ac(new bi(a.je(\"traffic/flow.yaml\").toString()),!0):this.ac(new H.map.render.harp.Style({styles:[{when:[\"==\",[\"geometry-type\"],\"LineString\"],technique:\"solid-line\",renderOrder:10002,attr:{color:[\"case\",[\">=\",[\"get\",\"JF\"],10],\"black\",[\">=\",[\"get\",\"JF\"],8],\"red\",[\">=\",[\"get\",\"JF\"],4],\n\"yellow\",\"green\"],lineWidth:3,metricUnit:\"Pixel\"}}]}))}u(Cq,R);t(\"H.service.traffic.flow.Provider\",Cq);Cq.prototype.Di=ef;Cq.prototype.providesGeoJSON=Cq.prototype.Di;Cq.prototype.wa=function(){return this.ub()};Cq.prototype.getStyle=Cq.prototype.wa;Cq.prototype.pc=function(a){a.b&&a.b(\"GeoJSONTileSource\");this.ac(a)};Cq.prototype.setStyle=Cq.prototype.pc;var Fq={locationreferences:\"tmc,shp\"};Cq.prototype.s=function(){Cq.l.s.call(this);clearInterval(this.c)};\nCq.prototype.J=function(a,b,c,d,e){return this.m.requestFlowByTile(a,b,c,function(f){f.type&&-1!==f.type.indexOf(\"Error\")?e(f.Details):d(f)},e,this.a)};Cq.prototype.requestInternal=Cq.prototype.J;\nCq.prototype.ud=function(a,b,c,d,e){var f,g,h,k,l={type:\"FeatureCollection\",features:[]},m;var p=d.RWS.length;for(f=0;f<p;f++){var q=d.RWS[f];var r=q.RW;var v=r.length;var w=-1!==xq.indexOf(q.EXTENDED_COUNTRY_CODE+q.EBU_COUNTRY_CODE);for(q=0;q<v;q++){var z=r[q].FIS;var J=z.length;for(z=0;z<J;z++){var G=r[q].FIS[z].FI;var U=G.length;for(g=0;g<U;g++){var X=G[g];var xa=[];var ia=X.CF[0];var hc=!!ia.SSS;var wb={type:\"Feature\",properties:ia,geometry:{type:\"MultiLineString\",coordinates:xa}};wb.properties.LHT=\nw;X.SHP.length&&(wb.properties.FC=X.SHP[0].FC);hc&&(m=[]);for(ia=0;ia<X.SHP.length;ia++){var nd=X.SHP[ia].value;var zi=nd.length;for(h=0;h<zi;h++){var Pe=hc?m:void 0,Yb=new io(nd[h].trim()),Wf=[],cd={};for(Yb.Be();-1!==(k=Yb.Tb());)k===Gq?(cd.lat=+String.fromCharCode.apply(Cq,Yb.Wd()),Yb.next(),Yb.Be()):k===Hq?(cd.lng=+String.fromCharCode.apply(Cq,Yb.Wd()),Wf.push([cd.lng,cd.lat]),Pe&&Pe.push($f(cd)),cd=[],Yb.next(),Yb.Be()):Yb.next();cd.lng=+String.fromCharCode.apply(Cq,Yb.Wd());Wf.push([cd.lng,\ncd.lat]);Pe&&Pe.push($f(cd));k=Wf;xa.push(k)}}l.features.push(wb)}}}}return Cq.l.ud.call(this,a,b,c,l,e)};Cq.prototype.createTileInternal=Cq.prototype.ud;var Eq=21,Dq=10,Hq=32,Gq=44;function Iq(a){function b(m){d.contains(e)&&d.removeChild(e);l&&clearTimeout(l);delete Iq.a[f];m&&a.Qj&&a.Qj.call(k,m)}if(!a.url||!a.gh)throw Error('Parameter \"options\" must specify at least a URL and a callback.');if(\"function\"!==typeof a.gh)throw Error(\"Parameters options.callback must be a function\");var c=a.Cp||document;var d=c.getElementsByTagName(\"head\")[0];var e=c.createElement(\"script\");c=a.url instanceof W?a.url:Sp(a.url,a.Bp);var f=Iq.b++;var g=a.mm||\"callback\";var h=a.gh;var k={};var l=\nnull;k.id=f;k.cancel=function(){b(\"cancelled\")};0!==a.timeout&&(l=x.setTimeout(function(){b(\"timeout\")},a.timeout||3E4));Iq.a[f]=function(m){b();h.call(k,m)};e.type=\"text/javascript\";e.src=c.toString()+(c.pk()?\"&\":\"?\")+g+\"=\"+(a.Dp?\"H.service.jsonp.handleResponse(\"+f+\")\":encodeURI(\"H.service.jsonp.handleResponse(\"+f+\")\"));d.appendChild(e);return k}t(\"H.service.jsonp\",Iq);Iq.ao=function(a){return(a=Iq.a[a])?a:function(){}};Iq.handleResponse=Iq.ao;Iq.b=0;Iq.a={};function wq(a){wq.l.constructor.call(this,wq,a);this.nm=eq(this,a).callbackKey}u(wq,dq);t(\"H.service.traffic.Service\",wq);wq.prototype.a=function(){return{subDomain:\"traffic.ls\",path:\"traffic/6.1\",callbackKey:\"jsoncallback\"}};wq.CONFIG_KEY=\"traffic\";wq.prototype.Ej=function(a,b){return new tl(new Cq(this,void 0,a,b),{max:22})};wq.prototype.createFlowLayer=wq.prototype.Ej;wq.prototype.Fj=function(a){return new Jn(new vq(this,void 0,a))};wq.prototype.createIncidentsLayer=wq.prototype.Fj;\nfunction Jq(a,b,c,d){return Iq({url:b,gh:c,Qj:function(e){d(Error(\"[\"+e+\"] \"+b+\" request failed\"))},mm:a.nm})}wq.prototype.Yo=function(a,b,c){a=this.D().clone().F(\"incidents.json\").I(a);return Jq(this,a,b,c)};wq.prototype.requestIncidents=wq.prototype.Yo;wq.prototype.Xo=function(a,b,c,d,e,f){a=this.D().clone().F([\"flow/json\",c,a,b].join(\"/\")).I(f||{});return Jq(this,a,d,e)};wq.prototype.requestFlowByTile=wq.prototype.Xo;\nwq.prototype.Zo=function(a,b,c,d,e,f){a=this.D().clone().F([\"incidents/json\",c,a,b].join(\"/\")).I(f||{});return Jq(this,a,d,e)};wq.prototype.requestIncidentsByTile=wq.prototype.Zo;wq.prototype.je=function(a){return bq().F(a)};Y.prototype.ik=function(a){return this.Ya(wq,a)};Y.prototype.getTrafficService=Y.prototype.ik;function Kq(a){Kq.l.constructor.call(this,Kq,a);this.rl=eq(this,a).reverseSubDomain}u(Kq,dq);t(\"H.service.GeocodingService\",Kq);Kq.prototype.a=function(){return{subDomain:\"geocoder.ls\",reverseSubDomain:\"reverse\",path:\"6.2\"}};Kq.CONFIG_KEY=\"geocoding\";Kq.prototype.b=function(a){return Error(a.Details||a.message||a.error)};Kq.prototype.uh=function(a,b,c){a=this.D().clone().F(\"geocode.json\").I(a);return this.J(a,b,c)};Kq.prototype.geocode=Kq.prototype.uh;\nKq.prototype.Hi=function(a,b,c){a=this.D().clone().F(\"reversegeocode.json\").I(a);this.rl&&a.Na(this.rl);return this.J(a,b,c)};Kq.prototype.reverseGeocode=Kq.prototype.Hi;Kq.prototype.search=function(a,b,c){a=this.D().clone().F(\"search.json\").I(a);return this.J(a,b,c)};Kq.prototype.search=Kq.prototype.search;Y.prototype.$m=function(a){return this.Ya(Kq,a)};Y.prototype.getGeocodingService=Y.prototype.$m;function Lq(a){Lq.l.constructor.call(this,Lq,a)}u(Lq,dq);t(\"H.service.PlacesService\",Lq);Lq.prototype.a=function(){return{subDomain:\"places.ls\",path:\"places/v1\"}};Lq.CONFIG_KEY=\"places\";Lq.EntryPoint={SEARCH:\"discover/search\",SUGGEST:\"suggest\",EXPLORE:\"discover/explore\",AROUND:\"discover/around\",HERE:\"discover/here\",CATEGORIES:\"categories/places\"};Lq.prototype.request=function(a,b,c,d){return this.S(a,b,c,d)};\nLq.prototype.S=function(a,b,c,d){a=this.D().clone().F(a).I(b||{});return this.J(a,c,d)};Lq.prototype.search=function(a,b,c){return this.S(\"discover/search\",a,b,c)};Lq.prototype.search=Lq.prototype.search;Lq.prototype.jp=function(a,b,c){return this.S(\"suggest\",a,b,c)};Lq.prototype.suggest=Lq.prototype.jp;Lq.prototype.xm=function(a,b,c){return this.S(\"discover/explore\",a,b,c)};Lq.prototype.explore=Lq.prototype.xm;Lq.prototype.im=function(a,b,c){return this.S(\"discover/around\",a,b,c)};\nLq.prototype.around=Lq.prototype.im;Lq.prototype.co=function(a,b,c){return this.S(\"discover/here\",a,b,c)};Lq.prototype.here=Lq.prototype.co;Lq.prototype.om=function(a,b,c){return this.S(\"categories/places\",a,b,c)};Lq.prototype.categories=Lq.prototype.om;Lq.prototype.ym=function(a,b,c,d){a=Sp(a).I(this.D().getQuery()).I(d||{});return this.J(a,b,c)};Lq.prototype.follow=Lq.prototype.ym;Y.prototype.yn=function(a){return this.Ya(Lq,a)};Y.prototype.getPlacesService=Y.prototype.yn;function Mq(a){Mq.l.constructor.call(this,Mq,a);this.f=a.getToken}u(Mq,dq);t(\"H.service.iml.Service\",Mq);Mq.prototype.a=function(){return{host:\"interactive.data.api.platform.here.com\",path:\"interactive/v1/catalogs\"}};\nMq.prototype.b=function(a){function b(){for(var d=ea(c),e=d.next();!e.done;e=d.next()){e=e.value;var f=e.format;if(e.keys.every(function(g){return a[g]}))return f()}return JSON.stringify(a)}var c=[{keys:[\"code\",\"title\",\"cause\",\"action\"],format:function(){return a.code+\": \"+a.title+\"; cause: \"+a.cause+\"; action: \"+a.action}},{keys:[\"error\",\"error_description\"],format:function(){return a.error+\": \"+a.error_description}},{keys:[\"error\",\"errorMessage\"],format:function(){return a.error+\": \"+a.errorMessage}}];\nreturn Error(Ea(a)?b():a)};Mq.prototype.he=function(a,b,c,d,e){var f=this.he;Nq(f,0,a,b);Oq(f,2,c,d);a=this.D().clone().F(a+\"/layers/\"+b+\"/statistics\").I(e||{});return this.S(a,\"GET\",c,d)};Mq.prototype.getStatistics=Mq.prototype.he;Mq.prototype.bg=function(a,b,c,d,e,f,g,h,k){var l=k?\"\":\".mvtf\";a=this.D().clone().F(d+\"/layers/\"+e+\"/tile/web/\"+c+\"_\"+a+\"_\"+b+l).I(Object.assign({clip:!0},h));return this.S(a,\"GET\",k?f:function(m){return m.arrayBuffer().then(f)},g,void 0,k?\"application/json\":\"arraybuffer\")};\nMq.prototype.getFeaturesByTile=Mq.prototype.bg;Mq.prototype.Xj=function(a,b,c,d,e,f){var g=this.Xj;Pq(g,a);Nq(g,1,b,c);Oq(g,3,d,e);a=Qq(this,a,b,c,f);return this.S(a,\"GET\",d,e)};Mq.prototype.getFeatureById=Mq.prototype.Xj;Mq.prototype.dd=function(a,b,c,d,e,f){var g=this.dd;Rq(g,a);Nq(g,1,b,c);Oq(g,3,d,e);a=Sq(this,a,b,c,f);return this.S(a,\"GET\",d,e)};Mq.prototype.getFeaturesById=Mq.prototype.dd;\nMq.prototype.ae=function(a,b,c,d,e){var f=this.ae;if(!Ea(a)||!(a.bbox||a.north&&a.east&&a.south&&a.west))throw new D(f,0,'must be an object with either \"bbox\" or a full set of \"north\", \"east\", \"south\" and \"west\"');Nq(f,1,b,c);Oq(f,3,d,e);a=this.D().clone().F(b+\"/layers/\"+c+\"/bbox\").I(a);return this.S(a,\"GET\",d,e)};Mq.prototype.getFeaturesByBoundingBox=Mq.prototype.ae;\nMq.prototype.Zj=function(a,b,c,d,e){var f=this.Zj;if(!(Ea(a)&&a.radius&&(a.lat&&(a.lng||a.lon)||a.refCatalogHrn&&a.refLayerId&&a.refFeatureId)))throw new D(f,0,'must be an object with \"radius\" and a combination of either \"lat\"+\"lng\" or \"refCatalogHrn\"+\"refLayerId\"+\"refFeatureId\"');Nq(f,1,b,c);Oq(f,3,d,e);a=this.D().clone().F(b+\"/layers/\"+c+\"/spatial\").I(a);return this.S(a,\"GET\",d,e)};Mq.prototype.getFeaturesByPointAndRadius=Mq.prototype.Zj;\nMq.prototype.Yj=function(a,b,c,d,e,f){var g=this.Yj;if(!Ea(a)||!a.radius)throw new D(g,0,'must be an object with \"radius\"');Tq(g,1,b);Nq(g,2,c,d);Oq(g,4,e,f);a=this.D().clone().F(c+\"/layers/\"+d+\"/spatial\").I(a);return this.S(a,\"POST\",e,f,b)};Mq.prototype.getFeaturesByGeometryAndRadius=Mq.prototype.Yj;Mq.prototype.sl=function(a,b,c,d,e){var f=this.sl;Nq(f,0,a,b);Oq(f,2,c,d);a=this.D().clone().F(a+\"/layers/\"+b+\"/search\").I(e||{});return this.S(a,\"GET\",c,d)};Mq.prototype.searchFeatures=Mq.prototype.sl;\nMq.prototype.zk=function(a,b,c,d,e){var f=this.zk;Nq(f,0,a,b);Oq(f,2,c,d);a=this.D().clone().F(a+\"/layers/\"+b+\"/iterate\").I(e||{});return this.S(a,\"GET\",c,d)};Mq.prototype.iterateFeatures=Mq.prototype.zk;Mq.prototype.md=function(a,b,c,d,e,f){var g=this.md;Tq(g,0,a);Nq(g,1,b,c);Oq(g,3,d,e);b=Uq(this,b,c,f);return this.S(b,\"PUT\",d,e,a)};Mq.prototype.putFeatures=Mq.prototype.md;\nMq.prototype.kd=function(a,b,c,d,e,f){var g=this.kd;Tq(g,0,a);Nq(g,1,b,c);Oq(g,3,d,e);b=Uq(this,b,c,f);return this.S(b,\"POST\",d,e,a)};Mq.prototype.postFeatures=Mq.prototype.kd;Mq.prototype.vd=function(a,b,c,d,e){var f=this.vd;Rq(f,a);Nq(f,1,b,c);Oq(f,3,d,e);a=Sq(this,a,b,c);return this.S(a,\"DELETE\",d,e)};Mq.prototype.deleteFeatures=Mq.prototype.vd;Mq.prototype.jl=function(a,b,c,d,e,f,g){var h=this.jl;Pq(h,a);Tq(h,1,b);Nq(h,2,c,d);Oq(h,4,e,f);a=Qq(this,a,c,d,g);return this.S(a,\"PUT\",e,f,b)};\nMq.prototype.putFeature=Mq.prototype.jl;Mq.prototype.bl=function(a,b,c,d,e,f,g){var h=this.bl;Pq(h,a);Tq(h,1,b);Nq(h,2,c,d);Oq(h,4,e,f);a=Qq(this,a,c,d,g);return this.S(a,\"PATCH\",e,f,b)};Mq.prototype.patchFeature=Mq.prototype.bl;Mq.prototype.Jj=function(a,b,c,d,e){var f=this.Jj;Pq(f,a);Nq(f,1,b,c);Oq(f,3,d,e);a=Qq(this,a,b,c);return this.S(a,\"DELETE\",d,e,void 0,\"text/plain\")};Mq.prototype.deleteFeature=Mq.prototype.Jj;\nfunction Uq(a,b,c,d){return a.D().clone().F(b+\"/layers/\"+c+\"/features\").I(d||{})}function Sq(a,b,c,d,e){b=Object.assign({},e,{id:new Wp(b)});return Uq(a,c,d,b)}function Qq(a,b,c,d,e){return a.D().clone().F(c+\"/layers/\"+d+\"/features/\"+b).I(e||{})}\nMq.prototype.S=function(a,b,c,d,e,f){f=void 0===f?\"application/json\":f;b={method:b,headers:Object.assign({},e?{\"Content-Type\":\"application/geo+json\"}:void 0,\"function\"===typeof this.f?{Authorization:\"Bearer \"+this.f()}:void 0,this.gf)};e&&(b.data=JSON.stringify(e));e=new sf(f,a.toString(),ge,b);e.then(c,fq(this,a,d));return e};Mq.CONFIG_KEY=\"iml\";function Nq(a,b,c,d){xc(c,\"String\",a,b,\"must be a string\");xc(d,\"String\",a,b+1,\"must be a string\")}\nfunction Pq(a,b){xc(b,\"String\",a,0,\"must be a string\")}function Rq(a,b){if(!Array.isArray(b)||0===b.length||b.some(function(c){return\"string\"!==typeof c}))throw new D(a,0,\"must be a non-empty array of strings\");}function Tq(a,b,c){if(!Ea(c))throw new D(a,b,\"must be a GeoJSON object\");}function Oq(a,b,c,d){if(!Da(c))throw new D(a,b,\"must be a function\");if(!Da(d))throw new D(a,b+1,\"must be a function\");}Y.prototype.en=function(a){return this.Ya(Mq,a)};Y.prototype.getIMLService=Y.prototype.en;function Vq(a,b,c,d){Vq.l.constructor.call(this,d?{min:d.min,max:d.max,engineType:d.engineType}:void 0);C(a,Mq,Vq,0);if(!Ac(b))throw new D(Vq,1,'\"catalogHrn\" must be a string');if(!Ac(c))throw new D(Vq,2,'\"layerId\" must be a string');this.o=a;this.a=b;this.c=c;this.m=Ea(d)&&Ea(d.parameters)?d.parameters:{};this.ac(this.f===ek.WEBGL?new bi({sources:{iml:{type:\"MVT\"}},layers:{iml:{data:{source:\"iml\",layer:this.a+\":\"+this.c},points:{filter:{$geometry:\"point\"},draw:{points:{collide:!1,order:200,color:\"#92CF48\",\nsize:[[10,\"8px\"],[14,\"12px\"],[18,\"16px\"]]}}},polygons:{filter:{$geometry:\"polygon\"},draw:{polygons:{order:201,color:\"#E39E3C\"},lines:{order:202,color:\"#755DA5\",width:\"1px\"}}},lines:{filter:{$geometry:\"line\"},draw:{lines:{order:203,color:\"#0258AE\",width:\"2px\",join:\"round\",cap:\"round\"}}}}}}):new H.map.render.harp.Style({styles:[{layer:this.a+\":\"+this.c,when:[\"==\",[\"geometry-type\"],\"Point\"],technique:\"circles\",renderOrder:200,color:\"#92CF48\",size:[\"interpolate\",[\"linear\"],[\"zoom\"],10,8,14,12,18,16]},\n{layer:this.a+\":\"+this.c,when:[\"==\",[\"geometry-type\"],\"Polygon\"],technique:\"fill\",color:\"#E39E3C\",renderOrder:201},{layer:this.a+\":\"+this.c,when:[\"==\",[\"geometry-type\"],\"Polygon\"],technique:\"solid-line\",color:\"#755DA5\",lineWidth:\"1px\",renderOrder:202},{layer:this.a+\":\"+this.c,when:[\"==\",[\"geometry-type\"],\"LineString\"],technique:\"solid-line\",color:\"#0258AE\",lineWidth:\"2px\",renderOrder:203}]}))}u(Vq,R);t(\"H.service.iml.Provider\",Vq);\nVq.prototype.J=function(a,b,c,d,e){return this.o.bg(a,b,c,this.a,this.c,d,e,this.m)};Vq.prototype.requestInternal=Vq.prototype.J;Vq.prototype.Gd=ef;Vq.prototype.providesOMV=Vq.prototype.Gd;Vq.prototype.wa=function(){return this.ub()};Vq.prototype.getStyle=Vq.prototype.wa;Vq.prototype.pc=function(a){C(a,bi)&&a.b(\"MVT\");this.ac(a)};Vq.prototype.setStyle=Vq.prototype.pc;function Wq(a){Wq.l.constructor.call(this,Wq,a)}u(Wq,dq);t(\"H.service.publicTransit.Service\",Wq);Wq.prototype.a=function(){return{subDomain:\"transit.router\",path:\"v8\"}};Wq.CONFIG_KEY=\"publicTransit\";Wq.prototype.In=function(a,b,c){a=this.D().clone().F(\"routes\").I(a);return this.J(a,b,c)};Wq.prototype.getRoutes=Wq.prototype.In;Wq.prototype.Sm=function(a,b,c){a=this.D().clone().F(\"departures\").I(a);return this.J(a,b,c)};Wq.prototype.getDepartures=Wq.prototype.Sm;\nWq.prototype.Mn=function(a,b,c){a=this.D().clone().F(\"stations\").I(a);return this.J(a,b,c)};Wq.prototype.getStations=Wq.prototype.Mn;Wq.prototype.b=function(a){return Error(JSON.stringify(a))};Y.prototype.En=function(a){return this.Ya(Wq,a)};Y.prototype.getPublicTransitService=Y.prototype.En;function Xq(a){Xq.l.constructor.call(this,Xq,a)}u(Xq,dq);t(\"H.service.RoutingService\",Xq);Xq.prototype.a=function(){return{subDomain:\"route.ls\",path:\"routing/7.2\"}};Xq.prototype.b=function(a){return Error(a.details)};Xq.CONFIG_KEY=\"routing\";Xq.prototype.Sd=function(a,b,c){a=this.D().clone().F(\"calculateroute.json\").I(a);return this.J(a,b,c)};Xq.prototype.calculateRoute=Xq.prototype.Sd;\nXq.prototype.fh=function(a,b,c){a=this.D().clone().Na(\"isoline\").F(\"calculateisoline.json\").I(a);return this.J(a,b,c)};Xq.prototype.calculateIsoline=Xq.prototype.fh;function Yq(a){Yq.l.constructor.call(this,Yq,a)}u(Yq,dq);t(\"H.service.RoutingService8\",Yq);Yq.CONFIG_KEY=\"routing_v8\";Yq.prototype.a=function(){return{subDomain:\"router\",path:\"v8/routes\"}};Yq.prototype.b=function(a){return Error(a.error)};Yq.prototype.Sd=function(a,b,c){a=this.D().clone().I(a);return this.J(a,b,c)};Yq.prototype.calculateRoute=Yq.prototype.Sd;Yq.prototype.fh=function(a,b,c){a=this.D().clone().Na(\"isoline\").Od(\"v8/isolines\").I(a);return this.J(a,b,c)};\nYq.prototype.calculateIsoline=Yq.prototype.fh;Y.prototype.gk=function(a,b){b=+b||7;if(7===b)b=Xq;else if(8===b)b=Yq;else throw new D(this.gk,1,\"allowed values are 7 and 8\");return this.Ya(b,a)};Y.prototype.getRoutingService=Y.prototype.gk;function Zq(){}t(\"H.service.extension.dataView.ITable\",Zq);Zq.prototype.de=function(){};Zq.prototype.getMeta=Zq.prototype.de;Zq.prototype.ge=function(){};Zq.prototype.getRowCount=Zq.prototype.ge;Zq.prototype.zc=function(){};Zq.prototype.getRow=Zq.prototype.zc;Zq.prototype.Va=function(){};Zq.prototype.getColumnNames=Zq.prototype.Va;Zq.prototype.We=function(){};Zq.prototype.getColumn=Zq.prototype.We;Zq.prototype.za=function(){};Zq.prototype.getCell=Zq.prototype.za;Zq.prototype.concat=function(){};\nZq.prototype.concat=Zq.prototype.concat;function $q(){}t(\"H.service.extension.dataView.IRow\",$q);$q.prototype.Va=function(){};$q.prototype.getColumnNames=$q.prototype.Va;$q.prototype.za=function(){};$q.prototype.getCell=$q.prototype.za;$q.prototype.Ad=function(){};$q.prototype.getTable=$q.prototype.Ad;function ar(a,b){this.a=a;this.b=b}t(\"H.service.extension.dataView.ObjRow\",ar);ar.prototype.Va=function(){return this.a.Va()};ar.prototype.getColumnNames=ar.prototype.Va;ar.prototype.za=function(a){return this.a.za(this.b,a)};ar.prototype.getCell=ar.prototype.za;ar.prototype.Ad=function(){return this.a};ar.prototype.getTable=ar.prototype.Ad;function br(){}t(\"H.service.extension.dataView.IColumn\",br);br.prototype.za=function(){};br.prototype.getCell=br.prototype.za;function cr(a,b){this.b=a;this.a=b}t(\"H.service.extension.dataView.ObjColumn\",cr);cr.prototype.za=function(a){return this.b.za(a,this.a)};cr.prototype.getCell=cr.prototype.za;function dr(a,b,c){var d;b=b||(a&&a.length?Object.keys(a[0]):B);this.Gb=a;if(b)for(this.Td=b,this.ih=a=nc(),d=b.length;d--;)a[b[d]]=!0;c!==B&&(this.oi=c)}t(\"H.service.extension.dataView.ObjTable\",dr);n=dr.prototype;n.oi=B;n.Gb=B;n.Td=B;n.ih=B;n.de=function(){return this.oi};dr.prototype.getMeta=dr.prototype.de;dr.prototype.ge=function(){return this.Gb?this.Gb.length:0};dr.prototype.getRowCount=dr.prototype.ge;dr.prototype.zc=function(a){var b=this.Gb;return b&&b[a]?new ar(this,a):B};\ndr.prototype.getRow=dr.prototype.zc;dr.prototype.Va=function(){return this.Td||gf};dr.prototype.getColumnNames=dr.prototype.Va;dr.prototype.We=function(a){return this.ih[a]?new cr(this,a):B};dr.prototype.getColumn=dr.prototype.We;dr.prototype.za=function(a,b){var c=this.Gb;return(a=c&&this.ih[b]&&c[a])&&a[b]};dr.prototype.getCell=dr.prototype.za;\ndr.prototype.concat=function(){var a=arguments.length,b,c=this.Td,d=\"\"+this.Td,e=(this.Gb||[]).slice();for(b=0;b<a;b++){var f=arguments[b];if(!(f instanceof dr))throw new D(this.concat,b);if(f.Gb){if(c&&\"\"+f.Td!==d)throw new D(this.concat,b,\"Incompatible columns!\");e=e.concat(f.Gb)}}return new dr(e,this.Td,this.oi)};dr.prototype.concat=dr.prototype.concat;function er(a,b){a.Gb?a.Gb.push(b):a.Gb=[b];return a.Gb.length-1};function fr(a){var b=gr;if(!a||!Ac($e(a.layerId,a.layer))||!Dc(a.level)||uc(a.rowFilter)&&!Da(a.rowFilter)||uc(a.rowFilterContext)&&!Ea(a.rowFilterContext))throw new D(b,1,uc(\"invalid layer config\")?\"invalid layer config\":a);};function hr(a,b,c,d){d=d||ir;this.tf={};d.provider=a;this.invalidate=ff;hr.l.constructor.call(this,b,d);delete this.invalidate;c&&(this.a=c);this.ya(Vg.ADD)}u(hr,kh);t(\"H.service.remote.Spatial\",hr);var ir={};hr.prototype.ib=function(){return this.a||kh.prototype.ib.call(this)};hr.prototype.getId=hr.prototype.ib;hr.prototype.Fg=id;hr.prototype.retain=hr.prototype.Fg;hr.prototype.release=ef;hr.prototype.release=hr.prototype.release;function jr(a,b){this.a=a;b&&(this.b=b)}var kr=new jr([]);\nhr.prototype.be=function(a){return(this.tf[a.key]||kr).a};hr.prototype.getGeometriesForTile=hr.prototype.be;hr.prototype.Ch=function(a){return(this.tf[a.key]||kr).b};hr.prototype.getLabels=hr.prototype.Ch;function lr(a,b,c){a.tf[b.key]=new jr(c,void 0)};function mr(a,b,c,d,e,f){nr(mr,1,b,c);nr(mr,2,d,e);(this.f=a.length)?(this.W=a,this.o=b,this.i=c,this.b=0,this.c=A(this.c,this),this.m=d,this.j=e,this.a=nc(),Xa(this.a,or,f||{}),this.g={},x.setTimeout(this.c,0)):b(gf,!0)}var or={duration:100,Cm:\"geometry\",Bm:\"WKT\",$o:\"searchAttributes\",Ij:B};\nmr.prototype.c=function(){var a=[];var b=!1;for(var c=Hk(),d;this.b<this.f;){var e=this.W[this.b];b=e.attributes;d=e.layerId||this.a.Ij;e.distance&&(b[this.a.$o]={nearest:new Yf(e.nearestLat,e.nearestLon),distance:e.distance});if(e=e[this.a.Cm]){try{var f=Nn(new io(e))}catch(g){this.i(new x.Error(g.message));b=!0;break}b[this.a.Bm]=f}(e=this.g[d])||(e=this.g[d]=this.m({layerId:d,columnNames:Object.keys(b)}));b=this.j(e,b);a.push(b);this.b++;if((b=this.b===this.f)||Hk()-c>=this.a.duration){this.o(a,\nb);break}}b?this.g=y:this.Gf=x.setTimeout(this.c,0)};mr.prototype.cancel=function(){x.clearTimeout(this.Gf);this.b<this.f&&this.i(new x.Error(\"parsing canceled\"))};mr.prototype.cancel=mr.prototype.cancel;function nr(a,b,c,d){if(!Da(c))throw new D(a,b,\"has invalid type\");if(!Da(d))throw new D(a,b+1,\"has invalid type\");};function pr(a,b,c){var d=8===a;this.b=b;this.c=c||id;(this.a=4===a||d)?this.j=d:this.g=1===a;this.f=this.a?\"$HProjGeometry\":\"geometry\"}\npr.prototype.parse=function(a,b,c){var d,e,f={},g=[],h,k;var l=0;for(h=c.length;l<h;l++){var m=c[l];var p=m.Rows;if(m=p.length){var q=Object.keys(p[0]).filter(function(v){return\"geometry\"!==v&&\"$HProjGeometry\"!==v});q=new dr(p,q);for(k=0;k<m;k++){var r=p[k];if(e=r[this.f]){if(delete r[this.f],r=q.zc(k))try{this.a?d=qr(this,a,b,r,e):d=rr(this,a,r,e.path),d.ka(a),g.push(d)}catch(v){this.c(v.message)}}else this.c(\"Layer must contain geometries\")}}}f[this.a?\"spatials\":this.g?\"markers\":\"domMarkers\"]=\ng;return f};function qr(a,b,c,d,e){var f=[],g=e.paths,h=g.length,k=0,l=a.b&&a.b(d);for(a=new hr(b,a.j,B,{style:l||a.i,data:d});k!==h;)f.push(sr(g[k++]));lr(a,c,[new Ah(f,e.interiorsIndex,e.outlinesIndex)]);return a}function rr(a,b,c,d){d=new Yf(d[0],d[1]);var e=a.b&&a.b(c);a.g?(a={icon:e,data:c,provider:b},a=new Gn(d,a)):(a={icon:e,data:c,provider:b},a=new Zi(d,a));return a}function sr(a){for(var b=0,c=a.length,d=[];b<c;)d.push(new I(a[b++],a[b++]));return d};function tr(a){a=a||{};var b=a.tileCacheSize||1024,c=a.resultType,d=a.styleCallback;uc(a.min)||(a.min=12);tr.l.constructor.call(this,a);if(-1===ur.indexOf(c))throw new D(tr,2,\"invalid resultType\");this.a=c;if(d&&!Da(d))throw new D(tr,2,\"invalid style callback\");this.fa=d;this.T=a.pixelRatio||Te();this.Lb=A(this.Lb,this);this.u(new Lk(b,A(this.Hb,this)));this.createTileInternal=4===c||8===c?A(this.L,this):A(this.B,this)}u(tr,R);t(\"H.service.extension.TileProvider\",tr);tr.prototype.c=!1;\ntr.prototype.getCapabilities=function(){return tr.l.getCapabilities.call(this)|Lj.CROP_LINES_BY_TILE|Lj.CROP_POLYGONS_BY_TILE};tr.prototype.lb=function(a,b,c,d){return this.c?tr.l.lb.call(this,a,b,c,d):B};tr.prototype.requestTile=tr.prototype.lb;tr.prototype.Lb=function(a){this.dispatchEvent(new ud(\"error\",Ac(a)?a:a+\"\",this))};tr.prototype.Wb=function(){return 1===this.a};tr.prototype.providesMarkers=tr.prototype.Wb;tr.prototype.Vb=function(){return 2===this.a};tr.prototype.providesDomMarkers=tr.prototype.Vb;\ntr.prototype.Hc=function(){return 4===this.a||8===this.a};tr.prototype.providesSpatials=tr.prototype.Hc;function vr(a){var b=a.Ea;b||(a.o||(a.o=a.m(a.a,a.fa,a.Lb)),b=a.Ea=new yq(a.o),b.ka(a),b.addEventListener(a.v.Da,A(a.Fa,a)),b.Ea=!0);return b}\ntr.prototype.B=function(a,b,c,d){var e=this.getTileKey(a,b,c);e=this.Ob().get(e);var f=2==this.a,g=[],h=vr(this);e?e.valid=!0:(a=e=new Tk(a,b,c,y),delete a.j,a.m=d);d=f?Aq(h,e,\"domMarkers\"):Aq(h,e,\"markers\");for(b=d.length;b--;)a=d[b],a.gj=e,(f||1===a.Bb().getState())&&g.push(a);e.data=g;return e};tr.prototype.Fa=function(a){if(a=a.target.gj)a.valid=!1};tr.prototype.ep=function(a){this.A=!!a};tr.prototype.setTileCanvasRendering=tr.prototype.ep;tr.prototype.A=!0;\ntr.prototype.L=function(a,b,c,d){var e=vr(this),f=this.getTileKey(a,b,c),g=this.tileSize,h=this.Ob().get(f);h||(a=h=new Xk(f,a,b,c,g,this.T,c,e),delete a.j,a.m=d);this.A?(d=$p.pop(g),h.V(d)||$p.push(d,g)):cl(h);return h};tr.prototype.Hb=function(a,b){var c;if(4===this.a||8===this.a){a=b.Wa();for(c=a.length;c--;)delete a[c].tf[b.key];b.data&&($p.push(b.zg(),this.tileSize),b.Ag())}else for(a=b.data,c=a.length;c--;)delete a[c].gj};tr.prototype.s=function(){tr.l.s.call(this);vr(this).C()};\nvar wr={MARKER:1,DOM_MARKER:2,POLYLINE:4,POLYGON:8};tr.ResultType=wr;var ur=[1,2,4,8];function gr(a,b,c){var d=this,e=b&&b.rowFilter,f=c.resultType;gr.l.constructor.call(this,c);C(a,xr,gr,0);fr(b);e?(c=Va(b),c.rowFilter=e.toString()):c=Va(b);delete c.layer;c.layerId=$e(b.layerId,b.layer);(new Nf).a(\"pde\",\"H.service.extension.worker.processor\");a=a.D().clone().F(yr+\".\"+zr).I({meta:1});(new Qf(\"pde\",{message:[this.uid,0,{tileSize:this.tileSize,projected:!0,onlyOutline:4===f,serverUrl:a.toString(),layerConfigs:[c],horizontalMargin:1}]})).then(function(){d.c=!0;d.Za()},this.Lb)}\nu(gr,tr);t(\"H.service.extension.platformData.TileProvider\",gr);gr.prototype.m=function(a,b,c){a=new pr(a,b,c);a.i=Ar;return a};var Ar=new ch({strokeColor:\"transparent\",fillColor:\"transparent\",lineWidth:0,lineJoin:\"round\",lineCap:\"round\"});\ngr.prototype.J=function(a,b,c,d,e){var f=this,g=this.getTileKey(a,b,c),h;g=this.Ob().get(g);var k={cancel:id},l=!0,m=this.a;g&&(4===m||8===m?g.ne()||(d($p.pop(this.tileSize),null),l=!1):(d(y),l=!1));if(l){var p=Yp.setTimeout(function(){h=new Qf(\"pde\",{message:[f.uid,1,[a,b,c]]});h.then(d,e)},500);k.cancel=function(){h?h.cancel():Yp.clearTimeout(p)}}return k};gr.prototype.requestInternal=gr.prototype.J;gr.prototype.s=function(){gr.l.s.call(this);new Qf(\"pde\",{message:[this.uid,3]})};\ngr.ResultType=wr;function Br(a){this.a=a}Br.prototype.cancel=function(){for(var a=this.a,b=a.length;b--;)a[b].cancel();a.length=0};function xr(a){xr.l.constructor.call(this,xr,a)}u(xr,dq);t(\"H.service.extension.platformData.Service\",xr);xr.prototype.a=function(){return{subDomain:\"s.fleet.ls\",path:\"1\"}};xr.CONFIG_KEY=\"platformData\";xr.prototype.request=function(a,b,c,d,e){return this.S(a,b,c,d,e)};\nxr.prototype.S=function(a,b,c,d,e){var f=\"text/plain\";if(!a)throw new D(this.request,0,a);if(!b)throw new D(this.request,1,b);if(!d)throw new D(this.request,3,d);if(!e)throw new D(this.request,4,e);a=this.D().clone().F(a+\".\"+b).I(c);b===Cr.JSON&&(f=\"application/json\");return this.J(a,d,e,f)};var yr=\"tiles\";\nxr.EntryPoint={DOC_ATTRIBUTES:\"doc/attributes\",DOC_LAYER:\"doc/layer\",DOC_LAYERS:\"doc/layers\",DOC_MAPS:\"doc/maps\",DOC_INDEXES:\"doc/indexes\",SEARCH_BBOX:\"search/bbox\",SEARCH_CORRIDOR:\"search/corridor\",SEARCH_PROXIMITY:\"search/proximity\",SEARCH_QUADKEY:\"search/quadkey\",SERVICE_CONFIGURATION:\"serviceconfiguration\",STATIC:\"static\",TILE:\"tile\",TILES:yr,FILE:\"file\",INDEX:\"index\"};var zr=\"json\",Cr={TXT:\"txt\",JSON:zr,HTML:\"html\",BIN:\"bin\"};xr.EntryPointType=Cr;\nxr.prototype.uc=function(a,b){var c=b&&b.resultType;a=new gr(this,a,b);var d;1==c||2===c?d=new Jn(a):d=new tl(a);return d};xr.prototype.createTileLayer=xr.prototype.uc;xr.prototype.Ld=function(a,b,c,d){var e=[],f,g=b.layer_id||b.layer_ids;a=this.request(a,zr,b,function(h){f=new mr(h.geometries,c,d,function(k){return new dr([],k.columnNames,k)},function(k,l){return k.zc(er(k,l))},{Ij:g});e.push(f)},function(h){d(new x.Error(h))});e.push(a);return new Br(e)};\nfunction Dr(a,b,c){if(!zc(a))throw new D(c,0,\"has invalid type\");if(!zc(b))throw new D(c,1,\"has invalid type\");if(a.length!==b.length||!a.length)throw new D(c,1,\"specify one key attribute for each given layer id in the same order\");}\nxr.prototype.Kc=function(a,b,c,d,e,f){function g(l,m){m&&h--;d(l,!h)}var h,k=[];Dr(a,b,this.Kc);nr(this.Kc,3,d,e);C(c,K,this.Kc,2);c={bbox:c.la+\",\"+c.ba+\";\"+c.na+\",\"+c.ia};f&&Xa(c,f);a=c.layer_id?[c.layer_id]:a;f=0;for(h=a.length;f<h;f++)c.layer_id=a[f],c.key_attribute=b[f],k.push(this.Ld(\"search/bbox\",c,g,e));return new Br(k)};xr.prototype.searchByBoundingBox=xr.prototype.Kc;\nxr.prototype.Yb=function(a,b,c,d,e,f,g){Dr(a,b,this.Yb);C(c,Yf,this.Yb,2,\"has invalid type\");if(!Dc(d))throw new D(this.Yb,3,\"has invalid type\");nr(this.Yb,4,e,f);a={layer_ids:a.join(\",\"),key_attributes:b.join(\",\"),proximity:c.lat+\",\"+c.lng+\",\"+d};g&&Xa(a,g);return this.Ld(\"search/proximity\",a,e,f)};xr.prototype.searchByProximity=xr.prototype.Yb;\nxr.prototype.Xb=function(a,b,c,d,e,f,g){var h=\"\";Dr(a,b,this.Xb);if(!Ac(c)&&!C(c,L))throw new D(this.Xb,1,\"has invalid type\");if(!Dc(d))throw new D(this.Xb,2,\"has invalid type\");nr(this.Xb,4,e,f);a={layer_ids:a.join(\",\"),key_attributes:b.join(\",\"),radius:d};if(Ac(c))a.route_id=c;else{d=c.Y;c=0;for(b=d.length;c<b;c+=3)h+=d[c]+\",\"+d[c+1],c<b-3&&(h+=\";\");a.corridor=h}g&&Xa(a,g);return this.Ld(\"search/corridor\",a,e,f)};xr.prototype.searchByCorridor=xr.prototype.Xb;\nY.prototype.zn=function(a){return this.Ya(xr,a)};Y.prototype.getPlatformDataService=Y.prototype.zn;function Er(a){Er.l.constructor.call(this,Er,a)}u(Er,dq);t(\"H.service.extension.geofencing.Service\",Er);Er.prototype.a=function(){return{subDomain:\"fleet.ls\",path:\"2\"}};Er.CONFIG_KEY=\"geofencing\";Er.prototype.request=function(a,b,c,d){return this.S(a,b,c,d)};Er.prototype.b=function(a){return Error(a.issues&&a.issues.length?a.issues.map(function(b){return b.message}).join(\". \"):a.message||a.response_code)};\nEr.prototype.S=function(a,b,c,d){if(!a)throw new D(this.request,0,a);if(!Da(c))throw new TypeError(\"onResult must be a function\");if(!Da(d))throw new TypeError(\"onError must be a function\");a=this.D().clone().F(a+\".json\").I(b);return this.J(a,c,d)};Er.EntryPoint={SEARCH_PROXIMITY:\"search/proximity\"};Y.prototype.an=function(a){return this.Ya(Er,a)};Y.prototype.getGeofencingService=Y.prototype.an;t(\"H.service.extension.customLocation.Permission\",{READ:\"read\",WRITE:\"write\",EXPORT:\"export\"});t(\"H.service.extension.customLocation.Storage\",{READONLY:\"readonly\",UPDATABLE:\"updatable\"});function Fr(a){var b=Gr;if(!a||!Ac(a.layerId)||uc(a.rowFilter)&&!Da(a.rowFilter)||uc(a.rowFilterContext)&&!Ea(a.rowFilterContext))throw new D(b,1,uc(\"invalid layer config\")?\"invalid layer config\":a);}function Hr(a){return Ac(a)&&/^[A-Z][A-Z0-9_]*$/.test(a)}function Ir(a){for(var b=a&&a.length,c=2<=b&&\"WKT\"===a[--b]&&\"GEOMETRY_ID\"===a[--b];c&&b--;)c=Hr(a[b]);return c}\nfunction Jr(a,b){var c=\"\",d,e,f=[];if(!b){var g={};f=[];if(a.geometries)for(e=0;e<a.geometries.length;e++)b=a.geometries[e],g[b.layerId]||(g[b.layerId]=[]),g[b.layerId].push(b);for(d in g)f.push({layerId:d,geometries:g[d]});for(d=0;d<f.length;d++)c+=Jr(f[d],f[d].layerId)}else if(a.geometries&&a.geometries.length)for(e=Object.keys(a.geometries[0].attributes),c=c+(\"Meta:\\t\"+b+\"\\n\")+e.join(\"\\t\"),c+=\"\\tWKT\\n\",d=0;d<a.geometries.length;d++){var h=a.geometries[d].attributes;g=a.geometries[d].geometry;for(b=\n0;b<e.length;b++)f.push(h[e[b]]);c+=f.join(\"\\t\");c+=\"\\t\"+g+\"\\n\";f=[]}return c};function Gr(a,b,c){var d=this,e=b&&b.rowFilter,f;Gr.l.constructor.call(this,c);C(a,Kr,Gr,0);var g=c.resultType;Fr(b);if(e){var h=Va(b);h.rowFilter=e.toString()}else h=b;(new Nf).a(\"cle\",\"H.service.extension.worker.processor\");var k=b.layerId;a.request(Lr,Mr,{detail_level:\"all\",layer_id:k},function(l){l=l.layers;var m;for(m=0;m<l.length;m++)if(l[m].layerId===k){h.level=l[m].level;break}f=a.D().clone().F(Nr+\".\"+Mr).I({meta:1});(new Qf(\"cle\",{message:[d.uid,0,{tileSize:d.tileSize,projected:!0,onlyOutline:4===\ng,serverUrl:f.toString(),layerConfigs:[h],batchTiles:!1,horizontalMargin:1}]})).then(function(){d.c=!0;d.Za()},d.Lb)},function(l){d.Lb(l.message)})}u(Gr,tr);t(\"H.service.extension.customLocation.TileProvider\",Gr);Gr.prototype.m=function(a,b,c){return new pr(a,b,c)};\nGr.prototype.J=function(a,b,c,d,e){var f=this,g=this.getTileKey(a,b,c),h;g=this.Ob().get(g);var k={cancel:id},l=!0,m=this.a;g&&(4===m||8===m?g.ne()||(d($p.pop(this.tileSize),null),l=!1):(d(y),l=!1));if(l){var p=Yp.setTimeout(function(){h=new Qf(\"cle\",{message:[f.uid,1,[a,b,c]]});h.then(d,e)},500);k.cancel=function(){h?h.cancel():Yp.clearTimeout(p)}}return k};Gr.prototype.requestInternal=Gr.prototype.J;Gr.prototype.s=function(){Gr.l.s.call(this);new Qf(\"cle\",{message:[this.uid,3]})};function Or(){if(Pr)throw new Yc(Or);}t(\"H.service.extension.customLocation.Table\",Or);var Pr=!0;function Qr(a,b){var c;Pr=!1;var d=new Or;Pr=!0;d.c=qc(x.JSON.parse(x.JSON.stringify(a)));a=a.columnNames;var e=nc();for(c=a.length;c--;)e[a[c]]=c;d.f=e;d.b=a.length;if(b){if(b.length%a.length)throw new D(Qr,1,\"Invalid number of cells\");}else b=[];d.a=b;return d}Or.prototype.de=function(){return this.c};Or.prototype.getMeta=Or.prototype.de;Or.prototype.ge=function(){return this.a.length/this.b};\nOr.prototype.getRowCount=Or.prototype.ge;Or.prototype.zc=function(a){return a<this.a.length/this.b?new Rr(this,a):B};Or.prototype.getRow=Or.prototype.zc;Or.prototype.Jn=function(){var a=this.a.length/this.b,b,c=new x.Array(a);for(b=0;b<a;b++)c[b]=new Rr(this,b);return c};Or.prototype.getRows=Or.prototype.Jn;Or.prototype.Zg=function(a){var b=this.b,c=this.a,d=c.length/this.b;if(!a||a.length%b)throw new D(this.Zg,0,\"Invalid number of cells\");this.a=c.concat(a);return d};Or.prototype.addCells=Or.prototype.Zg;\nOr.prototype.fm=function(){for(var a=this.b,b=this.a,c=this.a.length/this.b;a--;)b.push(y);return this.zc(c)};Or.prototype.addRow=Or.prototype.fm;Or.prototype.Va=function(){return this.c.columnNames};Or.prototype.getColumnNames=Or.prototype.Va;Or.prototype.We=function(a){return this.f[a]===B?B:new Sr(this,a)};Or.prototype.getColumn=Or.prototype.We;Or.prototype.za=function(a,b){return this.a[a*this.b+this.f[b]]};Or.prototype.getCell=Or.prototype.za;\nOr.prototype.Lc=function(a,b,c){b=this.f[b];if(a>=this.a.length/this.b)throw new D(this.Lc,0,\"Row index out of bounds\");if(b===B)throw new D(this.Lc,0,\"Column unknown\");this.a[a*this.b+b]=c};Or.prototype.setCell=Or.prototype.Lc;\nOr.prototype.concat=function(a){var b=arguments.length,c,d=\"\"+this.Va(),e=this.a?this.a.slice():[];for(c=0;c<b;c++){var f=arguments[c];if(!(f instanceof Or))throw new D(this.concat,c);if(\"\"+f.Va()!==d)throw new D(this.concat,c,\"Incompatible columns!\");f.a&&(e=e.concat(f.a))}return Qr(this.c,e)};Or.prototype.concat=Or.prototype.concat;var Tr=/(\\n|\\t|\\r|\")/;\nOr.prototype.cj=function(a,b){var c,d=this.b,e=this.Va(),f=[],g=[],h=this.a,k=-1;for(c=0;c<d;c++)if(!a||a.test(e[c]))\"WKT\"===e[c]&&(k=f.length),f.push(c);if(!(a=f.length))throw new D(this.cj,1,\"No columns filtered\");Ur(this,g,e,0,d,f,a,k);if(b){var l=b.length;for(c=0;c<l;c++)g.push(\"\\n\"),e=b[c],Ur(this,g,h,e,d,f,a,k)}else for(l=this.ge(),e=0;e<l;e++)g.push(\"\\n\"),Ur(this,g,h,e,d,f,a,k);return g.join(\"\")};\nfunction Ur(a,b,c,d,e,f,g,h){var k;for(k=0;k<g;k++){k&&b.push(\"\\t\");var l=c[d*e+f[k]];if(k!==h){if(l!==y){l=String(l);if(Tr.test(l))throw new D(a.cj,0,'Invalid character (\\\\n, \\\\r, \\\\t, or \") in row '+d+\" column \"+a.c.columnNames[f[k]]);b.push(l)}}else b.push(l)}}function Sr(a,b){this.b=a;this.a=b}Or.Column=Sr;Sr.prototype.za=function(a){return this.b.za(a,this.a)};Sr.prototype.getCell=Sr.prototype.za;Sr.prototype.Lc=function(a,b){this.b.Lc(a,this.a,b)};Sr.prototype.setCell=Sr.prototype.Lc;\nfunction Rr(a,b){this.a=a;this.ki=b}Or.Row=Rr;Rr.prototype.Va=function(){return this.a.Va()};Rr.prototype.getColumnNames=Rr.prototype.Va;Rr.prototype.za=function(a){return this.a.za(this.ki,a)};Rr.prototype.getCell=Rr.prototype.za;Rr.prototype.Lc=function(a,b){this.a.Lc(this.ki,a,b)};Rr.prototype.setCell=Rr.prototype.Lc;Rr.prototype.Ad=function(){return this.a};Rr.prototype.getTable=Rr.prototype.Ad;function Vr(a){if(a===B)a=\"\\t\";else if(!/^[^\"\\r\\n]$/.test(a))throw new D(Vr,0);this.c=String(a).charCodeAt(0);this.li=A(this.li,this);this.a=Wr}var Wr=0;n=Vr.prototype;n.getState=function(){return this.a};function Xr(a,b,c){var d=a.a;if(d!==b)throw 1===d&&(a.a=Wr),new Yc(c,\"Requires state: \"+[\"READY\",\"PARSE\",\"PAUSE\"][b]+\" but found \"+[\"READY\",\"PARSE\",\"PAUSE\"][d]);}n.abort=function(){Xr(this,2,Vr.prototype.abort);this.a=Wr};\nn.li=function(a){this.a=Wr;throw new D(Vr.prototype.parse,0,\"Malformed DSV at row \"+this.b.j+\" column \"+this.b.b+\": \"+a);};function Yr(a,b){var c=[];a.parse(b,function(d,e,f){1>d&&(c[e]=f);return 0<d});a.a=Wr;return c}n.parse=function(a,b,c){Xr(this,Wr,Vr.prototype.parse);a=a.trim();this.b=new Zr(a,this.c,this.li);this.f=b;this.Rk=c||ff;this.a=2;this.resume()};n.Rk=ff;\nn.resume=function(){var a=this.b,b=[];Xr(this,2,Vr.prototype.resume);this.a=1;do{if(!a.g){this.a=Wr;break}if(e>a.b){if(void 0!==c&&c!==e){this.b.a(\"The number of columns must be the same for all rows\");return}var c=e}var d=a.j;var e=a.b;var f=a.Pf;var g=this.Rk(d,e,a);if(a.Pf>f)for(;-1!==a.next(););else{for(;-1!==(f=a.next());)b.push(f);g=String.fromCharCode.apply(y,b);b.length=0}$r(a);this.f(d,e,g)&&(this.a=a.g?2:Wr)}while(1===this.a);2!=this.a&&void 0!==c&&0<e&&c!==e&&this.b.a(\"The number of columns must be the same for all rows\")};\nfunction Zr(a,b,c){this.c=new io(a);this.m=b;this.g=!0;this.Pf=this.j=this.b=0;$r(this);this.a=c;this.f=[];this.i=!1}n=Zr.prototype;n.Pf=0;function $r(a){var b=a.c.Tb();a.o=!1;(a.W=34===b)&&a.c.next()}function as(a,b){var c=a.c;a.o=!0;switch(b){case a.m:a.b++;break;case 13:c.next(),10!==c.Tb()&&a.a(\"CR without LF\");case 10:a.b=0;a.j++;break;case -1:a.g=!1;break;default:a.a(\"End of field expected\")}c.next();return-1}\nn.Tb=function(){if(this.o)var a=-1;else{var b=this.c;a=b.Tb();if(this.W)switch(a){case 34:b.next();a=b.Tb();34!==a&&(a=as(this,a));break;case -1:this.a(\"Closing quotation mark expected\")}else switch(a){case 34:this.a(\"Unexpected quotation mark\");case this.m:case 13:case 10:case -1:a=as(this,a)}}return a};n.Be=function(){this.i=!0;this.f=[]};n.Wd=function(){var a=this.f.slice();this.i=!1;this.f=[];return a};n.next=function(){var a=this.Tb();-1!==a&&this.c.next();this.i&&this.f.push(a);this.Pf++;return a};function bs(a,b,c,d){d=d||{};if(!b)throw new D(bs,1,\"has to be a function\");if(!c)throw new D(bs,2,\"has to be a function\");this.c=b;this.g=c;this.a=[];this.i=d.duration||cs;this.b=A(this.b,this);this.f={};a=a.split(\"Meta:\\t\").slice(1);for(b=0;b<a.length;b++){d=a[b].split(\"\\n\");c=d[0].split(\"\\t\")[0];d=d.slice(1).join(\"\\n\");this.Vd[c]=new Vr;this.ji[c]=Yr(this.Vd[c],d);var e={layerId:c,columnNames:this.ji[c]};this.Wh.push(c);this.f[c]=Qr(e);this.Pc[c]=Hk();ds(this,d,c);this.b(c)}}var cs=100;n=bs.prototype;\nn.ji={};n.Wh=[];n.Vd={};n.Pc={};n.bj={};function ds(a,b,c){var d=[],e=a.ji[c].length-1,f=a.f[c];try{a.Vd[c].parse(b,function(g,h,k){var l=!1;0<g&&(d[h]=k,h===e&&(a.a.push(f.zc(f.Zg(d))),Hk()-a.Pc[c]>a.i&&(l=!0)));return l},function(g,h,k){if(0<g&&h===e)return Nn(k)})}catch(g){a.g(g)}}n.cancel=function(){for(var a in this.bj)x.clearTimeout(this.bj[a])};bs.prototype.cancel=bs.prototype.cancel;\nbs.prototype.b=function(a){var b=this,c,d;this.bj[a]=x.setTimeout(function(){if(2===b.Vd[a].getState())b.Pc[a]=Hk(),b.c(b.a,!1),b.a=[],b.Vd[a].resume(),b.b(a);else{c=!0;for(d=0;d<b.Wh.length;d++)if(b.Vd[b.Wh[d]].getState()!==Wr){c=!1;break}c&&(0<b.a.length&&b.c(b.a,!0),b.a=[])}},0)};function Kr(a){Kr.l.constructor.call(this,Kr,a)}u(Kr,dq);t(\"H.service.extension.customLocation.Service\",Kr);Kr.prototype.a=function(){return{subDomain:\"fleet.ls\",path:\"2\"}};Kr.CONFIG_KEY=\"customLocation\";Kr.prototype.uc=function(a,b){var c=b&&b.resultType;a=new Gr(this,a,b);var d;1===c||2===c?d=new Jn(a):d=new tl(a);return d};Kr.prototype.createTileLayer=Kr.prototype.uc;\nfunction es(a,b,c,d){var e;a=a===fs?\"changes\":\"file\";var f=b[a],g=Ac(f),h=!g&&C(f,Blob);if(!g&&!h)throw new D(d,0,\"Invalid \"+a+\" parameter\");if(gs)h?e=f:e=of(f,\"text/plain\"),d=new x.FormData,d.append(a,e,e.name||a+\".wkt\"),c.method=\"POST\",c.data=d,delete b[a];else if(h)throw new D(d,0,\"Sending Blob data is not supported by the browser\");}var gs=x.FormData&&!!x.FormData.prototype.append;Kr.prototype.request=function(a,b,c,d,e){return this.S(a,b,c,d,e)};\nKr.prototype.S=function(a,b,c,d,e){var f=\"text/plain\",g=a===hs.LAYERS_UPLOAD||a===hs.LAYERS_MODIFY||a===hs.LAYERS_IMPORT,h=c,k={data:B,method:\"GET\",headers:this.gf};if(!a)throw new D(this.request,0,a);if(!b)throw new D(this.request,1,b);nr(this.request,3,d,e);g&&(C(c,Object,this.request,2,\"Invalid request parameters\"),h=Va(c),es(a,h,k,this.request));var l=this.D().clone().F(a+\".\"+b).I(h);b===is.JSON&&(f=\"application/json\");a=new sf(f,l.toString(),ge,k);a.then(function(m){var p=m.issues;p&&m.error_id&&\nm.response_code?e(Error(p[0].message)):d(m)},function(m){\"error\"===m.type||404===m.status?e(Error(m.statusText||\"Unable to load data\")):m.json().then(function(p){e(Error(\"[\"+p.issues[0].message+\"] \"+l+\" request failed\"))},function(){e(Error(\"[\"+m.statusText+\"] \"+l+\" request failed\"))})});return a};\nvar Lr=\"layers/list\",fs=\"layers/modify\",Nr=\"tiled/tile\",hs={LAYERS_DELETE:\"layers/delete\",LAYERS_GRANT:\"layers/access/grant\",LAYERS_LIST:Lr,LAYERS_MODIFY:fs,LAYERS_UPLOAD:\"layers/upload\",LAYERS_IMPORT:\"layers/import\",SEARCH_ALL:\"search/all\",SEARCH_BBOX:\"search/bbox\",SEARCH_CORRIDOR:\"search/corridor\",SEARCH_PROXIMITY:\"search/proximity\",SEARCH_QUADKEY:\"search/quadkey\",SEARCH_TILE:Nr};Kr.EntryPoint=hs;var Mr=\"json\",is={TXT:\"txt\",JSON:Mr};Kr.EntryPointType=is;\nKr.prototype.tb=function(a,b,c){var d=this;return this.request(\"search/all\",\"txt\",{filter:'WKT==\"\"',layer_id:a},function(e){var f=e.replace(/[\\r\\n]+$/g,\"\").split(\"\\t\");d.request(Lr,Mr,{layer_id:a,detail_level:\"all\"},function(g){g=g.layers[0];g.columnNames=f;b(Qr(g))},c)},c)};Kr.prototype.getLayer=Kr.prototype.tb;\nKr.prototype.mk=function(a,b,c,d){function e(){return++g<f?h.request(\"layers/access/grant\",Mr,{layer_id:a,granted_app_id:b[g].grantedAppId,permissions:b[g].permissions.join(\",\")},e,d):h.tb(a,c,d)}var f=b&&b.length,g=-1,h=this;return e()};Kr.prototype.grantAccess=Kr.prototype.mk;Kr.prototype.Kj=function(a,b,c){return this.request(\"layers/delete\",Mr,{layer_ids:a},b,c)};Kr.prototype.deleteLayer=Kr.prototype.Kj;\nKr.prototype.td=function(a,b,c){function d(){setTimeout(function(){k.tb(g,function(q){setTimeout(e.bind(null,q),m)},function(){64E3>l?(l+=m,d()):c(x.Error(\"Timeout\"))})},m);m*=2}function e(q){var r=JSON.stringify(q.Va()),v=a.grants;if(r!==JSON.stringify(h)){var w=\"Results into different column names on the backend: \"+r;setTimeout(function(){k.Kj(g,function(){c(x.Error(w))},function(z){c(x.Error(w+\". \"+z.message))})},m)}else v&&v.length?k.mk(g,v,b,c):b(q)}var f,g,h,k=this,l=0,m=1E3;var p=!a||!Hr(g=\na.layerId)&&(f=\"layerId\")||!Ir(h=a.columnNames)&&(f=\"columnNames\")?0:Da(b)?Da(c)?-1:2:1;if(0<=p)throw new D(k.td,p,f||arguments[p]);return k.tb(g,function(){c(x.Error(\"Layer exists already\"))},function(){var q={layer_id:g,file:h.join(\"\\t\")},r=a.level,v=a.storage;r!==B&&(q.level=r);v!==B&&(q.storage=v);k.request(\"layers/upload\",Mr,q,d,c)})};Kr.prototype.createLayer=Kr.prototype.td;\nKr.prototype.Ld=function(a,b,c,d){var e=[],f;a=this.request(a,Mr,b,function(g){g.geometries.length?(g=Jr(g,b.layer_id),f=new bs(g,c,d),e.push(f)):c(gf,!0)},d);e.push(a);return new Br(e)};Kr.prototype.Yb=function(a,b,c,d,e,f){if(!zc(a))throw new D(this.Yb,0,\"has invalid type\");C(b,Yf,this.Yb,1,\"has invalid type\");if(!Dc(c))throw new D(this.Yb,2,\"has invalid type\");nr(this.Yb,3,d,e);a={layer_ids:a.join(\",\"),proximity:b.lat+\",\"+b.lng+\",\"+c};f&&Xa(a,f);return this.Ld(\"search/proximity\",a,d,e)};\nKr.prototype.searchByProximity=Kr.prototype.Yb;Kr.prototype.Xb=function(a,b,c,d,e,f){var g=\"\";if(!zc(a))throw new D(this.Xb,0,\"has invalid type\");if(!Ac(b)&&!C(b,L))throw new D(this.Xb,1,\"has invalid type\");if(!Dc(c))throw new D(this.Xb,2,\"has invalid type\");nr(this.Xb,3,d,e);a={layer_ids:a.join(\",\"),radius:c};if(Ac(b))a.route_id=b;else{var h=b.Y;b=0;for(c=h.length;b<c;b+=3)g+=h[b]+\",\"+h[b+1],b<c-3&&(g+=\",\");a.corridor=g}f&&Xa(a,f);return this.Ld(\"search/corridor\",a,d,e)};\nKr.prototype.searchByCorridor=Kr.prototype.Xb;Kr.prototype.Kc=function(a,b,c,d,e){function f(k,l){l&&h--;c(k,!h)}var g=[],h;if(!zc(a))throw new D(this.Kc,0,\"has invalid type\");C(b,K,this.Kc,1,\"has invalid type\");nr(this.Kc,2,c,d);b={bbox:b.la+\",\"+b.ba+\";\"+b.na+\",\"+b.ia};e&&Xa(b,e);a=b.layer_id?[b.layer_id]:a;e=0;for(h=a.length;e<h;e++)b.layer_id=a[e],g.push(this.Ld(\"search/bbox\",b,f,d));return new Br(g)};Kr.prototype.searchByBoundingBox=Kr.prototype.Kc;\nKr.prototype.Ii=function(a,b,c,d){var e,f=[];if(!Ac(a))throw new D(this.Ii,0,\"has invalid type\");nr(this.Ii,1,b,c);var g={layer_id:a};d&&Xa(g,d);d=this.request(\"search/all\",Mr,g,function(h){h.geometries.length?(h=Jr(h,a),e=new bs(h,b,c),f.push(e)):b(gf,!0)},c);f.push(d);return new Br(f)};Kr.prototype.searchAll=Kr.prototype.Ii;var js={\"delete\":/^GEOMETRY_ID$/,append:/^(?!GEOMETRY_ID$)/};\nfunction ks(a,b,c,d,e,f){function g(){v++;d(this,v===q)}function h(U){v++;e(U,this,v===q)}var k=\"append\"!==b,l,m={},p=nc(),q=0,r=[],v=0;if(!zc(c))throw new D(f,0,c);nr(f,1,d,e);for(l=c.length;l--;){var w=c[l];if(C(w,Rr)){var z=w.Ad().de().layerId;var J=w.za(\"GEOMETRY_ID\");if(k){if(J===y||\"\"===String(J))var G='GEOMETRY_ID must not be null or \"\"';m[J=z+\"_\"+J]&&(G=\"same GEOMETRY_ID for multiple rows\");m[J]=w}else J!==y&&\"\"!==String(J)&&(G='GEOMETRY_ID must be null or \"\"')}else G=\"Invalid type\";if(G)throw new D(f,\n0,\"- Invalid row at index \"+l+\", \"+G);J=p[z];J||(J=p[z]=[],q++);J.push(w)}for(z in p){J=p[z];c=[];for(l=J.length;l--;)c.push(J[l].ki);r.push(a.request(fs,Mr,{layer_id:z,action:b,changes:J[0].Ad().cj(js[b]||null,c)},A(g,J),A(h,J)))}return new Br(r)}Kr.prototype.Aj=function(a,b,c){return ks(this,\"append\",a,b,c,this.Aj)};Kr.prototype.appendRows=Kr.prototype.Aj;Kr.prototype.Tl=function(a,b,c){return ks(this,\"update\",a,b,c,this.Tl)};Kr.prototype.updateRows=Kr.prototype.Tl;\nKr.prototype.Lj=function(a,b,c){return ks(this,\"delete\",a,b,c,this.Lj)};Kr.prototype.deleteRows=Kr.prototype.Lj;Y.prototype.Qm=function(a){return this.Ya(Kr,a)};Y.prototype.getCustomLocationService=Y.prototype.Qm;function ls(a){Lq.l.constructor.call(this,ls,a)}u(ls,dq);t(\"H.service.extension.customRoute.Service\",ls);ls.prototype.a=function(){return{subDomain:\"s.fleet.ls\",path:\"2\"}};ls.CONFIG_KEY=\"customRoute\";ls.prototype.b=function(a){return Error(a.issues&&a.issues.length?a.issues.map(function(b){return b.message}).join(\". \"):a)};ls.prototype.Sd=function(a,b,c){nr(this.Sd,1,b,c);a=this.D().clone().F(\"calculateroute.json\").I(a);return this.J(a,b,c)};ls.prototype.calculateRoute=ls.prototype.Sd;\nY.prototype.Rm=function(a){return this.Ya(ls,a)};Y.prototype.getCustomRoutingService=Y.prototype.Rm;function ms(a){ms.l.constructor.call(this,ms,a)}u(ms,dq);t(\"H.service.SearchService\",ms);ms.CONFIG_KEY=\"search\";ms.prototype.a=function(){return{subDomain:\"search\",path:\"v1\"}};ms.prototype.b=function(a){a=[a.title,a.action,a.cause].filter(function(b){return b});return Error(a.join(\". \"))};ms.prototype.uh=function(a,b,c){a=this.D().clone().Na(\"geocode\").F(\"geocode\").I(a);return this.J(a,b,c)};ms.prototype.geocode=ms.prototype.uh;\nms.prototype.Hi=function(a,b,c){a=this.D().clone().Na(\"revgeocode\").F(\"revgeocode\").I(a);return this.J(a,b,c)};ms.prototype.reverseGeocode=ms.prototype.Hi;ms.prototype.jm=function(a,b,c){a=this.D().clone().Na(\"autosuggest\").F(\"autosuggest\").I(a);return this.J(a,b,c)};ms.prototype.autosuggest=ms.prototype.jm;ms.prototype.rm=function(a,b,c){a=this.D().clone().Na(\"discover\").F(\"discover\").I(a);return this.J(a,b,c)};ms.prototype.discover=ms.prototype.rm;\nms.prototype.uo=function(a,b,c){a=this.D().clone().Na(\"lookup\").F(\"lookup\").I(a);return this.J(a,b,c)};ms.prototype.lookup=ms.prototype.uo;ms.prototype.lm=function(a,b,c){a=this.D().clone().Na(\"browse\").F(\"browse\").I(a);return this.J(a,b,c)};ms.prototype.browse=ms.prototype.lm;Y.prototype.Ln=function(a){return this.Ya(ms,a)};Y.prototype.getSearchService=Y.prototype.Ln;function ns(a){this.g=!!a.toBypassToken;if(!this.g&&!a.token)throw new D(ns,0,'\"token\" must be specified');ns.l.constructor.call(this,ns,a);this.j=a.token;this.i={};this.f={}}u(ns,dq);t(\"H.service.xyz.Service\",ns);ns.prototype.a=function(){return{host:\"xyz.api.here.com\",path:\"hub/spaces\"}};ns.prototype.b=function(a){return Error(a.errorMessage||a.message)};\nns.prototype.Gh=function(a,b,c){xc(a,\"String\",this.Gh,0,'\"projectId\" must be a string');os(this.Gh,1,b,c);a=ps(this.D().clone().Od(\"project-api/projects/\"+a));return this.J(a,b,c)};ns.prototype.getProject=ns.prototype.Gh;ns.prototype.hk=function(a,b,c){os(this.hk,0,a,b);c=qs(this,this.D().clone().I(c||{}));return this.J(c,a,b)};ns.prototype.getSpaces=ns.prototype.hk;\nns.prototype.gg=function(a,b,c){xc(a,\"String\",this.gg,0,'\"spaceId\" must be a string');os(this.gg,1,b,c);a=qs(this,this.D().clone().F(a));return this.J(a,b,c)};ns.prototype.getSpace=ns.prototype.gg;ns.prototype.he=function(a,b,c){xc(a,\"String\",this.he,0,'\"spaceId\" must be a string');os(this.he,1,b,c);a=qs(this,this.D().clone().F(a+\"/statistics\"));return this.J(a,b,c)};ns.prototype.getStatistics=ns.prototype.he;\nns.prototype.bg=function(a,b,c,d,e,f,g){a=qs(this,this.D().clone().F(d+\"/tile/web/\"+c+\"_\"+a+\"_\"+b+\".mvtf\").I(Object.assign({clip:!0},g)));return this.J(a,function(h){return h.arrayBuffer().then(e)},f,\"arraybuffer\")};ns.prototype.search=function(a,b,c,d){xc(a,\"String\",this.search,0,'\"spaceId\" must be a string');os(this.search,1,b,c);a=qs(this,this.D().clone().F(a+\"/search\").I(d||{}));return this.J(a,b,c)};ns.prototype.search=ns.prototype.search;\nns.prototype.dd=function(a,b,c,d){xc(a,\"String\",this.dd,0,'\"spaceId\" must be a string');if(!Ea(b))throw new D(this.dd,1,'\"params\" must be an object');os(this.dd,2,c,d);a=qs(this,this.D().clone().F(a+\"/features\").I(b));return this.J(a,c,d)};ns.prototype.getFeaturesById=ns.prototype.dd;\nns.prototype.ae=function(a,b,c,d){xc(a,\"String\",this.ae,0,'\"spaceId\" must be a string');if(!Ea(b))throw new D(this.dd,1,'\"params\" must be an object');os(this.ae,2,c,d);a=qs(this,this.D().clone().F(a+\"/bbox\").I(b));return this.J(a,c,d)};ns.prototype.getFeaturesByBoundingBox=ns.prototype.ae;ns.prototype.va=function(a){var b=this.i[a];if(b)return b;this.f[a]||this.Te(a);return null};\nns.prototype.md=function(a,b,c,d,e){xc(a,\"String\",this.md,0,'\"spaceId\" must be a string');if(!Ea(b))throw new D(this.md,1,'\"geojsonObject\" must be an object');os(this.md,2,c,d);if(e&&!Ea(e))throw new D(this.md,4,'\"opt_params\" must be an object');return rs(this,a,c,d,\"PUT\",b,e)};ns.prototype.putFeatures=ns.prototype.md;\nns.prototype.kd=function(a,b,c,d,e){xc(a,\"String\",this.kd,0,'\"spaceId\" must be a string');if(!Ea(b))throw new D(this.kd,1,'\"featureCollection\" must be an object');os(this.kd,2,c,d);if(e&&!Ea(e))throw new D(this.kd,4,'\"opt_params\" must be an object');return rs(this,a,c,d,\"POST\",b,e)};ns.prototype.postFeatures=ns.prototype.kd;\nns.prototype.vd=function(a,b,c,d){xc(a,\"String\",this.vd,0,'\"spaceId\" must be a string');if(!Ea(b))throw new D(this.vd,1,'\"params\" must be an object');os(this.vd,2,c,d);return rs(this,a,c,d,\"DELETE\",B,b)};ns.prototype.deleteFeatures=ns.prototype.vd;\nfunction rs(a,b,c,d,e,f,g){var h=Object.assign(a.g?{}:{authorization:\"Bearer \"+a.j},{\"Content-Type\":\"application/geo+json\"},a.gf);e={method:e,headers:h};f&&(e.data=JSON.stringify(f));b=ps(a.D().clone().F(b+\"/features\").I(g||{}));f=new sf(\"application/json\",b.toString(),ge,e);f.then(c,fq(a,b,d));return f}ns.prototype.Te=function(a){var b=this;this.f[a]=ss;this.gg(a,function(c){b.f[a]=ts;b.i[a]=c.copyright;b.dispatchEvent(\"copyrightupdate\")},function(c){b.f[a]=us;throw c;})};\nfunction qs(a,b){return a.g?b:ps(b).I({access_token:a.j})}function ps(a){var b=Object.assign({},a.getQuery());delete b.apikey;return a.Ui(b)}ns.CONFIG_KEY=\"xyz\";var ss=1,ts=2,us=-1;function os(a,b,c,d){if(!Da(c))throw new D(a,b,'\"onResult\" must be a function');if(!Da(d))throw new D(a,b+1,'\"onError\" must be a function');}Y.prototype.Yn=function(a){return this.Ya(ns,a)};Y.prototype.getXYZService=Y.prototype.Yn;function vs(a,b,c){var d;vs.l.constructor.call(this,c?{min:c.min,max:c.max,engineType:c.engineType}:void 0);C(a,ns,vs,0);if(!Ac(b))throw new D(vs,1,'\"spaceId\" must be a string');this.m=a;this.a=b;this.c={};if(c&&([\"limit\",\"simplificationLevel\",\"tags\"].forEach(function(e){e in c&&(this.c[e]=c[e])},this),a=c.parameters))for(d in a)this.c[d]=a[d];this.ac(this.f===ek.WEBGL?new bi({sources:{xyz:{type:\"MVT\"}},layers:{xyz:{data:{source:\"xyz\",layer:this.a},points:{filter:{$geometry:\"point\"},draw:{points:{collide:!1,\norder:200,color:\"#92CF48\",size:[[10,\"8px\"],[14,\"12px\"],[18,\"16px\"]]}}},polygons:{filter:{$geometry:\"polygon\"},draw:{polygons:{order:201,color:\"#E39E3C\"},lines:{order:202,color:\"#755DA5\",width:\"1px\"}}},lines:{filter:{$geometry:\"line\"},draw:{lines:{order:203,color:\"#000000\",width:\"2px\",join:\"round\",cap:\"round\"}}}}}}):new H.map.render.harp.Style({styles:[{layer:this.a,when:[\"==\",[\"geometry-type\"],\"Point\"],technique:\"circles\",renderOrder:200,color:\"#92CF48\",size:[\"interpolate\",[\"linear\"],[\"zoom\"],10,\n8,14,12,18,16]},{layer:this.a,when:[\"==\",[\"geometry-type\"],\"Polygon\"],technique:\"fill\",color:\"#E39E3C\",renderOrder:201},{layer:this.a,when:[\"==\",[\"geometry-type\"],\"Polygon\"],technique:\"solid-line\",color:\"#755DA5\",lineWidth:\"1px\",renderOrder:202},{layer:this.a,when:[\"==\",[\"geometry-type\"],\"LineString\"],technique:\"solid-line\",color:\"#000000\",lineWidth:\"2px\",renderOrder:203}]}))}u(vs,R);t(\"H.service.xyz.Provider\",vs);vs.prototype.J=function(a,b,c,d,e){return this.m.bg(a,b,c,this.a,d,e,this.c)};\nvs.prototype.requestInternal=vs.prototype.J;vs.prototype.va=function(){return this.m.va(this.a)};vs.prototype.getCopyrights=vs.prototype.va;vs.prototype.Gd=ef;vs.prototype.providesOMV=vs.prototype.Gd;vs.prototype.wa=function(){return this.ub()};vs.prototype.getStyle=vs.prototype.wa;vs.prototype.pc=function(a){C(a,bi)&&a.b(\"MVT\");this.ac(a)};vs.prototype.setStyle=vs.prototype.pc;t(\"H.service.buildInfo\",function(){return Ff(\"H-service\",\"1.30.8\",\"00959ca\")});\n");